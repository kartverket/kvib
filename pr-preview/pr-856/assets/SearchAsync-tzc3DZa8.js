import{j as e}from"./extends-CwFRzn3r.js";import{useMDXComponents as k}from"./index-DlpNa54Y.js";import{ae as j,af as i,ai as d,ag as x}from"./index-BP_ekSlm.js";import{S as f,a as g,b,c as v,d as y,e as S,f as p}from"./SearchAsync.stories-C5wf7m3x.js";import{D as a,F as A,a as l,b as c}from"./Feedback-BK1mKWJa.js";import{B as o}from"./chunk-PULVB27S-CgiffgmI.js";import{T as t}from"./chunk-2OOHT3W5-CV6N7GVi.js";import{C as r}from"./chunk-LZZHVJFG-CBh9GFNK.js";import{U as u,a as m}from"./chunk-46CXQZ4E-CjoLYaXv.js";import"./index-BwDkhjyp.js";import"./_commonjsHelpers-BosuxZz1.js";import"./iframe-B3BkUXYO.js";import"../sb-preview/runtime.js";import"./index-Dn0f7ynd.js";import"./index-D-8MO0q_.js";import"./isNativeReflectConstruct-lfp1ZYuW.js";import"./inheritsLoose-B6jfs0L0.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-DF3CPj03.js";import"./index-DrFu-skq.js";import"./SearchAsync-DuNggyJF.js";import"./defineProperty-BylEvKcw.js";import"./emotion-react.browser.esm-DOaDIBza.js";import"./chunk-ZJJGQIVY-CoI1iMVy.js";import"./chunk-56K2BSAJ-DEJm4C0m.js";import"./chunk-DFWC5MHP-TuRmrrLs.js";import"./index-CHDWSgKD.js";import"./index-Bdxaq0s4.js";import"./chunk-DMO4EI7P-D6u3hnqn.js";import"./chunk-7FWEOSAE-DBqCpNZ5.js";import"./chunk-UIGT7YZF-XoNRsZNz.js";import"./chunk-W7WUSNWJ-BjdlM_ZX.js";import"./chunk-KC77MHL3-DdPeEU-Q.js";import"./chunk-G72KV6MB-s0NcBBxe.js";import"./chunk-57I6FYPZ-CwnaZWLD.js";import"./chunk-VMD3UMGK-5-kd4ADr.js";import"./index-DJS8qWMq.js";import"./chunk-2GBDXOMA-K_WHOyag.js";import"./chunk-5PH6ULNP-B_hWxh7m.js";import"./chunk-HB6KBUMZ-681QBenr.js";import"./chunk-AXLEE3EK-CuzCDNQU.js";import"./chunk-OCNORRQU-DESonMht.js";import"./index-DUHZmgZA.js";import"./index-yX8pBrvj.js";import"./chunk-3XANSPY5-CEuNXLts.js";import"./index-Bvkiv1cC.js";import"./index-DdaX-njP.js";import"./index-DEiKcbOK.js";import"./chunk-LUYFNC5G-DV8XJogC.js";import"./index-DOEX-ehf.js";import"./index-2ZXUntH3.js";import"./index-DjrpCY14.js";import"./index-DLVTVQVU.js";import"./Icon-CnEaoVOW.js";/* empty css              */import"./chunk-ZHMYA64R-V_96TD_T.js";import"./Badge-mctRz8Mm.js";import"./chunk-QINAG4RG-EokTgSxx.js";import"./chunk-SPIKMR6I-lNfAZPIg.js";import"./chunk-NEK3OOAM-DbYvnad0.js";import"./chunk-JARCRF6W-DgXWZoO5.js";import"./chunk-7OLJDQMT-lazN81OQ.js";import"./Card-DSiGcjvP.js";import"./chunk-MFVQSVQB-CA8z8kWU.js";import"./chunk-KRPLQIP4-ICIqHMLQ.js";import"./Button-DA9Xs8I7.js";import"./chunk-UVUR7MCU-TM6grcjD.js";import"./chunk-FAWTVNS3-tKAZUTn2.js";import"./chunk-3ASUQ6PA-DZH9lOZq.js";import"./chunk-R3DH46PF-iWUMGBws.js";function h(s){const n={code:"code",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...k(),...s.components};return e.jsxs(e.Fragment,{children:[e.jsx(j,{of:f}),`
`,e.jsx(n.h1,{id:"searchasync",children:"SearchAsync"}),`
`,e.jsx(n.p,{children:"SearchAsync er et søkefelt som laster inn søkeresultater fra en liste med objekter. Resultatene blir vist i en dropdown der brukeren kan velge hvilket resultat som skal bli valgt."}),`
`,e.jsx(n.pre,{children:e.jsx(n.code,{className:"language-jsx",children:`import { SearchAsync } from "@kvib/react";
`})}),`
`,e.jsxs(a,{children:[e.jsx(n.p,{children:e.jsx(n.strong,{children:"Egnet til:"})}),e.jsxs(n.ul,{children:[`
`,e.jsx(n.li,{children:"Raskt finne relevant innhold"}),`
`,e.jsx(n.li,{children:"Laste inn innhold asynkront"}),`
`,e.jsx(n.li,{children:"Select med søk"}),`
`]}),e.jsx(n.p,{children:e.jsx(n.strong,{children:"Uegnet til:"})}),e.jsxs(n.ul,{children:[`
`,e.jsx(n.li,{children:"Innhold som lett kan navigeres til uten søk"}),`
`]}),e.jsx(A,{component:"SearchAsync"})]}),`
`,e.jsxs(a,{children:[e.jsx(l,{title:"Required props",description:e.jsxs(o,{children:[e.jsx(t,{as:"b",children:"loadOptions"}),e.jsxs(t,{children:["SearchAsync komponentens prop ",e.jsx(r,{children:"loadOptions"})," er en funksjon ment for asynkron lasting av alternativer basert på brukerinput i inputfeltet. Den tar to parametere:"]}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsxs(t,{children:[e.jsx(r,{children:"inputValue"}),": Teksten brukeren skriver inn."]})}),e.jsx(m,{children:e.jsxs(t,{children:[e.jsx(r,{children:"callback"}),": En funksjon som tar en liste av objekter (",e.jsx(r,{children:"options"}),") og brukes til å returnere søkeresultatene. Hvert objekt i ",e.jsx(r,{children:"options"})," må ha en ",e.jsx(r,{children:"label"})," (tekst vist i dropdown) og en ",e.jsx(r,{children:"value"})," (verdien returnert ved valg)."]})})]}),e.jsx(t,{as:"b",children:"onChange"}),e.jsxs(t,{children:[e.jsx(r,{children:"onChange"})," er en funksjon som håndterer endringer i valgt verdi. Den tar ett parameter:"]}),e.jsx(u,{children:e.jsx(m,{children:e.jsxs(t,{children:[e.jsx(r,{children:"newValue"}),": Den nye verdien som er valgt av brukeren. Denne verdien er av typen ",e.jsx(r,{children:"T"})," eller ",e.jsx(r,{children:"null"}),". ",e.jsx(r,{children:"T"})," representerer typen av objektene i dine ",e.jsx(r,{children:"options"}),", og ",e.jsx(r,{children:"null"})," brukes når det ikke er noen valgt verdi."]})})})]}),story:e.jsx(i,{of:g})}),e.jsx(l,{title:"Utseende",description:e.jsxs(o,{children:[e.jsxs(t,{children:["SearchAsync har fire varianter. ",e.jsx(r,{children:"outline"})," er standardvarianten og skal brukes i de fleste tilfeller.",e.jsx(r,{children:"filled"})," kan brukes som et alternativ til outline. For mindre viktige søkefelt kan",e.jsx(r,{children:"flushed"})," og",e.jsx(r,{children:"unstyled"})," brukes."]}),e.jsxs(t,{children:["Det er mulig å velge mellom tre forskjellige størrelser: ",e.jsx(r,{children:"sm"}),", ",e.jsx(r,{children:"md"})," og ",e.jsx(r,{children:"lg"}),".",e.jsx(r,{children:"md"})," er standard."]}),e.jsxs(t,{children:["For å endre borderColor når søkefeltet er i fokus kan du sette farge med color-token (f.eks. green.500) i"," ",e.jsx(r,{children:"focusBorderColor"}),"."]})]}),story:e.jsx(i,{of:b})}),e.jsx(l,{title:"Standardalternativer",description:e.jsxs(o,{children:[e.jsxs(t,{children:["SearchAsync har mulighet for å legge inn standardalternativer for resultater ved hjelp av proppen"," ",e.jsx(r,{children:"defaultOptions"}),". Det betyr at brukeren vil få muligheten til å velge resultat basert på en dropdown-liste i komponenten, i tillegg til å kunne søke. Du kan velge mellom å inkludere alle søkealternativer som standardalternativer (",e.jsx(r,{children:'defaultOptions="true"'}),"), eller bare legge til noen (",e.jsx(r,{children:'defaultOptions=["eple", "banan"]'}),"). Dersom det forekommer et høyt antall av søkealternativer anbefales det å ikke legge til alle."]}),e.jsxs(t,{children:["Legg til et ",e.jsx(r,{children:"Icon"})," i ",e.jsx(r,{children:"dropDownIndicator"})," for å poengtere at det er en dropdown, dersom det er ønskelig."]})]}),story:e.jsx(i,{of:v})}),e.jsx(l,{title:"Multi",description:e.jsxs(o,{children:[e.jsxs(t,{children:["Det er mulig å la brukeren velge flere resultater med ",e.jsx(r,{children:"isMulti"}),". Her er det også mulig å legge inn standardalternativer, slik at brukeren kan velge fra dropdown - som i eksempelet."]}),e.jsxs(t,{children:["Typen til",e.jsx(r,{children:"onChange"})," endrer seg ved ",e.jsx(r,{children:"isMulti=true"})," for å kunne håndtere flere resultater: ",e.jsx(r,{children:"(newValue: readonly T[] | null,"})," ",e.jsx(r,{children:"actionMeta: ActionMeta<T>) => void"}),".",e.jsx(r,{children:"newValue"})," er en liste med valgte resultater, og ",e.jsx(r,{children:"actionMeta"})," er en liste med objekter som inneholder informasjon om handlingen som ble utført. Disse to blir logget til konsollen i eksempelet, inspiser siden for å se."]})]}),story:e.jsx(i,{of:y})}),e.jsx(l,{title:"Egendefinert feedback ved ingen resultater",description:e.jsxs(o,{children:[e.jsxs(t,{children:["Det er mulig å endre på tilbakemeldingen som dukker opp i dropdown ved å bruke propen"," ",e.jsx(r,{children:"noOptionsMessage"}),". Denne tar inn en funksjon som returnerer en React-komponent. Funksjonen tar inn et objekt med ",e.jsx(r,{children:"inputValue"})," som inneholder det brukeren har skrevet i søkefeltet."]}),e.jsxs(t,{children:["Kodeblokken under viser hvordan man kan bruke",e.jsx(r,{children:"noOptionsMessage"})," og ",e.jsx(r,{children:"loadOptions"})," til å sørge for at brukeren skriver inn minst tre tegn før vi starter et søk."]})]}),story:e.jsx(i,{of:S})}),e.jsx(d,{code:`const mockLoadOptions = (inputValue: string, callback: (options: typeof fruits) => void) => {
  if (inputValue.length <= 2) {
    callback([]);
    return;
  }
  setTimeout(() => {
    const filteredFruits = fruits.filter((fruit) => fruit.label.toLowerCase().includes(inputValue.toLowerCase()));
    callback(filteredFruits);
  }, 500);
};
const noOptionsMessage = ({ inputValue }: { inputValue: string }) => {
  if (inputValue.length > 0) {
    if (inputValue.length <= 2) {
      return <Text>Søket må inneholde minst 3 tegn</Text>;
    } else {
      return <Text>Fant ingen resultater</Text>;
    }
  }
  return null;
};`,dark:!0})]}),`
`,e.jsx(c,{light:!0,children:"Bruk av ref"}),`
`,e.jsxs(a,{children:[e.jsxs(n.p,{children:["Ref kan brukes dersom det er nødvendig å interagere med selve select elementet. Merk at dette ikke er et standard"," ",`
`,e.jsx(r,{children:"HTMLSelectElement"}),`, men en instans av en klasse fra en av pakkene KVIB bruker. Ettersom ref er av en litt
spesiell type så viser vi et eksempel på bruk her.`]}),e.jsx(n.p,{children:"I dette eksempelet så setter vi opp en enkel SearchAsync, hvor vi ønsker at komponenten skal legge fokus på SearchAsync input-feltet når komponenten er åpen:"}),e.jsx(d,{code:`
import { SearchAsync, SearchAsyncElement } from "@kvib/react";
import { useEffect, useRef, useState } from "react";

const Component = (isOpen: boolean) => {
  const searchRef = useRef<SearchAsyncElement<number>>(null);
  const [currentValue, setCurrentValue] = useState<number | null>(-1);

  useEffect(() => {
    if (isOpen && searchRef.current != null) {
      searchRef.current.focus();
    }
  }, [isOpen]);

  return (
    <SearchAsync
      onChange={(number: number | null) => {
        setCurrentValue(number);
      }}
      value={currentValue}
      loadOptions={() => {
        return [1, 2, 3];
      }}
      ref={searchRef}
    />
  );
};`,dark:!0}),e.jsxs(n.p,{children:["Legg merke til her at ",e.jsx(n.code,{children:"useRef"}),` sin type bruker genericen T som også blir brukt et par andre steder i props.
Så når du skal sette typen for `,e.jsx(n.code,{children:"useRef"})," må du være bevisst på hvilken type du bruker som options for resten av komponenten."]})]}),`
`,e.jsx(c,{light:!0,children:"Retningslinjer"}),`
`,e.jsxs(a,{children:[e.jsx(n.h3,{id:"bredde",children:"Bredde"}),e.jsx(n.p,{children:"Søkefeltets bredde bør tilsvare lengden på søkeordene som brukes. Feltets størrelse er et viktig signal til brukeren om hva de kan skrive inn. Et søkefelt som brukes til å søke på personnumre bør ha en bredde som tilsvarer et personnummer, mens hovedsøket for et nettsted bør ha et bredere felt som lar brukerne se flere ord samtidig."}),e.jsx(n.p,{children:"Ta gjerne en kikk på søkeloggene dine for å se hvordan brukerne dine ordlegger seg når de søker på sidene dine. Unngå at teksten i søkefeltet må scrolles for å romme typiske søk."}),e.jsx(n.h3,{id:"innsending-av-query",children:"Innsending av query"}),e.jsxs(n.p,{children:["Det er anbefalt å bruke ",e.jsx(n.code,{children:"<form>"})," rundt SearchAsync dersom du skal bruke det valgte resultatet. Dette gjør det mulig å bruke ",e.jsx(n.code,{children:'<button type="submit">'}),` for å sende inn søket.
`,e.jsx(n.code,{children:"FormControl"})," kan hjelpe til med å gi SearchAsync kontekst."]}),e.jsx(d,{code:`
  <form onSubmit={handleSubmit}>
    <FormControl>
      <FormLabel htmlFor="async-search">Søk etter frukt</FormLabel>
        <SearchAsync
          loadOptions={mockLoadOptions}
          onChange={handleChange}
          placeholder="Søk etter frukt..."
          isMulti={false}
        />
      <Button mt={4} colorScheme="blue" type="submit">
        Send
      </Button>
    </FormControl>
  </form>`,dark:!0})]}),`
`,e.jsx(c,{light:!0,children:"Props"}),`
`,e.jsx(i,{of:p}),`
`,e.jsx(x,{of:p})]})}function Xe(s={}){const{wrapper:n}={...k(),...s.components};return n?e.jsx(n,{...s,children:e.jsx(h,{...s})}):h(s)}export{Xe as default};

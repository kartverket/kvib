import{m as x,a as i,c as I}from"./factory-q8nNcEUp.js";import{c as S}from"./create-slot-recipe-context-CAi7jAA5.js";import{j as d}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./index-BQvhbVge.js";import{c as k,a as A}from"./index-0TWAmYWa.js";import{c as B,o as p}from"./index-Ct-f3TY_.js";import{u as O}from"./use-environment-context-DZYGLJZ6.js";const M=typeof window<"u"?r.useLayoutEffect:r.useEffect,[W,m]=B({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),q=t=>t.children(m()),b=r.forwardRef((t,s)=>{const e=m(),o=x(e.getErrorTextProps(),t);return e.invalid?d.jsx(i.span,{...o,ref:s}):null});b.displayName="FieldsetErrorText";const y=r.forwardRef((t,s)=>{const e=m(),o=x(e.getHelperTextProps(),t);return d.jsx(i.span,{...o,ref:s})});y.displayName="FieldsetHelperText";const w=r.forwardRef((t,s)=>{const e=m(),o=x(e.getLegendProps(),t);return d.jsx(i.legend,{...o,ref:s})});w.displayName="FieldsetLegend";const z=k("fieldset").parts("root","errorText","helperText","legend"),f=z.build(),D=(t={})=>{const{disabled:s=!1,invalid:e=!1}=t,o=O(),[n,g]=r.useState({hasErrorText:!1,hasHelperText:!1}),H=r.useId(),T=t.id??H,P=r.useRef(null),F=`fieldset::${T}::legend`,a=`fieldset::${T}::error-text`,l=`fieldset::${T}::helper-text`;M(()=>{const h=P.current;if(!h)return;const E=()=>{const v=o.getRootNode(),N=!!v.getElementById(a),$=!!v.getElementById(l);g({hasErrorText:N,hasHelperText:$})};E();const j=o.getWindow(),R=new j.MutationObserver(E);return R.observe(h,{childList:!0,subtree:!0}),()=>R.disconnect()},[o,a,l]);const c=[];n.hasErrorText&&e&&c.push(a),n.hasHelperText&&c.push(l);const L=c.length>0?c.join(" "):void 0;return{refs:{rootRef:P},disabled:s,invalid:e,getRootProps:()=>({...f.root.attrs,ref:P,disabled:s,"data-disabled":p(s),"data-invalid":p(e),"aria-labelledby":F,"aria-describedby":L}),getLegendProps:()=>({id:F,...f.legend.attrs,"data-disabled":p(s),"data-invalid":p(e)}),getHelperTextProps:()=>({id:l,...f.helperText.attrs}),getErrorTextProps:()=>({id:a,...f.errorText.attrs,"aria-live":"polite"})}},G=A(),C=r.forwardRef((t,s)=>{const[e,o]=G(t,["id","disabled","invalid"]),n=D(e),g=x(n.getRootProps(),o);return d.jsx(W,{value:n,children:d.jsx(i.fieldset,{...g,ref:I(s,n.refs.rootRef)})})});C.displayName="FieldsetRoot";const{withProvider:J,withContext:u}=S({key:"fieldset"}),oe=J(C,"root"),re=u(b,"errorText"),ne=u(y,"helperText"),de=u(w,"legend"),ie=u(i.div,"content"),ae=q;export{oe as F,de as a,ie as b,M as c,ae as d,re as e,z as f,ne as g,m as u};

import{j as k}from"./extends-CwFRzn3r.js";import{r as a}from"./index-BwDkhjyp.js";import{_ as ae,a as x,F as U,c as pe,u as ye,b as be}from"./Combination-DhNDPOzd.js";import{g as Se}from"./focusable-crJ8ziAt.js";import{c as we,m as Ce}from"./proxy-CQsau1XN.js";import{f as K}from"./forward-ref-BWI-Phbn.js";import{a as $}from"./factory-CdGA0D9p.js";import{c as q}from"./cx-BDMMs1jM.js";import{d as Me}from"./define-styles-BSAHv3yx.js";import{m as J}from"./use-merge-refs-Bdxaq0s4.js";import{c as _}from"./call-all-DDzecCnU.js";import{P as ke}from"./portal-BqZkrvYK.js";import{a as Pe}from"./use-style-config--HlEOpE-.js";import{c as oe}from"./context-CBKykClo.js";import{A as Ee}from"./index-DVNvNJVv.js";import{f as xe}from"./fade-DIkg9ySx.js";var ce=function(e){var t=e.sideCar,r=ae(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return a.createElement(n,x({},r))};ce.isSideCarExport=!0;function Re(e,t){return e.useMedium(t),ce}const Fe=U.default??U,se=e=>{const{initialFocusRef:t,finalFocusRef:r,contentRef:n,restoreFocus:o,children:l,isDisabled:f,autoFocus:c,persistentFocus:m,lockFocusAcrossFrames:h}=e,g=a.useCallback(()=>{t!=null&&t.current?t.current.focus():n!=null&&n.current&&Se(n.current).length===0&&requestAnimationFrame(()=>{var p;(p=n.current)==null||p.focus()})},[t,n]),i=a.useCallback(()=>{var v;(v=r==null?void 0:r.current)==null||v.focus()},[r]),u=o&&!r;return k.jsx(Fe,{crossFrame:h,persistentFocus:m,autoFocus:c,disabled:f,onActivation:g,onDeactivation:i,returnFocus:u,children:l})};se.displayName="FocusLock";var Ae=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},F=new WeakMap,D=new WeakMap,T={},Y=0,le=function(e){return e&&(e.host||le(e.parentNode))},Ne=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=le(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Be=function(e,t,r,n){var o=Ne(t,Array.isArray(e)?e:[e]);T[r]||(T[r]=new WeakMap);var l=T[r],f=[],c=new Set,m=new Set(o),h=function(i){!i||c.has(i)||(c.add(i),h(i.parentNode))};o.forEach(h);var g=function(i){!i||m.has(i)||Array.prototype.forEach.call(i.children,function(u){if(c.has(u))g(u);else try{var v=u.getAttribute(n),p=v!==null&&v!=="false",s=(F.get(u)||0)+1,d=(l.get(u)||0)+1;F.set(u,s),l.set(u,d),f.push(u),s===1&&p&&D.set(u,!0),d===1&&u.setAttribute(r,"true"),p||u.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",u,y)}})};return g(t),c.clear(),Y++,function(){f.forEach(function(i){var u=F.get(i)-1,v=l.get(i)-1;F.set(i,u),l.set(i,v),u||(D.has(i)||i.removeAttribute(n),D.delete(i)),v||i.removeAttribute(r)}),Y--,Y||(F=new WeakMap,F=new WeakMap,D=new WeakMap,T={})}},_e=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=Ae(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),Be(n,o,r,"aria-hidden")):function(){return null}},De=Object.defineProperty,Te=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t,r)=>(Te(e,t+"",r),r);class Le{constructor(){Ie(this,"modals"),this.modals=new Set}add(t){return this.modals.add(t),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){if(!t)return!1;const r=Array.from(this.modals)[this.modals.size-1];return t===r}}const V=new Le;function ie(e,t){const[r,n]=a.useState(0);return a.useEffect(()=>{const o=e.current;if(o){if(t){const l=V.add(o);n(l)}return()=>{V.remove(o),n(0)}}},[t,e]),r}function We(e){const{isOpen:t,onClose:r,id:n,closeOnOverlayClick:o=!0,closeOnEsc:l=!0,useInert:f=!0,onOverlayClick:c,onEsc:m}=e,h=a.useRef(null),g=a.useRef(null),[i,u,v]=je(n,"chakra-modal","chakra-modal--header","chakra-modal--body");Oe(h,t&&f);const p=ie(h,t),s=a.useRef(null),d=a.useCallback(b=>{s.current=b.target},[]),y=a.useCallback(b=>{b.key==="Escape"&&(b.stopPropagation(),l&&(r==null||r()),m==null||m())},[l,r,m]),[w,C]=a.useState(!1),[M,S]=a.useState(!1),P=a.useCallback((b={},X=null)=>({role:"dialog",...b,ref:J(X,h),id:i,tabIndex:-1,"aria-modal":!0,"aria-labelledby":w?u:void 0,"aria-describedby":M?v:void 0,onClick:_(b.onClick,ge=>ge.stopPropagation())}),[v,M,i,u,w]),E=a.useCallback(b=>{b.stopPropagation(),s.current===b.target&&V.isTopModal(h.current)&&(o&&(r==null||r()),c==null||c())},[r,o,c]),R=a.useCallback((b={},X=null)=>({...b,ref:J(X,g),onClick:_(b.onClick,E),onKeyDown:_(b.onKeyDown,y),onMouseDown:_(b.onMouseDown,d)}),[y,d,E]);return{isOpen:t,onClose:r,headerId:u,bodyId:v,setBodyMounted:S,setHeaderMounted:C,dialogRef:h,overlayRef:g,getDialogProps:P,getDialogContainerProps:R,index:p}}function Oe(e,t){const r=e.current;a.useEffect(()=>{if(!(!e.current||!t))return _e(e.current)},[t,e,r])}function je(e,...t){const r=a.useId(),n=e||r;return a.useMemo(()=>t.map(o=>`${o}-${n}`),[n,t])}const[He,Q]=oe({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[Xe,j]=oe({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Ye=e=>{const t={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...e,lockFocusAcrossFrames:e.lockFocusAcrossFrames||!0},{portalProps:r,children:n,autoFocus:o,trapFocus:l,initialFocusRef:f,finalFocusRef:c,returnFocusOnClose:m,blockScrollOnMount:h,allowPinchZoom:g,preserveScrollBarGap:i,motionPreset:u,lockFocusAcrossFrames:v,animatePresenceProps:p,onCloseComplete:s}=t,d=Pe("Modal",t),w={...We(t),autoFocus:o,trapFocus:l,initialFocusRef:f,finalFocusRef:c,returnFocusOnClose:m,blockScrollOnMount:h,allowPinchZoom:g,preserveScrollBarGap:i,motionPreset:u,lockFocusAcrossFrames:v};return k.jsx(Xe,{value:w,children:k.jsx(He,{value:d,children:k.jsx(Ee,{...p,onExitComplete:s,children:w.isOpen&&k.jsx(ke,{...r,children:n})})})})};Ye.displayName="Modal";var W="right-scroll-bar-position",O="width-before-scroll-bar",Ze="with-scroll-bars-hidden",ze="--removed-body-scroll-bar-size",ue=pe(),Z=function(){},H=a.forwardRef(function(e,t){var r=a.useRef(null),n=a.useState({onScrollCapture:Z,onWheelCapture:Z,onTouchMoveCapture:Z}),o=n[0],l=n[1],f=e.forwardProps,c=e.children,m=e.className,h=e.removeScrollBar,g=e.enabled,i=e.shards,u=e.sideCar,v=e.noIsolation,p=e.inert,s=e.allowPinchZoom,d=e.as,y=d===void 0?"div":d,w=e.gapMode,C=ae(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=u,S=ye([r,t]),P=x(x({},C),o);return a.createElement(a.Fragment,null,g&&a.createElement(M,{sideCar:ue,removeScrollBar:h,shards:i,noIsolation:v,inert:p,setCallbacks:l,allowPinchZoom:!!s,lockRef:r,gapMode:w}),f?a.cloneElement(a.Children.only(c),x(x({},P),{ref:S})):a.createElement(y,x({},P,{className:m,ref:S}),c))});H.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};H.classNames={fullWidth:O,zeroRight:W};var Ve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ge(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ve();return t&&e.setAttribute("nonce",t),e}function Ke(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Ge())&&(Ke(t,r),$e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Qe=function(){var e=qe();return function(t,r){a.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},de=function(){var e=Qe(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},Ue={left:0,top:0,right:0,gap:0},z=function(e){return parseInt(e||"",10)||0},Je=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[z(r),z(n),z(o)]},et=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ue;var t=Je(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},tt=de(),B="data-scroll-locked",rt=function(e,t,r,n){var o=e.left,l=e.top,f=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ze,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(B,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(f,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(W,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(O,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(W," .").concat(W,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(O," .").concat(O,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(B,`] {
    `).concat(ze,": ").concat(c,`px;
  }
`)},ee=function(){var e=parseInt(document.body.getAttribute(B)||"0",10);return isFinite(e)?e:0},nt=function(){a.useEffect(function(){return document.body.setAttribute(B,(ee()+1).toString()),function(){var e=ee()-1;e<=0?document.body.removeAttribute(B):document.body.setAttribute(B,e.toString())}},[])},at=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;nt();var l=a.useMemo(function(){return et(o)},[o]);return a.createElement(tt,{styles:rt(l,!t,o,r?"":"!important")})},G=!1;if(typeof window<"u")try{var I=Object.defineProperty({},"passive",{get:function(){return G=!0,!0}});window.addEventListener("test",I,I),window.removeEventListener("test",I,I)}catch{G=!1}var A=G?{passive:!1}:!1,ot=function(e){return e.tagName==="TEXTAREA"},fe=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ot(e)&&r[t]==="visible")},ct=function(e){return fe(e,"overflowY")},st=function(e){return fe(e,"overflowX")},te=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=ve(e,n);if(o){var l=me(e,n),f=l[1],c=l[2];if(f>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},lt=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},it=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},ve=function(e,t){return e==="v"?ct(t):st(t)},me=function(e,t){return e==="v"?lt(t):it(t)},ut=function(e,t){return e==="h"&&t==="rtl"?-1:1},dt=function(e,t,r,n,o){var l=ut(e,window.getComputedStyle(t).direction),f=l*n,c=r.target,m=t.contains(c),h=!1,g=f>0,i=0,u=0;do{var v=me(e,c),p=v[0],s=v[1],d=v[2],y=s-d-l*p;(p||y)&&ve(e,c)&&(i+=y,u+=p),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!m&&c!==document.body||m&&(t.contains(c)||t===c));return(g&&(Math.abs(i)<1||!o)||!g&&(Math.abs(u)<1||!o))&&(h=!0),h},L=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},re=function(e){return[e.deltaX,e.deltaY]},ne=function(e){return e&&"current"in e?e.current:e},ft=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mt=0,N=[];function ht(e){var t=a.useRef([]),r=a.useRef([0,0]),n=a.useRef(),o=a.useState(mt++)[0],l=a.useState(de)[0],f=a.useRef(e);a.useEffect(function(){f.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var s=be([e.lockRef.current],(e.shards||[]).map(ne),!0).filter(Boolean);return s.forEach(function(d){return d.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),s.forEach(function(d){return d.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=a.useCallback(function(s,d){if("touches"in s&&s.touches.length===2||s.type==="wheel"&&s.ctrlKey)return!f.current.allowPinchZoom;var y=L(s),w=r.current,C="deltaX"in s?s.deltaX:w[0]-y[0],M="deltaY"in s?s.deltaY:w[1]-y[1],S,P=s.target,E=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in s&&E==="h"&&P.type==="range")return!1;var R=te(E,P);if(!R)return!0;if(R?S=E:(S=E==="v"?"h":"v",R=te(E,P)),!R)return!1;if(!n.current&&"changedTouches"in s&&(C||M)&&(n.current=S),!S)return!0;var b=n.current||S;return dt(b,d,s,b==="h"?C:M,!0)},[]),m=a.useCallback(function(s){var d=s;if(!(!N.length||N[N.length-1]!==l)){var y="deltaY"in d?re(d):L(d),w=t.current.filter(function(S){return S.name===d.type&&(S.target===d.target||d.target===S.shadowParent)&&ft(S.delta,y)})[0];if(w&&w.should){d.cancelable&&d.preventDefault();return}if(!w){var C=(f.current.shards||[]).map(ne).filter(Boolean).filter(function(S){return S.contains(d.target)}),M=C.length>0?c(d,C[0]):!f.current.noIsolation;M&&d.cancelable&&d.preventDefault()}}},[]),h=a.useCallback(function(s,d,y,w){var C={name:s,delta:d,target:y,should:w,shadowParent:gt(y)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(M){return M!==C})},1)},[]),g=a.useCallback(function(s){r.current=L(s),n.current=void 0},[]),i=a.useCallback(function(s){h(s.type,re(s),s.target,c(s,e.lockRef.current))},[]),u=a.useCallback(function(s){h(s.type,L(s),s.target,c(s,e.lockRef.current))},[]);a.useEffect(function(){return N.push(l),e.setCallbacks({onScrollCapture:i,onWheelCapture:i,onTouchMoveCapture:u}),document.addEventListener("wheel",m,A),document.addEventListener("touchmove",m,A),document.addEventListener("touchstart",g,A),function(){N=N.filter(function(s){return s!==l}),document.removeEventListener("wheel",m,A),document.removeEventListener("touchmove",m,A),document.removeEventListener("touchstart",g,A)}},[]);var v=e.removeScrollBar,p=e.inert;return a.createElement(a.Fragment,null,p?a.createElement(l,{styles:vt(o)}):null,v?a.createElement(at,{gapMode:e.gapMode}):null)}function gt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pt=Re(ue,ht);var he=a.forwardRef(function(e,t){return a.createElement(H,x({},e,{ref:t,sideCar:pt}))});he.classNames=H.classNames;function Wt(e){const{autoFocus:t,trapFocus:r,dialogRef:n,initialFocusRef:o,blockScrollOnMount:l,allowPinchZoom:f,finalFocusRef:c,returnFocusOnClose:m,preserveScrollBarGap:h,lockFocusAcrossFrames:g,isOpen:i}=j(),[u,v]=we();a.useEffect(()=>{!u&&v&&setTimeout(v)},[u,v]);const p=ie(n,i);return k.jsx(se,{autoFocus:t,isDisabled:!r,initialFocusRef:o,finalFocusRef:c,restoreFocus:m,contentRef:n,lockFocusAcrossFrames:g,children:k.jsx(he,{removeScrollBar:!h,allowPinchZoom:f,enabled:p===1&&l,forwardProps:!0,children:e.children})})}const yt=K((e,t)=>{const{className:r,...n}=e,{bodyId:o,setBodyMounted:l}=j();a.useEffect(()=>(l(!0),()=>l(!1)),[l]);const f=q("chakra-modal__body",r),c=Q();return k.jsx($.div,{ref:t,className:f,id:o,...n,__css:c.body})});yt.displayName="ModalBody";const bt=K((e,t)=>{const{className:r,...n}=e,{headerId:o,setHeaderMounted:l}=j();a.useEffect(()=>(l(!0),()=>l(!1)),[l]);const f=q("chakra-modal__header",r),c=Q(),m=Me({flex:0,...c.header});return k.jsx($.header,{ref:t,className:f,id:o,...n,__css:m})});bt.displayName="ModalHeader";const St=$(Ce.div),wt=K((e,t)=>{const{className:r,transition:n,motionProps:o,...l}=e,f=q("chakra-modal__overlay",r),m={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...Q().overlay},{motionPreset:h}=j(),i=o||(h==="none"?{}:xe);return k.jsx(St,{...i,__css:m,ref:t,className:f,...l})});wt.displayName="ModalOverlay";export{wt as M,bt as a,yt as b,Ye as c,Q as d,Wt as e,j as u};

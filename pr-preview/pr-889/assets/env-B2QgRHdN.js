import{j as s}from"./extends-CwFRzn3r.js";import{r as t}from"./index-BwDkhjyp.js";import{u as d}from"./use-safe-layout-effect-BnICyLBj.js";const i=t.createContext({getDocument(){return document},getWindow(){return window}});i.displayName="EnvironmentContext";function w({defer:r}={}){const[,o]=t.useReducer(e=>e+1,0);return d(()=>{r&&o()},[r]),t.useContext(i)}function f(r){const{children:o,environment:e,disabled:c}=r,u=t.useRef(null),m=t.useMemo(()=>e||{getDocument:()=>{var n;return((n=u.current)==null?void 0:n.ownerDocument)??document},getWindow:()=>{var n;return((n=u.current)==null?void 0:n.ownerDocument.defaultView)??window}},[e]),a=!c||!e;return s.jsxs(i.Provider,{value:m,children:[o,a&&s.jsx("span",{id:"__chakra_env",hidden:!0,ref:u})]})}f.displayName="EnvironmentProvider";export{f as E,w as u};

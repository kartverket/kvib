import{j as h}from"./jsx-runtime-CLpGMVip.js";import{r as g}from"./index-Cjd7pOeM.js";import{c as m}from"./create-recipe-context-1tZJ095y.js";function f(t){const{each:e,fallback:r,children:n}=t;return(e==null?void 0:e.length)===0?r||null:e==null?void 0:e.map(n)}var u=(t,e)=>{const r=[],n=(a,s,i)=>{s-a>0&&r.push({start:a,end:s,match:i})};if(t.length===0)n(0,e,!1);else{let a=0;for(const s of t)n(a,s.start,!1),n(s.start,s.end,!0),a=s.end;n(a,e,!1)}return r};function x(t){const{text:e,query:r,ignoreCase:n}=t,a=n?e.toLowerCase():e,s=n&&typeof r=="string"?r.toLowerCase():r,i=typeof a=="string"?a.indexOf(s):-1;if(i===-1)return[{text:e,match:!1}];const o=i+s.length;return u([{start:i,end:o}],e.length).map(c=>({text:e.slice(c.start,c.end),match:!!c.match}))}var d=t=>t.replace(/[|\\{}()[\]^$+*?.-]/g,e=>`\\${e}`),y=(t,e)=>{const r=t.filter(Boolean).map(n=>d(n));return new RegExp(`(${r.join("|")})`,e)},A=(t,e=!0)=>`${t?"i":""}${e?"g":""}`;function p(t){const{text:e,query:r,ignoreCase:n,matchAll:a}=t;if(r.length===0)return[{text:e,match:!1}];const s=A(n,a),i=y(Array.isArray(r)?r:[r],s),o=[...e.matchAll(i)].map(l=>({start:l.index||0,end:(l.index||0)+l[0].length}));return u(o,t.text.length).map(l=>({text:t.text.slice(l.start,l.end),match:!!l.match}))}var w=t=>{if(t.matchAll==null&&(t.matchAll=Array.isArray(t.query)),!t.matchAll&&Array.isArray(t.query))throw new Error("matchAll must be true when using multiple queries");return t.matchAll?p(t):x(t)};const q=t=>g.useMemo(()=>w(t),[t]),{withContext:C,PropsProvider:F}=m({key:"mark"}),j=C("mark");function $(t){const{children:e,query:r,ignoreCase:n,matchAll:a,styles:s}=t;if(typeof e!="string")throw new Error("The children prop of Highlight must be a string");const i=q({query:r,text:e,matchAll:a,ignoreCase:n});return h.jsx(f,{each:i,children:(o,l)=>o.match?h.jsx(j,{css:s,children:o.text},l):h.jsx(g.Fragment,{children:o.text},l)})}export{f as F,$ as H,j as M};

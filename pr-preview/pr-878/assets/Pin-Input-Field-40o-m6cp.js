import{j as b}from"./extends-CwFRzn3r.js";import{f as $}from"./forward-ref-BWI-Phbn.js";import{r}from"./index-BwDkhjyp.js";import{c as J}from"./use-descendant-T3UBTUZf.js";import{c as Q}from"./context-CBKykClo.js";import{u as Y}from"./use-controllable-state-Dnial3e2.js";import{a as ee}from"./attr-sHTFgF0E.js";import{c as h}from"./call-all-DDzecCnU.js";import{m as te}from"./use-merge-refs-Bdxaq0s4.js";import{u as ne,o as le}from"./use-style-config--HlEOpE-.js";import{a as ae}from"./factory-CdGA0D9p.js";import{g as ue}from"./children-2ZXUntH3.js";import{c as ie}from"./cx-BDMMs1jM.js";const[de,Ce,re,se]=J(),[ce,oe]=Q({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to place all pin input fields within `<PinInput />`"}),M=t=>t==null?void 0:t.split("");function L(t,l){return(l==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(t)}function fe(t={}){const{autoFocus:l,value:i,defaultValue:s,onChange:c,onComplete:d,placeholder:V="â—‹",manageFocus:m=!0,otp:P=!1,id:G,isDisabled:F,isInvalid:C,type:_="number",mask:k}=t,U=r.useId(),g=G??`pin-input-${U}`,a=re(),[A,I]=r.useState(!0),[E,D]=r.useState(-1),[y,o]=Y({defaultValue:M(s)||[],value:M(i),onChange:n=>c==null?void 0:c(n.join(""))});r.useEffect(()=>{if(l){const n=a.first();n&&requestAnimationFrame(()=>{n.node.focus()})}},[a]);const N=r.useCallback(n=>{if(!A||!m)return;const e=a.next(n,!1);e&&requestAnimationFrame(()=>{e.node.focus()})},[a,A,m]),S=r.useCallback((n,e,u=!0)=>{const f=[...y];f[e]=n,o(f),n!==""&&f.length===a.count()&&f.every(j=>j!=null&&j!=="")?d==null||d(f.join("")):u&&N(e)},[y,o,N,d,a]),X=r.useCallback(()=>{var u;const n=Array(a.count()).fill("");o(n);const e=a.first();(u=e==null?void 0:e.node)==null||u.focus()},[a,o]),R=r.useCallback((n,e)=>{let u=e;return(n==null?void 0:n.length)>0&&(n[0]===e.charAt(0)?u=e.charAt(1):n[0]===e.charAt(1)&&(u=e.charAt(0))),u},[]);return{getInputProps:r.useCallback(n=>{const{index:e,...u}=n,f=O=>{const p=O.currentTarget.value,q=y[e],v=R(q,p);if(v===""){S("",e);return}if(p.length>2){if(L(p,_)){const x=p.split("").filter((_e,Z)=>Z<a.count());o(x),x.length===a.count()&&(d==null||d(x.join("")))}}else L(v,_)&&S(v,e),I(!0)},w=O=>{var p;if(O.key==="Backspace"&&m)if(O.currentTarget.value===""){const q=a.prev(e,!1);q&&(S("",e-1,!1),(p=q.node)==null||p.focus(),I(!0))}else I(!1)},j=()=>{D(e)},z=()=>{D(-1)},K=E===e;return{"aria-label":"Please enter your pin code",inputMode:_==="number"?"numeric":"text",type:k?"password":_==="number"?"tel":"text",...u,id:`${g}-${e}`,disabled:F,"aria-invalid":ee(C),onChange:h(u.onChange,f),onKeyDown:h(u.onKeyDown,w),onFocus:h(u.onFocus,j),onBlur:h(u.onBlur,z),value:y[e]||"",autoComplete:P?"one-time-code":"off",placeholder:K?"":V}},[a,E,R,g,F,k,C,m,d,P,V,S,o,_,y]),id:g,descendants:a,values:y,setValue:S,setValues:o,clear:X}}function pe(t={},l=null){const{getInputProps:i}=oe(),{index:s,register:c}=se();return i({...t,ref:te(c,l),index:t.index??s})}function W(t){const l=ne("PinInput",t),{children:i,...s}=le(t),{descendants:c,...d}=fe(s),V=ue(i).map(m=>r.cloneElement(m,{__css:l}));return b.jsx(de,{value:c,children:b.jsx(ce,{value:d,children:V})})}W.displayName="PinInput";const B=$(function(l,i){const s=pe(l,i);return b.jsx(ae.input,{...s,className:ie("chakra-pin-input",l.className)})});B.displayName="PinInputField";const H=({size:t,children:l,...i})=>b.jsx(W,{...i,size:t,children:l});try{H.displayName="PinInput",H.__docgenInfo={description:"",displayName:"PinInput",props:{}}}catch{}const T=$(({...t},l)=>b.jsx(B,{...t,ref:l}));try{T.displayName="PinInputField",T.__docgenInfo={description:"",displayName:"PinInputField",props:{htmlTranslate:{defaultValue:null,description:"",name:"htmlTranslate",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"yes"'},{value:'"no"'}]}},_hover:{defaultValue:null,description:"",name:"_hover",required:!1,type:{name:"SystemStyleObject | undefined"}},_active:{defaultValue:null,description:"",name:"_active",required:!1,type:{name:"SystemStyleObject | undefined"}},_focus:{defaultValue:null,description:"",name:"_focus",required:!1,type:{name:"SystemStyleObject | undefined"}},_highlighted:{defaultValue:null,description:"",name:"_highlighted",required:!1,type:{name:"SystemStyleObject | undefined"}},_focusWithin:{defaultValue:null,description:"",name:"_focusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_focusVisible:{defaultValue:null,description:"",name:"_focusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_disabled:{defaultValue:null,description:"",name:"_disabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_readOnly:{defaultValue:null,description:"",name:"_readOnly",required:!1,type:{name:"SystemStyleObject | undefined"}},_before:{defaultValue:null,description:"",name:"_before",required:!1,type:{name:"SystemStyleObject | undefined"}},_after:{defaultValue:null,description:"",name:"_after",required:!1,type:{name:"SystemStyleObject | undefined"}},_empty:{defaultValue:null,description:"",name:"_empty",required:!1,type:{name:"SystemStyleObject | undefined"}},_expanded:{defaultValue:null,description:"",name:"_expanded",required:!1,type:{name:"SystemStyleObject | undefined"}},_checked:{defaultValue:null,description:"",name:"_checked",required:!1,type:{name:"SystemStyleObject | undefined"}},_grabbed:{defaultValue:null,description:"",name:"_grabbed",required:!1,type:{name:"SystemStyleObject | undefined"}},_pressed:{defaultValue:null,description:"",name:"_pressed",required:!1,type:{name:"SystemStyleObject | undefined"}},_invalid:{defaultValue:null,description:"",name:"_invalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_valid:{defaultValue:null,description:"",name:"_valid",required:!1,type:{name:"SystemStyleObject | undefined"}},_loading:{defaultValue:null,description:"",name:"_loading",required:!1,type:{name:"SystemStyleObject | undefined"}},_selected:{defaultValue:null,description:"",name:"_selected",required:!1,type:{name:"SystemStyleObject | undefined"}},_hidden:{defaultValue:null,description:"",name:"_hidden",required:!1,type:{name:"SystemStyleObject | undefined"}},_autofill:{defaultValue:null,description:"",name:"_autofill",required:!1,type:{name:"SystemStyleObject | undefined"}},_even:{defaultValue:null,description:"",name:"_even",required:!1,type:{name:"SystemStyleObject | undefined"}},_odd:{defaultValue:null,description:"",name:"_odd",required:!1,type:{name:"SystemStyleObject | undefined"}},_first:{defaultValue:null,description:"",name:"_first",required:!1,type:{name:"SystemStyleObject | undefined"}},_firstLetter:{defaultValue:null,description:"",name:"_firstLetter",required:!1,type:{name:"SystemStyleObject | undefined"}},_last:{defaultValue:null,description:"",name:"_last",required:!1,type:{name:"SystemStyleObject | undefined"}},_notFirst:{defaultValue:null,description:"",name:"_notFirst",required:!1,type:{name:"SystemStyleObject | undefined"}},_notLast:{defaultValue:null,description:"",name:"_notLast",required:!1,type:{name:"SystemStyleObject | undefined"}},_visited:{defaultValue:null,description:"",name:"_visited",required:!1,type:{name:"SystemStyleObject | undefined"}},_activeLink:{defaultValue:null,description:"",name:"_activeLink",required:!1,type:{name:"SystemStyleObject | undefined"}},_activeStep:{defaultValue:null,description:"",name:"_activeStep",required:!1,type:{name:"SystemStyleObject | undefined"}},_indeterminate:{defaultValue:null,description:"",name:"_indeterminate",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupOpen:{defaultValue:null,description:"",name:"_groupOpen",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupClosed:{defaultValue:null,description:"",name:"_groupClosed",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupHover:{defaultValue:null,description:"",name:"_groupHover",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerHover:{defaultValue:null,description:"",name:"_peerHover",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocus:{defaultValue:null,description:"",name:"_groupFocus",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocus:{defaultValue:null,description:"",name:"_peerFocus",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocusVisible:{defaultValue:null,description:"",name:"_groupFocusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocusVisible:{defaultValue:null,description:"",name:"_peerFocusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupActive:{defaultValue:null,description:"",name:"_groupActive",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerActive:{defaultValue:null,description:"",name:"_peerActive",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupDisabled:{defaultValue:null,description:"",name:"_groupDisabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerDisabled:{defaultValue:null,description:"",name:"_peerDisabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupInvalid:{defaultValue:null,description:"",name:"_groupInvalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerInvalid:{defaultValue:null,description:"",name:"_peerInvalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupChecked:{defaultValue:null,description:"",name:"_groupChecked",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerChecked:{defaultValue:null,description:"",name:"_peerChecked",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocusWithin:{defaultValue:null,description:"",name:"_groupFocusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocusWithin:{defaultValue:null,description:"",name:"_peerFocusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerPlaceholderShown:{defaultValue:null,description:"",name:"_peerPlaceholderShown",required:!1,type:{name:"SystemStyleObject | undefined"}},_placeholder:{defaultValue:null,description:"",name:"_placeholder",required:!1,type:{name:"SystemStyleObject | undefined"}},_placeholderShown:{defaultValue:null,description:"",name:"_placeholderShown",required:!1,type:{name:"SystemStyleObject | undefined"}},_fullScreen:{defaultValue:null,description:"",name:"_fullScreen",required:!1,type:{name:"SystemStyleObject | undefined"}},_selection:{defaultValue:null,description:"",name:"_selection",required:!1,type:{name:"SystemStyleObject | undefined"}},_rtl:{defaultValue:null,description:"",name:"_rtl",required:!1,type:{name:"SystemStyleObject | undefined"}},_ltr:{defaultValue:null,description:"",name:"_ltr",required:!1,type:{name:"SystemStyleObject | undefined"}},_mediaDark:{defaultValue:null,description:"",name:"_mediaDark",required:!1,type:{name:"SystemStyleObject | undefined"}},_mediaReduceMotion:{defaultValue:null,description:"",name:"_mediaReduceMotion",required:!1,type:{name:"SystemStyleObject | undefined"}},_dark:{defaultValue:null,description:"",name:"_dark",required:!1,type:{name:"SystemStyleObject | undefined"}},_light:{defaultValue:null,description:"",name:"_light",required:!1,type:{name:"SystemStyleObject | undefined"}},_horizontal:{defaultValue:null,description:"",name:"_horizontal",required:!1,type:{name:"SystemStyleObject | undefined"}},_vertical:{defaultValue:null,description:"",name:"_vertical",required:!1,type:{name:"SystemStyleObject | undefined"}},_open:{defaultValue:null,description:"",name:"_open",required:!1,type:{name:"SystemStyleObject | undefined"}},_closed:{defaultValue:null,description:"",name:"_closed",required:!1,type:{name:"SystemStyleObject | undefined"}},_complete:{defaultValue:null,description:"",name:"_complete",required:!1,type:{name:"SystemStyleObject | undefined"}},_incomplete:{defaultValue:null,description:"",name:"_incomplete",required:!1,type:{name:"SystemStyleObject | undefined"}},_current:{defaultValue:null,description:"",name:"_current",required:!1,type:{name:"SystemStyleObject | undefined"}}}}}catch{}export{H as P,T as a};

import{g as p,i as b}from"./index-yX8pBrvj.js";import{u as d}from"./index-Bvkiv1cC.js";import{u as F}from"./index-DJS8qWMq.js";import{u as v}from"./index-DEiKcbOK.js";import{r as a}from"./index-BwDkhjyp.js";import{g as E,a as h}from"./chunk-3XANSPY5-CEuNXLts.js";function S(t){const n=t.current;if(!n)return!1;const e=E(n);return!e||n.contains(e)?!1:!!b(e)}function L(t,n){const{shouldFocus:e,visible:u,focusRef:o}=n,r=e&&!u;v(()=>{if(!r||S(t))return;const s=(o==null?void 0:o.current)||t.current;let c;if(s)return c=requestAnimationFrame(()=>{s.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[r,t,o])}var A={preventScroll:!0,shouldFocus:!1};function V(t,n=A){const{focusRef:e,preventScroll:u,shouldFocus:o,visible:r}=n,s=O(t)?t.current:t,c=o&&r,i=a.useRef(c),m=a.useRef(r);F(()=>{!m.current&&r&&(i.current=c),m.current=r},[r,c]);const l=a.useCallback(()=>{if(!(!r||!s||!i.current)&&(i.current=!1,!s.contains(document.activeElement)))if(e!=null&&e.current)requestAnimationFrame(()=>{var f;(f=e.current)==null||f.focus({preventScroll:u})});else{const f=p(s);f.length>0&&requestAnimationFrame(()=>{f[0].focus({preventScroll:u})})}},[r,u,s,e]);v(()=>{l()},[l]),d(s,"transitionend",l)}function O(t){return"current"in t}function _(t){const{isOpen:n,ref:e}=t,[u,o]=a.useState(n),[r,s]=a.useState(!1);return a.useEffect(()=>{r||(o(n),s(!0))},[n,r,u]),d(()=>e.current,"animationend",()=>{o(n)}),{present:!(n?!1:!u),onComplete(){var i;const m=h(e.current),l=new m.CustomEvent("animationend",{bubbles:!0});(i=e.current)==null||i.dispatchEvent(l)}}}export{_ as a,V as b,L as u};

import{J as T,e as F,r as B,z as N,K as V,u as Y,o as $,m as j,h as W}from"./index-DCo38vF6.js";var v="default",b="",k=new WeakMap;function X(e={}){const{target:t,doc:r}=e,o=r??document,n=o.documentElement;return T()?(v==="default"&&(b=n.style.webkitUserSelect,n.style.webkitUserSelect="none"),v="disabled"):t&&(k.set(t,t.style.userSelect),t.style.userSelect="none"),()=>O({target:t,doc:o})}function O(e={}){const{target:t,doc:r}=e,n=(r??document).documentElement;if(T()){if(v!=="disabled")return;v="restoring",setTimeout(()=>{F(()=>{v==="restoring"&&(n.style.webkitUserSelect==="none"&&(n.style.webkitUserSelect=b||""),b="",v="default")})},300)}else if(t&&k.has(t)){const i=k.get(t);t.style.userSelect==="none"&&(t.style.userSelect=i??""),t.getAttribute("style")===""&&t.removeAttribute("style"),k.delete(t)}}function _(e={}){const{defer:t,target:r,...o}=e,n=t?B:s=>s(),i=[];return i.push(n(()=>{const s=typeof r=="function"?r():r;i.push(X({...o,target:s}))})),()=>{i.forEach(s=>s==null?void 0:s())}}var u=(e,t,r,o)=>{const n=typeof e=="function"?e():e;return n==null||n.addEventListener(t,r,o),()=>{n==null||n.removeEventListener(t,r,o)}};function ue(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}var le=e=>e.button===0,fe=e=>e.button===2||N()&&e.ctrlKey&&e.button===0,pe=e=>e.ctrlKey||e.altKey||e.metaKey;function G(e,t,r){const n=(s=>{const c=requestAnimationFrame(s);return()=>cancelAnimationFrame(c)})(()=>{e.removeEventListener(t,i,!0),r()}),i=()=>{n(),r()};return e.addEventListener(t,i,{once:!0,capture:!0}),n}function J(e){return(e==null?void 0:e.matches("a[href]"))??!1}function ye(e){if(!J(e))return;const t=()=>e.click();V()?G(e,"keyup",t):queueMicrotask(t)}function me(e,t,r){if(!e)return;const o=e.ownerDocument.defaultView||window,n=new o.CustomEvent(t,r);return e.dispatchEvent(n)}var H={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},A={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function ve(e,t={}){const{dir:r="ltr",orientation:o="horizontal"}=t;let{key:n}=e;return n=H[n]??n,r==="rtl"&&o==="horizontal"&&n in A&&(n=A[n]),n}function Q(e,t="client"){const r=e.touches[0]||e.changedTouches[0];return{x:r[`${t}X`],y:r[`${t}Y`]}}function Z(e,t="client"){return{x:e[`${t}X`],y:e[`${t}Y`]}}var ee=e=>"touches"in e&&e.touches.length>0;function R(e,t="client"){return ee(e)?Q(e,t):Z(e,t)}var te=new Set(["PageUp","PageDown"]),ne=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function he(e){return e.ctrlKey||e.metaKey?.1:te.has(e.key)||e.shiftKey&&ne.has(e.key)?10:1}function de(e){return e.nativeEvent??e}function M(e){return Math.max(0,Math.min(1,e))}function we(e,t){const{left:r,top:o,width:n,height:i}=t.getBoundingClientRect(),s={x:e.x-r,y:e.y-o},c={x:M(s.x/n),y:M(s.y/i)};function l(m={}){const{dir:p="ltr",orientation:h="horizontal",inverted:f}=m,d=typeof f=="object"?f.x:f,w=typeof f=="object"?f.y:f;return h==="horizontal"?p==="rtl"||d?1-c.x:c.x:w?1-c.y:c.y}return{offset:s,percent:c,getPercentValue:l}}function ge(e,t){const r=e.body,o="pointerLockElement"in e||"mozPointerLockElement"in e,n=()=>!!e.pointerLockElement;function i(){}function s(l){n(),console.error("PointerLock error occured:",l),e.exitPointerLock()}if(!o)return;try{r.requestPointerLock()}catch{}const c=[u(e,"pointerlockchange",i,!1),u(e,"pointerlockerror",s,!1)];return()=>{c.forEach(l=>l()),e.exitPointerLock()}}function ke(e,t){const{onPointerMove:r,onPointerUp:o}=t,n=[],s=[u(e,"pointermove",c=>{const l=R(c);n.push({...l,timestamp:performance.now()});const m=Math.sqrt(l.x**2+l.y**2),p=c.pointerType==="touch"?10:5;if(!(m<p)){if(c.pointerType==="mouse"&&c.button===0){o();return}r({point:l,event:c,velocity:se(n,.1)})}},!1),u(e,"pointerup",o,!1),u(e,"pointercancel",o,!1),u(e,"contextmenu",o,!1),_({doc:e})];return()=>{s.forEach(c=>c()),n.length=0}}function re(e){return e[e.length-1]}function oe(e){return e*1e3}function ie(e){return e/1e3}function se(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,o=null;const n=re(e);for(;r>=0&&(o=e[r],!(n.timestamp-o.timestamp>oe(t)));)r--;if(!o)return{x:0,y:0};const i=ie(n.timestamp-o.timestamp);if(i===0)return{x:0,y:0};const s={x:(n.x-o.x)/i,y:(n.y-o.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),{x:Math.abs(s.x),y:Math.abs(s.y)}}var L=(...e)=>t=>e.reduce((r,o)=>o(r),t),g=()=>{};function Pe(e){const{pointerNode:t,keyboardNode:r=t,onPress:o,onPressStart:n,onPressEnd:i,isValidKey:s=a=>a.key==="Enter"}=e;if(!t)return g;const c=Y(t),l=$(t);let m=g,p=g,h=g;const f=a=>({point:R(a),event:a});function d(a){n==null||n(f(a))}function w(a){i==null||i(f(a))}const U=u(t,"pointerdown",a=>{p();const P=u(c,"pointerup",y=>{const E=j(y);W(t,E)?o==null||o(f(y)):i==null||i(f(y))},{passive:!o}),x=u(c,"pointercancel",w,{passive:!i});p=L(P,x),l.activeElement===r&&a.pointerType==="mouse"&&a.preventDefault(),d(a)},{passive:!n}),D=u(r,"focus",C);m=L(U,D);function C(){const a=y=>{if(!s(y))return;const E=q=>{if(!s(q))return;const z=new c.PointerEvent("pointerup"),S=f(z);o==null||o(S),i==null||i(S)};p(),p=u(r,"keyup",E);const I=new c.PointerEvent("pointerdown");d(I)},K=()=>{const y=new c.PointerEvent("pointercancel");w(y)},P=u(r,"keydown",a),x=u(r,"blur",K);h=L(P,x)}return function(){m(),p(),h()}}export{ve as a,u as b,fe as c,R as d,ue as e,me as f,de as g,ye as h,pe as i,we as j,he as k,le as l,ke as m,ge as r,Pe as t};

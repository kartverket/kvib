import{n as C,u as X,a as Y}from"./index-DxF6_pxb.js";import{j as h}from"./jsx-runtime-CQsLhzk5.js";import{r as E}from"./index-Wp2u197Z.js";import{c as q}from"./create-slot-recipe-context-Ct7AJ-u_.js";import{c as z}from"./factory-DbxLU_Fv.js";import{C as Z,W as k,b as J}from"./icons-C5Y4X3wc.js";import{r as O,s as Q,c as F,a as G,E as tt,F as et,y as st,w as ot,g as at,z as S}from"./index-DXMatsKm.js";import{c as nt,e as it,N as rt,d as v,r as N,q as ct}from"./index-C5caIrke.js";import{c as lt}from"./index-BRNWFSEf.js";import{a as dt}from"./index-DKqhWv84.js";import{b as U}from"./index-BgkvX0F_.js";import{a as A}from"./factory-Ck6AXAvN.js";import{c as ut}from"./create-context-9KvyJVA-.js";var gt=lt("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),I=gt.build(),m=nt({getRegionId:e=>`toast-group:${e}`,getRegionEl:(e,a)=>m.getById(e,`toast-group:${a}`),getRootId:e=>`toast:${e.id}`,getRootEl:e=>m.getById(e,m.getRootId(e)),getTitleId:e=>`toast:${e.id}:title`,getDescriptionId:e=>`toast:${e.id}:description`,getCloseTriggerId:e=>`toast${e.id}:close`});function L(e,a){return e.filter(t=>t.state.context.placement===a)}var x={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function w(e,a){return e??x[a]??x.DEFAULT}function pt(e,a){var o;const t=e.offsets,s=typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t,c=e.dir==="rtl",r=a.replace("-start",c?"-right":"-left").replace("-end",c?"-left":"-right"),d=r.includes("right"),p=r.includes("left"),u={position:"fixed",pointerEvents:e.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${e.gap}px`,"--first-height":`${((o=e.heights[0])==null?void 0:o.height)||0}px`,zIndex:rt};let i="center";if(d&&(i="flex-end"),p&&(i="flex-start"),u.alignItems=i,r.includes("top")){const n=s.top;u.top=`max(env(safe-area-inset-top, 0px), ${n})`}if(r.includes("bottom")){const n=s.bottom;u.bottom=`max(env(safe-area-inset-bottom, 0px), ${n})`}if(!r.includes("left")){const n=s.right;u.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${n})`}if(!r.includes("right")){const n=s.left;u.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${n})`}return u}function ft(e,a){const[t]=e.placement.split("-"),s=!e.frontmost,c=!e.stacked,r={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${e.removeDelay}ms`,"--duration":`${e.type==="loading"?Number.MAX_SAFE_INTEGER:e.duration}ms`,"--initial-height":`${e.height}px`,"--offset":`${e.offset}px`,"--index":e.index,"--z-index":e.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},d=p=>Object.assign(r,p);return t==="top"?d({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):t==="bottom"&&d({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),e.mounted&&(d({"--y":"0","--opacity":"1"}),e.stacked&&d({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),a||d({"--opacity":"0",pointerEvents:"none"}),s&&c&&(d({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),a||d({"--y":"calc(var(--sign) * 40%)"})),s&&e.stacked&&!a&&d({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),e.frontmost&&!a&&d({"--y":"calc(var(--lift) * -100%)"}),r}function mt(e,a){const t={position:"absolute",inset:"0",scale:"1 2",pointerEvents:a?"none":"auto"},s=c=>Object.assign(t,c);return e.frontmost&&!a&&s({height:"calc(var(--initial-height) + 80%)"}),t}function ht(e,a){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Tt(e,a,t){function s(){return tt(e)?e.getState():e}function c(o){return L(s().context.toasts,o)}function r(o){const n=s().context.toasts;return n.length?!!n.find(l=>l.id==o):!1}function d(o){const n=`toast:${et()}`,l=o.id?o.id:n;return r(l)||a({type:"ADD_TOAST",toast:{...o,id:l}}),l}function p(o,n){return r(o)&&a({type:"UPDATE_TOAST",id:o,toast:n}),o}function u(o){const{id:n}=o;return(n?r(n):!1)&&n!=null?p(n,o):d(o)}function i(o){o==null?a("DISMISS_ALL"):r(o)&&a({type:"DISMISS_TOAST",id:o})}return{getCount(){return s().context.count},getPlacements(){const n=s().context.toasts.map(l=>l.state.context.placement);return Array.from(new Set(n))},getToastsByPlacement:c,isVisible:r,create:d,update:p,upsert:u,dismiss:i,remove(o){o==null?a("REMOVE_ALL"):r(o)&&a({type:"REMOVE_TOAST",id:o})},dismissByPlacement(o){c(o).forEach(l=>i(l.id))},loading(o){return u({...o,type:"loading"})},success(o){return u({...o,type:"success"})},error(o){return u({...o,type:"error"})},promise(o,n,l={}){const g=u({...l,...n.loading,type:"loading"});return O(o).then(f=>{const T=O(n.success,f);u({...l,...T,id:g,type:"success"})}).catch(f=>{const T=O(n.error,f);u({...l,...T,id:g,type:"error"})}).finally(()=>{var f;(f=n.finally)==null||f.call(n)}),g},pause(o){o==null?a("PAUSE_ALL"):r(o)&&a({type:"PAUSE_TOAST",id:o})},resume(o){o==null?a("RESUME_ALL"):r(o)&&a({type:"RESUME_TOAST",id:o})},getGroupProps(o){const{placement:n,label:l="Notifications"}=o,g=s(),f=g.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[T,P="center"]=n.split("-");return t.element({...I.group.attrs,dir:g.context.dir,tabIndex:-1,"aria-label":`${n} ${l} ${f}`,id:m.getRegionId(n),"data-placement":n,"data-side":T,"data-align":P,"aria-live":"polite",role:"region",style:pt(g.context,n),onMouseMove(){a({type:"REGION.POINTER_ENTER",placement:n})},onMouseLeave(){a({type:"REGION.POINTER_LEAVE",placement:n})},onFocus(y){a({type:"REGION.FOCUS",target:y.relatedTarget})},onBlur(y){g.context.isFocusWithin&&!it(y.currentTarget,y.relatedTarget)&&a({type:"REGION.BLUR"})}})},subscribe(o){const n=s();return Q(n.context.toasts,()=>{const g=c(n.context.placement).map(f=>f.getState().context);o(g)})}}}var{not:yt,and:Et,or:vt}=at;function It(e){const{type:a="info",duration:t,id:s="1",placement:c="bottom",removeDelay:r=200,...d}=e,p=F(d),u=w(t,a);return G({id:s,context:{id:s,type:a,remaining:u,duration:u,removeDelay:r,createdAt:Date.now(),placement:c,...p,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:a==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:Et("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:vt("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:yt("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(i,o,{self:n}){let l;return N(()=>{const g=m.getRootEl(i);if(!g)return;i.mounted=!0;const f=ct(g,"[data-ghost]");ot(f.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const T=()=>{const W=g.style.height;g.style.height="auto";const M=g.getBoundingClientRect().height;g.style.height=W,i.height=M,n.sendParent({type:"UPDATE_HEIGHT",id:n.id,height:M,placement:i.placement})};T();const P=m.getWin(i),y=new P.MutationObserver(T);y.observe(g,{childList:!0,subtree:!0,characterData:!0}),l=()=>y.disconnect()}),()=>l==null?void 0:l()}},guards:{isChangingToLoading:(i,o)=>{var n;return((n=o.toast)==null?void 0:n.type)==="loading"},isLoadingType:i=>i.type==="loading",hasTypeChanged:(i,o)=>{var n;return((n=o.toast)==null?void 0:n.type)!=null&&o.toast.type!==i.type},hasDurationChanged:(i,o)=>{var n;return((n=o.toast)==null?void 0:n.duration)!=null&&o.toast.duration!==i.duration}},delays:{VISIBLE_DURATION:i=>i.remaining,REMOVE_DELAY:i=>i.removeDelay},actions:{measureHeight(i,o,{self:n}){N(()=>{const l=m.getRootEl(i);if(!l)return;i.mounted=!0;const g=l.style.height;l.style.height="auto";const f=l.getBoundingClientRect().height;l.style.height=g,i.height=f,n.sendParent({type:"UPDATE_HEIGHT",id:n.id,height:f,placement:i.placement})})},setRemainingDuration(i){i.remaining-=Date.now()-i.createdAt},setCreatedAt(i){i.createdAt=Date.now()},notifyParentToRemove(i,o,{self:n}){n.sendParent({type:"REMOVE_TOAST",id:n.id})},invokeOnDismiss(i){var o;(o=i.onStatusChange)==null||o.call(i,{status:"dismissing"})},invokeOnUnmount(i){var o;(o=i.onStatusChange)==null||o.call(i,{status:"unmounted"})},invokeOnVisible(i){var o;(o=i.onStatusChange)==null||o.call(i,{status:"visible"})},setContext(i,o){var f,T;const n=(f=o.toast)==null?void 0:f.duration,l=((T=o.toast)==null?void 0:T.type)??i.type,g=w(n,l);Object.assign(i,{...o.toast,duration:g,remaining:g})}}})}function St(e){const a=F(e);return G({id:"toaster",initial:a.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,...a,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:t=>t.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:t=>t.toasts.length<t.max,isOverlapping:t=>!!t.overlap},activities:{trackHotKeyPress(t,s,{send:c}){return U(document,"keydown",d=>{t.hotkey.every(u=>d[u]||d.code===u)&&c({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(t,s,{send:c}){if(!t.pauseOnPageIdle)return;const r=m.getDoc(t);return U(r,"visibilitychange",()=>{c(r.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(t){var d;const c=L(t.toasts,t.placement).length>0;if(!c){(d=t._cleanup)==null||d.call(t);return}if(c&&t._cleanup)return;const r=()=>m.getRegionEl(t,t.placement);t._cleanup=dt(r,{defer:!0})},clearDismissableBranch(t){var s;(s=t._cleanup)==null||s.call(t)},focusRegionEl(t){queueMicrotask(()=>{var s;(s=m.getRegionEl(t,t.placement))==null||s.focus()})},expandToasts(t){b(t,s=>{s.state.context.stacked=!0})},collapseToasts(t){b(t,s=>{s.state.context.stacked=!1})},collapsedIfEmpty(t,s,{send:c}){!t.overlap||t.toasts.length>1||c("REGION.OVERLAP")},pauseToast(t,s,{self:c}){c.sendChild("PAUSE",s.id)},pauseToasts(t){t.toasts.forEach(s=>s.send("PAUSE"))},resumeToast(t,s,{self:c}){c.sendChild("RESUME",s.id)},resumeToasts(t){t.toasts.forEach(s=>s.send("RESUME"))},measureToasts(t){t.toasts.forEach(s=>s.send("MEASURE"))},createToast(t,s,{self:c,getState:r}){const d={placement:t.placement,duration:t.duration,removeDelay:t.removeDelay,...s.toast,dir:t.dir,getRootNode:t.getRootNode,stacked:r().matches("stack")},p=It(d),u=c.spawn(p);t.toasts=[u,...t.toasts]},updateToast(t,s,{self:c}){c.sendChild({type:"UPDATE",toast:s.toast},s.id)},dismissToast(t,s,{self:c}){c.sendChild("DISMISS",s.id)},dismissToasts(t){t.toasts.forEach(s=>s.send("DISMISS"))},removeToast(t,s,{self:c}){c.stopChild(s.id),t.toasts=t.toasts.filter(r=>r.id!==s.id),t.heights=t.heights.filter(r=>r.id!==s.id)},removeToasts(t,s,{self:c}){t.toasts.forEach(r=>c.stopChild(r.id)),t.toasts=[],t.heights=[]},syncHeights(t,s){const c=t.heights.find(r=>r.id===s.id);if(c)c.height=s.height,c.placement=s.placement;else{const r={id:s.id,height:s.height,placement:s.placement};t.heights=[r,...t.heights]}},syncToastIndex(t){b(t,(s,c,r)=>{s.state.context.index=c,s.state.context.frontmost=c===0,s.state.context.zIndex=r.length-c})},syncToastOffset(t,s){const c=s.placement??t.placement;b({...t,placement:c},r=>{const d=Math.max(t.heights.findIndex(u=>u.id===r.id),0),p=t.heights.reduce((u,i,o)=>o>=d?u:u+i.height,0);r.state.context.offset=d*t.gap+p})},setLastFocusedEl(t,s){t.isFocusWithin||!s.target||(t.isFocusWithin=!0,t.lastFocusedEl=st(s.target))},restoreLastFocusedEl(t){t.isFocusWithin=!1,t.lastFocusedEl&&(t.lastFocusedEl.focus({preventScroll:!0}),t.lastFocusedEl=null)},clearLastFocusedEl(t){t.lastFocusedEl&&(t.lastFocusedEl.focus({preventScroll:!0}),t.lastFocusedEl=null,t.isFocusWithin=!1)}}})}function b(e,a){L(e.toasts,e.placement).forEach(a)}function Rt(e,a,t){const s=e.hasTag("visible"),c=e.hasTag("paused"),r=e.context.placement,d=e.context.type,[p,u="center"]=r.split("-");return{type:d,title:e.context.title,description:e.context.description,placement:r,visible:s,paused:c,pause(){a("PAUSE")},resume(){a("RESUME")},dismiss(){a("DISMISS")},getRootProps(){return t.element({...I.root.attrs,dir:e.context.dir,id:m.getRootId(e.context),"data-state":s?"open":"closed","data-type":d,"data-placement":r,"data-align":u,"data-side":p,"data-mounted":v(e.context.mounted),"data-paused":v(c),"data-first":v(e.context.frontmost),"data-sibling":v(!e.context.frontmost),"data-stack":v(e.context.stacked),"data-overlap":v(!e.context.stacked),role:"status","aria-atomic":"true","aria-describedby":e.context.description?m.getDescriptionId(e.context):void 0,"aria-labelledby":e.context.title?m.getTitleId(e.context):void 0,tabIndex:0,style:ft(e.context,s),onKeyDown(i){i.defaultPrevented||i.key=="Escape"&&(a("DISMISS"),i.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:mt(e.context,s)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:ht()})},getTitleProps(){return t.element({...I.title.attrs,id:m.getTitleId(e.context)})},getDescriptionProps(){return t.element({...I.description.attrs,id:m.getDescriptionId(e.context)})},getActionTriggerProps(){return t.button({...I.actionTrigger.attrs,type:"button",onClick(i){var o,n;i.defaultPrevented||((n=(o=e.context.action)==null?void 0:o.onClick)==null||n.call(o),a("DISMISS"))}})},getCloseTriggerProps(){return t.button({id:m.getCloseTriggerId(e.context),...I.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(i){i.defaultPrevented||a("DISMISS")}})}}}var _={connect:Tt,machine:St};const Bt=e=>{const a=_.machine({id:"1",...e});return{..._.connect(a,a.send,C),machine:a}},[At,R]=ut({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),$=E.forwardRef((e,a)=>{const t=R(),s=S(t.getActionTriggerProps(),e);return h.jsx(A.button,{...s,ref:a})});$.displayName="ToastActionTrigger";const H=E.forwardRef((e,a)=>{const t=R(),s=S(t.getCloseTriggerProps(),e);return h.jsx(A.button,{...s,ref:a})});H.displayName="ToastCloseTrigger";const B=E.forwardRef((e,a)=>{const t=R(),s=S(t.getDescriptionProps(),e);return h.jsx(A.div,{...s,ref:a})});B.displayName="ToastDescription";const j=E.forwardRef((e,a)=>{const t=R(),s=S(t.getRootProps(),e);return h.jsxs("div",{...s,ref:a,children:[h.jsx("div",{...t.getGhostBeforeProps()}),e.children,h.jsx("div",{...t.getGhostAfterProps()})]})});j.displayName="ToastRoot";const V=E.forwardRef((e,a)=>{const t=R(),s=S(t.getTitleProps(),e);return h.jsx(A.div,{...s,ref:a})});V.displayName="ToastTitle";const K=E.forwardRef((e,a)=>{const{toaster:t,children:s,...c}=e,[r,d]=X(t.machine),p=r.context.placement,u=_.connect(r,d,C),i=u.getToastsByPlacement(p),o=S(u.getGroupProps({placement:p}),c);return h.jsx(A.div,{...o,ref:a,children:i.map(n=>h.jsx(bt,{value:n,children:l=>s(l)},n.id))})});K.displayName="Toaster";const bt=e=>{const[a,t]=Y(e.value),s=Rt(a,t,C);return h.jsx(At,{value:s,children:e.children(a.context)})},{withProvider:Dt,withContext:D,useStyles:Pt}=q({key:"toast"}),jt=z(K,{},{forwardAsChild:!0}),Vt=Dt(j,"root",{forwardAsChild:!0}),Kt=D(H,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:h.jsx(Z,{})}}),Wt=D(V,"title",{forwardAsChild:!0}),Xt=D(B,"description",{forwardAsChild:!0}),Yt=D($,"actionTrigger",{forwardAsChild:!0}),Ot={warning:k,success:J,error:k},qt=E.forwardRef(function(a,t){const s=R(),c=Pt(),r=Ot[s.type];return r?h.jsx(r,{ref:t,...a,css:[c.indicator,a.css]}):null});export{jt as T,Vt as a,qt as b,Bt as c,Wt as d,Xt as e,Yt as f,Kt as g};

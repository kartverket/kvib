import{j as i}from"./jsx-runtime-sfY7k0Xq.js";import{r as c}from"./index-CcKhGcwW.js";import{c as E}from"./create-slot-recipe-context-CYF_0Bn9.js";import{c as P}from"./factory-Dr_T95xI.js";import{c as p}from"./create-split-props-u5h9OPvL.js";import{a as l}from"./factory-ZiKyq5QJ.js";import{c as b}from"./create-context-DPShtm6F.js";import{z as m,c as y,a as S}from"./index-DussGwo5.js";import{c as N}from"./index-BRNWFSEf.js";import{c as M,H as O,N as x}from"./index-DCo38vF6.js";import{c as G}from"./index-Ctx6eFvH.js";import{u as w,n as L}from"./index-D6fzw86p.js";import{u as D}from"./use-environment-context-DqdFjJyw.js";import{u as j}from"./use-locale-context-CnLnjqE7.js";import{u as H}from"./use-event-CSfbiBcH.js";const[u,f]=b({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),C=c.forwardRef((t,r)=>{const a=f(),e=m(a.getFallbackProps(),t);return i.jsx(l.span,{...e,ref:r})});C.displayName="AvatarFallback";const R=c.forwardRef((t,r)=>{const a=f(),e=m(a.getImageProps(),t);return i.jsx(l.img,{...e,ref:r})});R.displayName="AvatarImage";var F=N("avatar").parts("root","image","fallback"),v=F.build(),n=M({getRootId:t=>{var r;return((r=t.ids)==null?void 0:r.root)??`avatar:${t.id}`},getImageId:t=>{var r;return((r=t.ids)==null?void 0:r.image)??`avatar:${t.id}:image`},getFallbackId:t=>{var r;return((r=t.ids)==null?void 0:r.fallback)??`avatar:${t.id}:fallback`},getRootEl:t=>n.getById(t,n.getRootId(t)),getImageEl:t=>n.getById(t,n.getImageId(t))});function $(t,r,a){const e=t.matches("loaded");return{loaded:e,setSrc(o){r({type:"SRC.SET",src:o})},setLoaded(){r({type:"IMG.LOADED",src:"api"})},setError(){r({type:"IMG.ERROR",src:"api"})},getRootProps(){return a.element({...v.root.attrs,dir:t.context.dir,id:n.getRootId(t.context)})},getImageProps(){return a.img({...v.image.attrs,hidden:!e,dir:t.context.dir,id:n.getImageId(t.context),"data-state":e?"visible":"hidden",onLoad(){r({type:"IMG.LOADED",src:"element"})},onError(){r({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return a.element({...v.fallback.attrs,dir:t.context.dir,id:n.getFallbackId(t.context),hidden:e,"data-state":e?"hidden":"visible"})}}}function T(t){const r=y(t);return S({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:r,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(a,e,{send:o}){const s=n.getImageEl(a);return O(s,{attributes:["src","srcset"],callback(){o({type:"SRC.CHANGE"})}})},trackImageRemoval(a,e,{send:o}){const s=n.getRootEl(a);return x(s,{callback(d){Array.from(d[0].removedNodes).find(g=>g.nodeType===Node.ELEMENT_NODE&&g.matches("[data-scope=avatar][data-part=image]"))&&o({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(a){var e;(e=a.onStatusChange)==null||e.call(a,{status:"loaded"})},invokeOnError(a){var e;(e=a.onStatusChange)==null||e.call(a,{status:"error"})},checkImageStatus(a,e,{send:o}){const s=n.getImageEl(a);if(s!=null&&s.complete){const d=U(s)?"IMG.LOADED":"IMG.ERROR";o({type:d,src:"ssr"})}}}})}function U(t){return t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0}G()(["dir","id","ids","onStatusChange","getRootNode"]);const V=(t={})=>{const{getRootNode:r}=D(),{dir:a}=j(),e={id:c.useId(),dir:a,getRootNode:r,...t},o={...e,onStatusChange:H(t.onStatusChange)},[s,d]=w(T(e),{context:o});return $(s,d,L)},h=c.forwardRef((t,r)=>{const[a,e]=p()(t,["id","ids","onStatusChange"]),o=V(a),s=m(o.getRootProps(),e);return i.jsx(u,{value:o,children:i.jsx(l.div,{...s,ref:r})})});h.displayName="AvatarRoot";const I=c.forwardRef((t,r)=>{const[{value:a},e]=p()(t,["value"]),o=m(a.getRootProps(),e);return i.jsx(u,{value:a,children:i.jsx(l.div,{...o,ref:r})})});I.displayName="AvatarRootProvider";const{withProvider:A,withContext:k,useStyles:it,PropsProvider:_}=E({key:"avatar"});A(I,"root",{forwardAsChild:!0});const ct=A(h,"root",{forwardAsChild:!0}),dt=_,lt=k(C,"fallback",{forwardAsChild:!0}),mt=k(R,"image",{forwardAsChild:!0,defaultProps:{draggable:"false",referrerPolicy:"no-referrer"}}),vt=c.forwardRef(function(r,a){return i.jsx(P.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1.2em",width:"1.2em",ref:a,...r,children:i.jsx("path",{d:"M20 22H18V20C18 18.3431 16.6569 17 15 17H9C7.34315 17 6 18.3431 6 20V22H4V20C4 17.2386 6.23858 15 9 15H15C17.7614 15 20 17.2386 20 20V22ZM12 13C8.68629 13 6 10.3137 6 7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7C18 10.3137 15.3137 13 12 13ZM12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"})})});export{ct as A,mt as a,lt as b,vt as c,dt as d,F as e};

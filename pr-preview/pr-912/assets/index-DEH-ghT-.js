import{d as p,e as b,w as E,f as c,I as C,v,o as m,p as I,J as T,t as y,H}from"./create-slot-recipe-context-BTQZ2sOO.js";import{t as D,i as P}from"./index-CbGW83KV.js";import{t as S,l as F}from"./h-stack-Bcgbt9nc.js";var x=p("switch").parts("root","label","control","thumb"),u=x.build(),i=b({getRootId:e=>{var d;return((d=e.ids)==null?void 0:d.root)??`switch:${e.id}`},getLabelId:e=>{var d;return((d=e.ids)==null?void 0:d.label)??`switch:${e.id}:label`},getThumbId:e=>{var d;return((d=e.ids)==null?void 0:d.thumb)??`switch:${e.id}:thumb`},getControlId:e=>{var d;return((d=e.ids)==null?void 0:d.control)??`switch:${e.id}:control`},getHiddenInputId:e=>{var d;return((d=e.ids)==null?void 0:d.hiddenInput)??`switch:${e.id}:input`},getRootEl:e=>i.getById(e,i.getRootId(e)),getHiddenInputEl:e=>i.getById(e,i.getHiddenInputId(e))});function R(e,d,t){const o=e.context.isDisabled,a=e.context.readOnly,r=e.context.checked,s=!o&&e.context.focused,k=!o&&e.context.focusVisible,l={"data-active":c(e.context.active),"data-focus":c(s),"data-focus-visible":c(k),"data-readonly":c(a),"data-hover":c(e.context.hovered),"data-disabled":c(o),"data-state":e.context.checked?"checked":"unchecked","data-invalid":c(e.context.invalid)};return{checked:r,disabled:o,focused:s,setChecked(n){d({type:"CHECKED.SET",checked:n,isTrusted:!1})},toggleChecked(){d({type:"CHECKED.TOGGLE",checked:r,isTrusted:!1})},getRootProps(){return t.label({...u.root.attrs,...l,dir:e.context.dir,id:i.getRootId(e.context),htmlFor:i.getHiddenInputId(e.context),onPointerMove(){o||d({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){o||d({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(n){if(o)return;C(n)===i.getHiddenInputEl(e.context)&&n.stopPropagation()}})},getLabelProps(){return t.element({...u.label.attrs,...l,dir:e.context.dir,id:i.getLabelId(e.context)})},getThumbProps(){return t.element({...u.thumb.attrs,...l,dir:e.context.dir,id:i.getThumbId(e.context),"aria-hidden":!0})},getControlProps(){return t.element({...u.control.attrs,...l,dir:e.context.dir,id:i.getControlId(e.context),"aria-hidden":!0})},getHiddenInputProps(){return t.input({id:i.getHiddenInputId(e.context),type:"checkbox",required:e.context.required,defaultChecked:r,disabled:o,"aria-labelledby":i.getLabelId(e.context),"aria-invalid":e.context.invalid,name:e.context.name,form:e.context.form,value:e.context.value,style:v,onFocus(){const n=P();d({type:"CONTEXT.SET",context:{focused:!0,focusVisible:n}})},onBlur(){d({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(n){if(a){n.preventDefault();return}const h=n.currentTarget.checked;d({type:"CHECKED.SET",checked:h,isTrusted:!0})}})}}}var{not:g}=H;function K(e){const d=m(e);return I({id:"switch",initial:"ready",context:{checked:!1,label:"switch",value:"on",disabled:!1,...d,fieldsetDisabled:!1,focusVisible:!1},computed:{isDisabled:t=>t.disabled||t.fieldsetDisabled},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:g("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:g("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}}},{guards:{isTrusted:(t,o)=>!!o.isTrusted},activities:{trackPressEvent(t){if(!t.isDisabled)return T({pointerNode:i.getRootEl(t),keyboardNode:i.getHiddenInputEl(t),isValidKey:o=>o.key===" ",onPress:()=>t.active=!1,onPressStart:()=>t.active=!0,onPressEnd:()=>t.active=!1})},trackFocusVisible(t){if(!t.isDisabled)return D({root:i.getRootNode(t)})},trackFormControlState(t,o,{send:a,initialContext:r}){return S(i.getHiddenInputEl(t),{onFieldsetDisabledChange(s){t.fieldsetDisabled=s},onFormReset(){a({type:"CHECKED.SET",checked:!!r.checked,src:"form-reset"})}})}},actions:{setContext(t,o){Object.assign(t,o.context)},syncInputElement(t){const o=i.getHiddenInputEl(t);o&&(o.checked=!!t.checked)},removeFocusIfNeeded(t){t.disabled&&t.focused&&(t.focused=!1)},setChecked(t,o){f.checked(t,o.checked)},toggleChecked(t,o){f.checked(t,!t.checked)},dispatchChangeEvent(t){const o=i.getHiddenInputEl(t);F(o,{checked:t.checked})}}})}var N={change:e=>{var d;(d=e.onCheckedChange)==null||d.call(e,{checked:e.checked})}},f={checked:(e,d)=>{y(e.checked,d)||(e.checked=d,N.change(e))}};E()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);export{x as a,R as c,K as m};

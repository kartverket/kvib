import{N,R as F,M as L,r as v,S as P,T as Y,I as T,U as W,P as C,z as H,V as U,W as _}from"./create-slot-recipe-context-BTQZ2sOO.js";function x(e){const t={each(n){var s;for(let r=0;r<((s=e.frames)==null?void 0:s.length);r+=1){const c=e.frames[r];c&&n(c)}},addEventListener(n,s,r){return t.each(c=>{try{c.document.addEventListener(n,s,r)}catch{}}),()=>{try{t.removeEventListener(n,s,r)}catch{}}},removeEventListener(n,s,r){t.each(c=>{try{c.document.removeEventListener(n,s,r)}catch{}})}};return t}function M(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,s,r)=>{try{t==null||t.addEventListener(n,s,r)}catch{}return()=>{try{t==null||t.removeEventListener(n,s,r)}catch{}}},removeEventListener:(n,s,r)=>{try{t==null||t.removeEventListener(n,s,r)}catch{}}}}var O="pointerdown.outside",y="focus.outside";function R(e){for(const t of e)if(C(t)&&Y(t))return!0;return!1}var D=e=>"clientY"in e;function V(e,t){if(!D(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function I(e,t){if(!t||!D(e))return!1;const s=t.scrollHeight>t.clientHeight&&e.clientX>t.clientWidth,c=t.scrollWidth>t.clientWidth&&e.clientY>t.clientHeight;return s||c}function A(e,t){const{exclude:n,onFocusOutside:s,onPointerDownOutside:r,onInteractOutside:c,defer:p}=t;if(!e)return;const f=N(e),w=F(e),d=x(w),E=M(w);function g(i){const o=T(i);if(!C(o)||H(e,o)||V(e,i)||I(i,o))return!1;const a=U(e);return I(i,a)?!1:!(n!=null&&n(o))}const l=new Set;function h(i){function o(){var S;const a=p?v:b=>b(),k=((S=i.composedPath)==null?void 0:S.call(i))??[i.target];a(()=>{if(!(!e||!g(i))){if(r||c){const b=W(r,c);e.addEventListener(O,b,{once:!0})}P(e,O,{bubbles:!1,cancelable:!0,detail:{originalEvent:i,contextmenu:_(i),focusable:R(k)}})}})}i.pointerType==="touch"?(l.forEach(a=>a()),l.add(L(f,"click",o,{once:!0})),l.add(E.addEventListener("click",o,{once:!0})),l.add(d.addEventListener("click",o,{once:!0}))):o()}const u=new Set,X=setTimeout(()=>{u.add(L(f,"pointerdown",h,!0)),u.add(E.addEventListener("pointerdown",h,!0)),u.add(d.addEventListener("pointerdown",h,!0))},0);function m(i){(p?v:a=>a())(()=>{if(!(!e||!g(i))){if(s||c){const a=W(s,c);e.addEventListener(y,a,{once:!0})}P(e,y,{bubbles:!1,cancelable:!0,detail:{originalEvent:i,contextmenu:!1,focusable:Y(T(i))}})}})}return u.add(L(f,"focusin",m,!0)),u.add(E.addEventListener("focusin",m,!0)),u.add(d.addEventListener("focusin",m,!0)),()=>{clearTimeout(X),l.forEach(i=>i()),u.forEach(i=>i())}}function B(e,t){const{defer:n}=t,s=n?v:c=>c(),r=[];return r.push(s(()=>{const c=typeof e=="function"?e():e;r.push(A(c,t))})),()=>{r.forEach(c=>c==null?void 0:c())}}export{B as t};

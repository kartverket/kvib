import{j as l}from"./jsx-runtime-sfY7k0Xq.js";import{i as G}from"./input-D0LKFvap.js";import{_ as H,$ as J,a as U,b as X}from"./useDateSegment-B7dS2BNP.js";import{r as v}from"./index-CcKhGcwW.js";import{B as N}from"./box-C9nK2UO9.js";import{F as Q}from"./flex-DKwYg45R.js";import{u as Y}from"./use-recipe-CWoigbDD.js";import{u as ee}from"./use-field-context-CcEUgBGI.js";import{I as F}from"./IconButton-Bdfm6Aw8.js";function te(e,t){return M(e)-M(t)}function M(e){return e.hour*36e5+e.minute*6e4+e.second*1e3+e.millisecond}function ae(e){let t={};for(let a in e)typeof e[a]=="number"&&(t[a]=-e[a]);return t}function ne(e,t){let a=e.copy();return t.hour!=null&&(a.hour=t.hour),t.minute!=null&&(a.minute=t.minute),t.second!=null&&(a.second=t.second),t.millisecond!=null&&(a.millisecond=t.millisecond),E(a),a}function re(e){e.second+=Math.floor(e.millisecond/1e3),e.millisecond=h(e.millisecond,1e3),e.minute+=Math.floor(e.second/60),e.second=h(e.second,60),e.hour+=Math.floor(e.minute/60),e.minute=h(e.minute,60);let t=Math.floor(e.hour/24);return e.hour=h(e.hour,24),t}function E(e){e.millisecond=Math.max(0,Math.min(e.millisecond,1e3)),e.second=Math.max(0,Math.min(e.second,59)),e.minute=Math.max(0,Math.min(e.minute,59)),e.hour=Math.max(0,Math.min(e.hour,23))}function h(e,t){let a=e%t;return a<0&&(a+=t),a}function ie(e,t){return e.hour+=t.hours||0,e.minute+=t.minutes||0,e.second+=t.seconds||0,e.millisecond+=t.milliseconds||0,re(e)}function z(e,t){let a=e.copy();return ie(a,t),a}function le(e,t){return z(e,ae(t))}function ue(e,t,a,n){let r=e.copy();switch(t){case"hour":{let i=e.hour,m=0,p=23;if((n==null?void 0:n.hourCycle)===12){let f=i>=12;m=f?12:0,p=f?23:11}r.hour=y(i,a,m,p,n==null?void 0:n.round);break}case"minute":r.minute=y(e.minute,a,0,59,n==null?void 0:n.round);break;case"second":r.second=y(e.second,a,0,59,n==null?void 0:n.round);break;case"millisecond":r.millisecond=y(e.millisecond,a,0,999,n==null?void 0:n.round);break;default:throw new Error("Unsupported field "+t)}return r}function y(e,t,a,n,r=!1){if(r){e+=Math.sign(t),e<a&&(e=n);let i=Math.abs(t);t>0?e=Math.ceil(e/i)*i:e=Math.floor(e/i)*i,e>n&&(e=a)}else e+=t,e<a?e=n-(a-e-1):e>n&&(e=a+(e-n-1));return e}const oe=/^(\d{2})(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/;function de(e){let t=e.match(oe);if(!t)throw new Error("Invalid ISO 8601 time string: "+e);return new x(b(t[1],0,23),t[2]?b(t[2],0,59):0,t[3]?b(t[3],0,59):0,t[4]?b(t[4],0,1/0)*1e3:0)}function b(e,t,a){let n=Number(e);if(n<t||n>a)throw new RangeError(`Value out of range: ${t} <= ${n} <= ${a}`);return n}function se(e){return`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second).padStart(2,"0")}${e.millisecond?String(e.millisecond/1e3).slice(1):""}`}var ce=new WeakMap;class x{copy(){return new x(this.hour,this.minute,this.second,this.millisecond)}add(t){return z(this,t)}subtract(t){return le(this,t)}set(t){return ne(this,t)}cycle(t,a,n){return ue(this,t,a,n)}toString(){return se(this)}compare(t){return te(this,t)}constructor(t=0,a=0,n=0,r=0){H(this,ce,{writable:!0,value:void 0}),this.hour=t,this.minute=a,this.second=n,this.millisecond=r,E(this)}}const _=({segment:e,state:t,colorPalette:a})=>{const n=v.useRef(null),{segmentProps:r}=J(e,t,n);return l.jsx(N,{...r,ref:n,paddingX:"1px",outline:"none",borderRadius:"sm",colorPalette:a,children:me(e.type)?e.text.padStart(2,"0"):e.text})},me=e=>e==="month"||e==="day"||e==="hour"||e==="minute"||e==="second";try{_.displayName="DateTimeSegment",_.__docgenInfo={description:`A date time segment is a part of a date or a time stamp.

Examples could be the day, month, year, hour, minute, second, etc.

This component should be used with the react-aria library, and is not meant to be used directly.`,displayName:"DateTimeSegment",props:{segment:{defaultValue:null,description:"",name:"segment",required:!0,type:{name:"DateSegment"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"DateFieldState"}},colorPalette:{defaultValue:null,description:"",name:"colorPalette",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"blue"'},{value:'"green"'}]}}}}}catch{}const w=({state:e,colorPalette:t,...a})=>{const n=v.useRef(null),{fieldProps:r}=U(a,e,n);return l.jsx(Q,{...r,ref:n,children:e.segments.map(i=>l.jsx(_,{segment:i,state:e,colorPalette:t},i.type))})};try{w.displayName="TimeField",w.__docgenInfo={description:`A time field component.

This component lets the user choose a time based on regular user input.
It shouldn't be used directly, but is used by the TimePicker component.`,displayName:"TimeField",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"TimeFieldState"}},colorPalette:{defaultValue:null,description:"",name:"colorPalette",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"blue"'},{value:'"green"'}]}}}}}catch{}const T=({size:e,width:t="fit-content",variant:a="outline",colorPalette:n,value:r,defaultValue:i=pe(),onChange:m=()=>{},disabled:p=!1,invalid:f=!1,minuteInterval:d=30,ariaLabel:O})=>{const A=Y({recipe:G}),u=ee(),B=(u==null?void 0:u.disabled)||!1,L=(u==null?void 0:u.invalid)||!1,g=p||B,q=f||L,s=X({value:r,defaultValue:i,onChange:o=>{m(o)},locale:"nb",isDisabled:g,isInvalid:q}),$=s.timeValue,D=e==="lg"?"sm":"xs",S=v.useRef(),[K,k]=v.useState(!1),C=o=>{if(!$)return;let V;o==="backward"?V=-($.minute%d||d):V=d-$.minute%d||d,s.value!==null&&s.setValue(s.value.add({minutes:V}))},W=fe(K,q,a),Z=A({variant:a,size:e});return l.jsxs(N,{ref:S,display:"flex",alignItems:"center",width:t,onClick:()=>{var o;return(o=S.current)==null?void 0:o.focus()},onFocus:()=>k(!0),onBlur:()=>k(!1),css:{...W,...Z},"aria-label":O,children:[l.jsx(F,{onClick:()=>C("backward"),size:D,colorPalette:n,variant:"ghost",icon:"chevron_left","aria-label":"earlier time",disabled:g}),l.jsx(w,{state:s,colorPalette:n}),l.jsx(F,{onClick:()=>C("forward"),size:D,colorPalette:n,variant:"ghost",icon:"chevron_right","aria-label":"later time",disabled:g})]})},pe=()=>de(new Date().toTimeString().split(" ")[0]),j=e=>`${(e==null?void 0:e.hour)??0}:${(e==null?void 0:e.minute)??0}`,fe=(e,t,a)=>{if(e)switch(a){case"outline":return{borderColor:"blue.500",boxShadow:"0 0 0 1px blue.500",_hover:{borderColor:t??"blue.500"}};case"flushed":return{borderColor:"blue.500",boxShadow:"0 1px 0 0 blue.500",_hover:{borderColor:t??"blue.500"}};default:return{borderColor:"blue.500",_hover:{borderColor:t??"blue.500"}}}else return{}};try{T.displayName="Timepicker",T.__docgenInfo={description:"",displayName:"Timepicker",props:{size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xs"'}]}},width:{defaultValue:{value:"fit-content"},description:"",name:"width",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"full"'},{value:'"fit-content"'}]}},variant:{defaultValue:{value:"outline"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"outline"'},{value:'"subtle"'},{value:'"flushed"'}]}},colorPalette:{defaultValue:null,description:"",name:"colorPalette",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"blue"'},{value:'"green"'}]}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"TimeValue | undefined"}},defaultValue:{defaultValue:{value:"getCurrentTime() as any"},description:"",name:"defaultValue",required:!1,type:{name:"TimeValue | undefined"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"((value: TimeValue) => void) | undefined"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean | undefined"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean | undefined"}},minuteInterval:{defaultValue:{value:"30"},description:"",name:"minuteInterval",required:!1,type:{name:"number | undefined"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string | undefined"}}}}}catch{}try{j.displayName="getTimestampFromTime",j.__docgenInfo={description:"",displayName:"getTimestampFromTime",props:{"#private":{defaultValue:null,description:"",name:"#private",required:!0,type:{name:"any"}},calendar:{defaultValue:null,description:"The calendar system associated with this date, e.g. Gregorian.",name:"calendar",required:!0,type:{name:"Calendar"}},era:{defaultValue:null,description:'The calendar era for this date, e.g. "BC" or "AD".',name:"era",required:!0,type:{name:"string"}},year:{defaultValue:null,description:"The year of this date within the era.",name:"year",required:!0,type:{name:"number"}},month:{defaultValue:null,description:`The month number within the year. Note that some calendar systems such as Hebrew
may have a variable number of months per year. Therefore, month numbers may not
always correspond to the same month names in different years.`,name:"month",required:!0,type:{name:"number"}},day:{defaultValue:null,description:"The day number within the month.",name:"day",required:!0,type:{name:"number"}},hour:{defaultValue:null,description:"The hour in the day, numbered from 0 to 23.",name:"hour",required:!0,type:{name:"number"}},minute:{defaultValue:null,description:"The minute in the hour.",name:"minute",required:!0,type:{name:"number"}},second:{defaultValue:null,description:"The second in the minute.",name:"second",required:!0,type:{name:"number"}},millisecond:{defaultValue:null,description:"The millisecond in the second.",name:"millisecond",required:!0,type:{name:"number"}},copy:{defaultValue:null,description:"Returns a copy of this date.",name:"copy",required:!0,type:{name:"() => CalendarDateTime"}},add:{defaultValue:null,description:"Returns a new `CalendarDateTime` with the given duration added to it.",name:"add",required:!0,type:{name:"(duration: DateTimeDuration) => CalendarDateTime"}},subtract:{defaultValue:null,description:"Returns a new `CalendarDateTime` with the given duration subtracted from it.",name:"subtract",required:!0,type:{name:"(duration: DateTimeDuration) => CalendarDateTime"}},set:{defaultValue:null,description:"Returns a new `CalendarDateTime` with the given fields set to the provided values. Other fields will be constrained accordingly.",name:"set",required:!0,type:{name:"(fields: DateFields & TimeFields) => CalendarDateTime"}},cycle:{defaultValue:null,description:"Returns a new `CalendarDateTime` with the given field adjusted by a specified amount.\nWhen the resulting value reaches the limits of the field, it wraps around.",name:"cycle",required:!0,type:{name:"(field: keyof DateFields | keyof TimeFields, amount: number, options?: CycleTimeOptions | undefined) => CalendarDateTime"}},toDate:{defaultValue:null,description:"Converts the date to a native JavaScript Date object in the given time zone.",name:"toDate",required:!0,type:{name:"(timeZone: string, disambiguation?: Disambiguation | undefined) => Date"}},toString:{defaultValue:null,description:"Converts the date to an ISO 8601 formatted string.",name:"toString",required:!1,type:{name:"() => string"}},compare:{defaultValue:null,description:"Compares this date with another. A negative result indicates that this date is before the given one, and a positive date indicates that it is after.",name:"compare",required:!0,type:{name:"(b: CalendarDateTime | CalendarDate | ZonedDateTime) => number"}}}}}catch{}const he={title:"Komponenter/Timepicker",component:T,parameters:{docs:{story:{inline:!0},canvas:{sourceState:"hidden"}}},argTypes:{size:{description:"The size of the Timepicker",options:["xs","sm","md","lg"],control:{type:"radio"},table:{type:{summary:'"xs" | "sm" | "md" | "lg"'},defaultValue:{summary:"md"}}},width:{description:"The width of the Timepicker",options:["fit-content","full"],control:{type:"radio"},table:{type:{summary:'"fit-content" | "full"'},defaultValue:{summary:"fit-content"}}},variant:{description:"The variant of the Timepicker",options:["outline","filled","flushed","unstyled"],control:{type:"radio"},table:{type:{summary:'"outline" | "filled" | "flushed" | "unstyled"'},defaultValue:{summary:"outline"}}},colorScheme:{description:"The color scheme of the Timepicker",options:["green","blue"],control:{type:"radio"},table:{type:{summary:'"green" | "blue"'},defaultValue:{summary:"green"}}},value:{description:"The current value of the Timepicker",control:{type:"object"},table:{type:{summary:"TimeValue"}}},defaultValue:{description:"The default value of the Timepicker",control:{type:"object"},table:{type:{summary:"TimeValue"}}},onChange:{description:"Callback function when the value changes",action:"onChange",table:{type:{summary:"(value: TimeValue) => void"}}},disabled:{description:"If true, the Timepicker will be disabled",control:{type:"boolean"},table:{type:{summary:"boolean"},defaultValue:{summary:"false"}}},invalid:{description:"If true, the Timepicker will be marked as invalid",control:{type:"boolean"},table:{type:{summary:"boolean"},defaultValue:{summary:"false"}}},minuteInterval:{description:"The interval between minutes in the Timepicker",control:{type:"number"},table:{type:{summary:"number"}}},ariaLabel:{description:"Provides an accessible label for the Timepicker",control:"text",table:{type:{summary:"string"}}}}},c={render:e=>l.jsx(T,{...e})};var I,P,R;c.parameters={...c.parameters,docs:{...(I=c.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: args => <KvibTimepicker {...args} />
}`,...(R=(P=c.parameters)==null?void 0:P.docs)==null?void 0:R.source}}};const ye=["Preview"],qe=Object.freeze(Object.defineProperty({__proto__:null,Preview:c,__namedExportsOrder:ye,default:he},Symbol.toStringTag,{value:"Module"}));export{c as P,qe as T};

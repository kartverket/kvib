import{t as re}from"./index-BbAC0Ngi.js";import{r as o}from"./index-BwDkhjyp.js";import{a as ie}from"./use-form-control-Dd261dKs.js";import{v as le}from"./visually-hidden.style-BUiBK_kv.js";import{o as ce}from"./omit-QLD0Eizt.js";import{u as p}from"./use-callback-ref-DA6UG1mJ.js";import{u as R}from"./use-safe-layout-effect-BnICyLBj.js";import{u as de}from"./use-update-effect-CNg9DBIF.js";import{d as a}from"./attr-sHTFgF0E.js";import{c as i}from"./call-all-DDzecCnU.js";import{m as G}from"./use-merge-refs-Bdxaq0s4.js";function Se(m={}){const J=ie(m),{isDisabled:t,isReadOnly:d,isRequired:L,isInvalid:r,id:h,onBlur:Q,onFocus:W,"aria-describedby":B}=J,{defaultChecked:M,isChecked:w,isFocusable:X,onChange:Y,isIndeterminate:u,name:x,value:A,tabIndex:K=void 0,"aria-label":U,"aria-labelledby":q,"aria-invalid":S,...Z}=m,E=ce(Z,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),y=p(Y),H=p(Q),O=p(W),[C,_]=o.useState(!1),[f,F]=o.useState(!1),[k,V]=o.useState(!1),[v,b]=o.useState(!1);o.useEffect(()=>re(_),[]);const l=o.useRef(null),[I,$]=o.useState(!0),[ee,D]=o.useState(!!M),P=w!==void 0,n=P?w:ee,T=o.useCallback(e=>{if(d||t){e.preventDefault();return}P||D(n?e.currentTarget.checked:u?!0:e.currentTarget.checked),y==null||y(e)},[d,t,n,P,u,y]);R(()=>{l.current&&(l.current.indeterminate=!!u)},[u]),de(()=>{t&&F(!1)},[t,F]),R(()=>{const e=l.current;if(!(e!=null&&e.form))return;const s=()=>{D(!!M)};return e.form.addEventListener("reset",s),()=>{var c;return(c=e.form)==null?void 0:c.removeEventListener("reset",s)}},[]);const N=t&&!X,j=o.useCallback(e=>{e.key===" "&&b(!0)},[b]),z=o.useCallback(e=>{e.key===" "&&b(!1)},[b]);R(()=>{if(!l.current)return;l.current.checked!==n&&D(l.current.checked)},[l.current]);const ae=o.useCallback((e={},s=null)=>{const c=g=>{f&&g.preventDefault(),b(!0)};return{...e,ref:s,"data-active":a(v),"data-hover":a(k),"data-checked":a(n),"data-focus":a(f),"data-focus-visible":a(f&&C),"data-indeterminate":a(u),"data-disabled":a(t),"data-invalid":a(r),"data-readonly":a(d),"aria-hidden":!0,onMouseDown:i(e.onMouseDown,c),onMouseUp:i(e.onMouseUp,()=>b(!1)),onMouseEnter:i(e.onMouseEnter,()=>V(!0)),onMouseLeave:i(e.onMouseLeave,()=>V(!1))}},[v,n,t,f,C,k,u,r,d]),te=o.useCallback((e={},s=null)=>({...e,ref:s,"data-active":a(v),"data-hover":a(k),"data-checked":a(n),"data-focus":a(f),"data-focus-visible":a(f&&C),"data-indeterminate":a(u),"data-disabled":a(t),"data-invalid":a(r),"data-readonly":a(d)}),[v,n,t,f,C,k,u,r,d]),oe=o.useCallback((e={},s=null)=>({...E,...e,ref:G(s,c=>{c&&$(c.tagName==="LABEL")}),htmlFor:e.htmlFor!==void 0?e.htmlFor:I?h:void 0,onClick:i(e.onClick,()=>{var c;I||((c=l.current)==null||c.click(),requestAnimationFrame(()=>{var g;(g=l.current)==null||g.focus({preventScroll:!0})}))}),"data-disabled":a(t),"data-checked":a(n),"data-invalid":a(r)}),[E,t,n,r,I,h]),ne=o.useCallback((e={},s=null)=>({...e,ref:G(l,s),type:"checkbox",name:x,value:A,id:h,tabIndex:K,onChange:i(e.onChange,T),onBlur:i(e.onBlur,H,()=>F(!1)),onFocus:i(e.onFocus,O,()=>F(!0)),onKeyDown:i(e.onKeyDown,j),onKeyUp:i(e.onKeyUp,z),required:L,checked:n,disabled:N,readOnly:d,"aria-label":U,"aria-labelledby":q,"aria-invalid":S?!!S:r,"aria-describedby":B,"aria-disabled":t,style:le}),[x,A,h,T,H,O,j,z,L,n,N,d,U,q,S,r,B,t,K]),se=o.useCallback((e={},s=null)=>({...e,ref:s,onMouseDown:i(e.onMouseDown,ue),"data-disabled":a(t),"data-checked":a(n),"data-invalid":a(r)}),[n,t,r]);return{state:{isInvalid:r,isFocused:f,isChecked:n,isActive:v,isHovered:k,isIndeterminate:u,isDisabled:t,isReadOnly:d,isRequired:L},getRootProps:oe,getCheckboxProps:ae,getIndicatorProps:te,getInputProps:ne,getLabelProps:se,htmlProps:E}}function ue(m){m.preventDefault(),m.stopPropagation()}export{Se as u};

import{c as p}from"./create-recipe-context-DELc7dO7.js";import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{a as h,b as v,g as x}from"./index-DkbpjeHr.js";import{r as d}from"./index-BqsZ9I6k.js";import{m as u,a as w,c as E}from"./factory-V2Xlcbd9.js";import{u as F}from"./use-field-context-Bzd8MCQa.js";function L(e){if(!e)return;const t=h(e);return"box-sizing:"+t.boxSizing+";border-left:"+t.borderLeftWidth+" solid red;border-right:"+t.borderRightWidth+" solid red;font-family:"+t.fontFamily+";font-feature-settings:"+t.fontFeatureSettings+";font-kerning:"+t.fontKerning+";font-size:"+t.fontSize+";font-stretch:"+t.fontStretch+";font-style:"+t.fontStyle+";font-variant:"+t.fontVariant+";font-variant-caps:"+t.fontVariantCaps+";font-variant-ligatures:"+t.fontVariantLigatures+";font-variant-numeric:"+t.fontVariantNumeric+";font-weight:"+t.fontWeight+";letter-spacing:"+t.letterSpacing+";margin-left:"+t.marginLeft+";margin-right:"+t.marginRight+";padding-left:"+t.paddingLeft+";padding-right:"+t.paddingRight+";text-indent:"+t.textIndent+";text-transform:"+t.textTransform}function T(e){var t=e.createElement("div");return t.id="ghost",t.style.cssText="display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;",e.body.appendChild(t),t}function V(e){if(!e)return;const t=x(e),s=v(e),a=T(t),r=L(e);r&&(a.style.cssText+=r);function o(){s.requestAnimationFrame(()=>{a.innerHTML=e.value;const i=s.getComputedStyle(a);e==null||e.style.setProperty("width",i.width)})}return o(),e==null||e.addEventListener("input",o),e==null||e.addEventListener("change",o),()=>{t.body.removeChild(a),e==null||e.removeEventListener("input",o),e==null||e.removeEventListener("change",o)}}var z=e=>{var g,l;if(!e)return;const t=h(e),s=v(e),a=x(e),r=()=>{requestAnimationFrame(()=>{e.style.height="auto";let n;t.boxSizing==="content-box"?n=e.scrollHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):n=e.scrollHeight+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),t.maxHeight!=="none"&&n>parseFloat(t.maxHeight)?(t.overflowY==="hidden"&&(e.style.overflowY="scroll"),n=parseFloat(t.maxHeight)):t.overflowY!=="hidden"&&(e.style.overflowY="hidden"),e.style.height=`${n}px`})};e.addEventListener("input",r),(g=e.form)==null||g.addEventListener("reset",r);const o=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(o,"value");Object.defineProperty(e,"value",{...i,set(){var n;(n=i==null?void 0:i.set)==null||n.apply(this,arguments),r()}});const f=new s.ResizeObserver(()=>{requestAnimationFrame(()=>r())});f.observe(e);const c=new s.MutationObserver(()=>r());return c.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(l=a.fonts)==null||l.addEventListener("loadingdone",r),()=>{var n,m;e.removeEventListener("input",r),(n=e.form)==null||n.removeEventListener("reset",r),(m=a.fonts)==null||m.removeEventListener("loadingdone",r),f.disconnect(),c.disconnect()}};const y=d.forwardRef((e,t)=>{const{autoresize:s,...a}=e,r=d.useRef(null),o=F(),i=u(o==null?void 0:o.getTextareaProps(),{style:{resize:s?"none":void 0}},a);return d.useEffect(()=>{if(s)return z(r.current)},[s]),b.jsx(w.textarea,{...i,ref:E(t,r)})});y.displayName="FieldTextarea";const{withContext:R}=p({key:"textarea"}),S=R(y);S.displayName="Textarea";export{S as T,V as a};

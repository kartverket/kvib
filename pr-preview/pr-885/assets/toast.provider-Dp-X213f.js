import{j as m}from"./extends-CwFRzn3r.js";import{r as d}from"./index-BwDkhjyp.js";import{c as v,r as R}from"./factory-C6UFhaBW.js";import{b as I,m as k}from"./proxy-CQsau1XN.js";import{u as b}from"./use-update-effect-CNg9DBIF.js";import{u as w}from"./use-callback-ref-DA6UG1mJ.js";import{b as O,A as q}from"./alert-icon-B8tlVjfA.js";import{A as B}from"./alert-title-89KkSj3n.js";import{A as M}from"./alert-description-BS4zLy6K.js";import{C as $}from"./close-button-BkvRA7vz.js";import{P as D}from"./portal-DTuMj-Dh.js";import{c as L}from"./context-CBKykClo.js";import{A as N}from"./index-DVNvNJVv.js";function _(o,t){const n=w(o);d.useEffect(()=>{if(t==null)return;let e=null;return e=window.setTimeout(()=>{n()},t),()=>{e&&window.clearTimeout(e)}},[t,n])}const z=(o,t)=>o.find(n=>n.id===t);function y(o,t){const n=C(o,t),e=n?o[n].findIndex(s=>s.id===t):-1;return{position:n,index:e}}function C(o,t){for(const[n,e]of Object.entries(o))if(z(e,t))return n}function V(o){const t=o.includes("right"),n=o.includes("left");let e="center";return t&&(e="flex-end"),n&&(e="flex-start"),{display:"flex",flexDirection:"column",alignItems:e}}function W(o){const n=o==="top"||o==="bottom"?"0 auto":void 0,e=o.includes("top")?"env(safe-area-inset-top, 0px)":void 0,s=o.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,i=o.includes("left")?void 0:"env(safe-area-inset-right, 0px)",a=o.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:e,bottom:s,right:i,left:a}}const H={initial:o=>{const{position:t}=o,n=["top","bottom"].includes(t)?"y":"x";let e=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(e=1),{opacity:0,[n]:e*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},S=d.memo(o=>{const{id:t,message:n,onCloseComplete:e,onRequestRemove:s,requestClose:i=!1,position:a="bottom",duration:r=5e3,containerStyle:c,motionVariants:u=H,toastSpacing:l="0.5rem"}=o,[x,h]=d.useState(r),f=I();b(()=>{f||e==null||e()},[f]),b(()=>{h(r)},[r]);const j=()=>h(null),E=()=>h(r),g=()=>{f&&s()};d.useEffect(()=>{f&&i&&s()},[f,i,s]),_(g,x);const P=d.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:l,...c}),[c,l]),A=d.useMemo(()=>V(a),[a]);return m.jsx(k.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:j,onHoverEnd:E,custom:{position:a},style:A,children:m.jsx(v.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:P,children:R(n,{id:t,onClose:g})})})});S.displayName="ToastComponent";const K=o=>{const{status:t,variant:n="solid",id:e,title:s,isClosable:i,onClose:a,description:r,colorScheme:c,icon:u}=o,l=e?{root:`toast-${e}`,title:`toast-${e}-title`,description:`toast-${e}-description`}:void 0;return m.jsxs(O,{addRole:!1,status:t,variant:n,id:l==null?void 0:l.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:c,children:[m.jsx(q,{children:u}),m.jsxs(v.div,{flex:"1",maxWidth:"100%",children:[s&&m.jsx(B,{id:l==null?void 0:l.title,children:s}),r&&m.jsx(M,{id:l==null?void 0:l.description,display:"block",children:r})]}),i&&m.jsx($,{size:"sm",onClick:a,position:"absolute",insetEnd:1,top:1})]})};function F(o={}){const{render:t,toastComponent:n=K}=o;return s=>typeof t=="function"?t({...s,...o}):m.jsx(n,{...s,...o})}const U={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},p=G(U);function G(o){let t=o;const n=new Set,e=s=>{t=s(t),n.forEach(i=>i())};return{getState:()=>t,subscribe:s=>(n.add(s),()=>{e(()=>o),n.delete(s)}),removeToast:(s,i)=>{e(a=>({...a,[i]:a[i].filter(r=>r.id!=s)}))},notify:(s,i)=>{const a=J(s,i),{position:r,id:c}=a;return e(u=>{const x=r.includes("top")?[a,...u[r]??[]]:[...u[r]??[],a];return{...u,[r]:x}}),c},update:(s,i)=>{s&&e(a=>{const r={...a},{position:c,index:u}=y(r,s);return c&&u!==-1&&(r[c][u]={...r[c][u],...i,message:F(i)}),r})},closeAll:({positions:s}={})=>{e(i=>(s??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((c,u)=>(c[u]=i[u].map(l=>({...l,requestClose:!0})),c),{...i}))},close:s=>{e(i=>{const a=C(i,s);return a?{...i,[a]:i[a].map(r=>r.id==s?{...r,requestClose:!0}:r)}:i})},isActive:s=>!!y(p.getState(),s).position}}let T=0;function J(o,t={}){T+=1;const n=t.id??T,e=t.position??"bottom";return{id:n,message:o,position:e,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>p.removeToast(String(n),e),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}const[lt,ut]=L({name:"ToastOptionsContext",strict:!1}),mt=o=>{const t=d.useSyncExternalStore(p.subscribe,p.getState,p.getState),{motionVariants:n,component:e=S,portalProps:s,animatePresenceProps:i}=o,r=Object.keys(t).map(c=>{const u=t[c];return m.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${c}`,id:`chakra-toast-manager-${c}`,style:W(c),children:m.jsx(N,{...i,initial:!1,children:u.map(l=>m.jsx(e,{motionVariants:n,...l},l.id))})},c)});return m.jsx(D,{...s,children:r})};export{lt as T,mt as a,F as c,p as t,ut as u};

import{j as h}from"./jsx-runtime-D_zvdyIk.js";import{r as g}from"./index-Bj2TM2QZ.js";import{c as m}from"./create-recipe-context-BC6ck0lV.js";var u=(t,e)=>{const r=[],n=(a,s,i)=>{s-a>0&&r.push({start:a,end:s,match:i})};if(t.length===0)n(0,e,!1);else{let a=0;for(const s of t)n(a,s.start,!1),n(s.start,s.end,!0),a=s.end;n(a,e,!1)}return r};function f(t){const{text:e,query:r,ignoreCase:n}=t,a=n?e.toLowerCase():e,s=n&&typeof r=="string"?r.toLowerCase():r,i=typeof a=="string"?a.indexOf(s):-1;if(i===-1)return[{text:e,match:!1}];const o=i+s.length;return u([{start:i,end:o}],e.length).map(c=>({text:e.slice(c.start,c.end),match:!!c.match}))}var x=t=>t.replace(/[|\\{}()[\]^$+*?.-]/g,e=>`\\${e}`),y=(t,e)=>{const r=t.filter(Boolean).map(n=>x(n));return new RegExp(`(${r.join("|")})`,e)},d=(t,e=!0)=>`${t?"i":""}${e?"g":""}`;function A(t){const{text:e,query:r,ignoreCase:n,matchAll:a}=t;if(r.length===0)return[{text:e,match:!1}];const s=d(n,a),i=y(Array.isArray(r)?r:[r],s),o=[...e.matchAll(i)].map(l=>({start:l.index||0,end:(l.index||0)+l[0].length}));return u(o,t.text.length).map(l=>({text:t.text.slice(l.start,l.end),match:!!l.match}))}var p=t=>{if(t.matchAll==null&&(t.matchAll=Array.isArray(t.query)),!t.matchAll&&Array.isArray(t.query))throw new Error("matchAll must be true when using multiple queries");return t.matchAll?A(t):f(t)};const w=t=>g.useMemo(()=>p(t),[t]);function q(t){const{each:e,fallback:r,children:n}=t;return(e==null?void 0:e.length)===0?r||null:e==null?void 0:e.map(n)}const{withContext:C}=m({key:"mark"}),j=C("mark");function F(t){const{children:e,query:r,ignoreCase:n,matchAll:a,styles:s}=t;if(typeof e!="string")throw new Error("The children prop of Highlight must be a string");const i=w({query:r,text:e,matchAll:a,ignoreCase:n});return h.jsx(q,{each:i,children:(o,l)=>o.match?h.jsx(j,{css:s,children:o.text},l):h.jsx(g.Fragment,{children:o.text},l)})}export{q as F,F as H,j as M};

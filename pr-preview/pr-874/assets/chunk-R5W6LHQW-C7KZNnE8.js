import{u as v,g as l}from"./chunk-KA2477BY-DoDO0Mj1.js";import{r as E}from"./index-BwDkhjyp.js";function D(a){const{ref:n,handler:r,enabled:o=!0}=a,u=v(r),e=E.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;E.useEffect(()=>{if(!o)return;const i=s=>{c(s,n)&&(e.isPointerDown=!0)},d=s=>{if(e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.isPointerDown&&r&&c(s,n)&&(e.isPointerDown=!1,u(s))},f=s=>{e.ignoreEmulatedMouseEvents=!0,r&&e.isPointerDown&&c(s,n)&&(e.isPointerDown=!1,u(s))},t=l(n.current);return t.addEventListener("mousedown",i,!0),t.addEventListener("mouseup",d,!0),t.addEventListener("touchstart",i,!0),t.addEventListener("touchend",f,!0),()=>{t.removeEventListener("mousedown",i,!0),t.removeEventListener("mouseup",d,!0),t.removeEventListener("touchstart",i,!0),t.removeEventListener("touchend",f,!0)}},[r,n,u,e,o])}function c(a,n){var r;const o=a.target;return o&&!l(o).contains(o)?!1:!((r=n.current)!=null&&r.contains(o))}export{D as u};

import{c as C}from"./create-context-rrX1Jm6N.js";import{r as s}from"./index-C7I6S4tq.js";import"./index-DGxgJC0M.js";import"./jsx-runtime-DgHZ7iq2.js";import{g as v,s as q,b as h,i as L,d as k}from"./factory-C0bPybxC.js";const[B,D]=C({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}});function A(t){return new Proxy({},{get(){return t}})}var G=()=>t=>Array.from(new Set(t)),H=A(t=>t),x=t=>(t==null?void 0:t.constructor.name)==="Array",R=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!l(t[r],e[r]))return!1;return!0},l=(t,e)=>{if(Object.is(t,e))return!0;if(t==null&&e!=null||t!=null&&e==null)return!1;if(typeof(t==null?void 0:t.isEqual)=="function"&&typeof(e==null?void 0:e.isEqual)=="function")return t.isEqual(e);if(typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();if(x(t)&&x(e))return R(Array.from(t),Array.from(e));if(typeof t!="object"||typeof e!="object")return!1;const r=Object.keys(e??Object.create(null)),n=r.length;for(let o=0;o<n;o++)if(!Reflect.has(t,r[o]))return!1;for(let o=0;o<n;o++){const c=r[o];if(!l(t[c],e[c]))return!1}return!0},M=Function.prototype.toString;M.call(Object);function E(t){if(!O(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(n=>typeof n=="string"),r={};for(const n of e){const o=t[n];o!==void 0&&(r[n]=E(o))}return r}var O=t=>t&&typeof t=="object"&&t.constructor===Object;function w(t,e){const r=s.useRef(!1),n=s.useRef(!1);s.useEffect(()=>{if(r.current&&n.current)return t();n.current=!0},e),s.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}var P=v("__zag__targetCache",()=>new WeakMap);function S(t,e){const{actions:r,context:n,sync:o}=e??{},c=s.useRef(void 0),u=s.useRef(void 0),p=s.useSyncExternalStore(s.useCallback(a=>q(t.state,a,o),[o]),()=>{const a=h(t.state);try{if(c.current&&u.current&&!L(c.current,a,u.current,new WeakMap))return c.current}catch{}return a},()=>h(t.state));t.setOptions({actions:r});const i=s.useMemo(()=>E(n??{}),[n]);w(()=>{const a=Object.entries(i),d=t.contextSnapshot??{};a.map(([f,m])=>({key:f,curr:m,prev:d[f],equal:l(d[f],m)})).every(({equal:f})=>f)||t.setContext(i)},[i]);const y=new WeakMap;s.useEffect(()=>{c.current=p,u.current=y});const g=s.useMemo(()=>new WeakMap,[]);return k(p,y,g,P)}function J(t){return[S(t),t.send]}function j(t){const e=s.useRef(void 0);return e.current||(e.current={v:t()}),e.current.v}var _=typeof document<"u"?s.useLayoutEffect:s.useEffect;function W(t,e){const{state:r,context:n}=e??{},o=j(()=>{const u=typeof t=="function"?t():t;return n&&u.setContext(n),u._created(),u}),c=s.useRef(void 0);return _(()=>{const u=r??c.current;return o.start(u),()=>{o.stop()}},[]),o}function Q(t,e){const r=W(t,e);return[S(r,e),r.send,r]}function X(t,e={}){const{sync:r=!1}=e,n=z(t);return s.useCallback((...o)=>{var c;return r?queueMicrotask(()=>{var u;return(u=n.current)==null?void 0:u.call(n,...o)}):(c=n.current)==null?void 0:c.call(n,...o)},[r,n])}function z(t){const e=s.useRef(t);return e.current=t,e}export{B as L,X as a,Q as b,G as c,J as d,H as n,D as u};

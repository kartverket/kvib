import{r as j}from"./index-C7I6S4tq.js";var je=t=>Array.from(Array(t).keys()),Me=t=>t[0],De=t=>t[t.length-1],Ct=(t,e)=>t.indexOf(e)!==-1,Lt=(t,...e)=>t.concat(e),Nt=(t,...e)=>t.filter(n=>!e.includes(n)),xe=(t,e)=>Ct(t,e)?Nt(t,e):Lt(t,e);function Wt(t){for(;t.length>0;)t.pop();return t}var it=t=>(t==null?void 0:t.constructor.name)==="Array",zt=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!pt(t[n],e[n]))return!1;return!0},pt=(t,e)=>{if(Object.is(t,e))return!0;if(t==null&&e!=null||t!=null&&e==null)return!1;if(typeof(t==null?void 0:t.isEqual)=="function"&&typeof(e==null?void 0:e.isEqual)=="function")return t.isEqual(e);if(typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();if(it(t)&&it(e))return zt(Array.from(t),Array.from(e));if(typeof t!="object"||typeof e!="object")return!1;const n=Object.keys(e??Object.create(null)),r=n.length;for(let a=0;a<r;a++)if(!Reflect.has(t,n[a]))return!1;for(let a=0;a<r;a++){const c=n[a];if(!pt(t[c],e[c]))return!1}return!0},rt=(t,...e)=>(typeof t=="function"?t(...e):t)??void 0,A=t=>t,Ft=()=>{},Kt=(...t)=>(...e)=>{t.forEach(function(n){n==null||n(...e)})},ot=(()=>{let t=0;return()=>(t++,t.toString(36))})(),Yt=(t,e)=>{var n;try{return t()}catch(r){return r instanceof Error&&((n=Error.captureStackTrace)==null||n.call(Error,r,Yt)),e==null?void 0:e()}},Y=t=>Array.isArray(t),gt=t=>t!=null&&typeof t=="object",z=t=>gt(t)&&!Y(t),$t=t=>typeof t=="number"&&!Number.isNaN(t),w=t=>typeof t=="string",$=t=>typeof t=="function",Ce=t=>t==null,yt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),kt=t=>Object.prototype.toString.call(t),vt=Function.prototype.toString,Gt=vt.call(Object),It=t=>{if(!gt(t)||kt(t)!="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=yt(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&vt.call(n)==Gt};function Vt(t,e){const n={},r={},a=new Set(e);for(const c in t)a.has(c)?r[c]=t[c]:n[c]=t[c];return[r,n]}var Le=t=>function(n){return Vt(n,t)};function k(t){if(!qt(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(r=>typeof r=="string"),n={};for(const r of e){const a=t[r];a!==void 0&&(n[r]=k(a))}return n}var qt=t=>t&&typeof t=="object"&&t.constructor===Object;function q(...t){const e=t.length===1?t[0]:t[1],n=t.length===2?t[0]:!0}function F(...t){const e=t.length===1?t[0]:t[1],n=t.length===2?t[0]:!0}const Bt=Symbol(),Z=Symbol(),C="a",mt="f",at="p",Et="c",St="t",wt="h",K="w",Ot="o",At="k";let Ht=(t,e)=>new Proxy(t,e);const U=Object.getPrototypeOf,X=new WeakMap,Pt=t=>t&&(X.has(t)?X.get(t):U(t)===Object.prototype||U(t)===Array.prototype),ct=t=>typeof t=="object"&&t!==null,Ut=t=>Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable),Xt=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(U(t),e)},Jt=(t,e)=>{const n={[mt]:e};let r=!1;const a=(s,o)=>{if(!r){let i=n[C].get(t);if(i||(i={},n[C].set(t,i)),s===K)i[K]=!0;else{let h=i[s];h||(h=new Set,i[s]=h),h.add(o)}}},c=()=>{r=!0,n[C].delete(t)},d={get(s,o){return o===Z?t:(a(At,o),Qt(Reflect.get(s,o),n[C],n[Et],n[St]))},has(s,o){return o===Bt?(c(),!0):(a(wt,o),Reflect.has(s,o))},getOwnPropertyDescriptor(s,o){return a(Ot,o),Reflect.getOwnPropertyDescriptor(s,o)},ownKeys(s){return a(K),Reflect.ownKeys(s)}};return e&&(d.set=d.deleteProperty=()=>!1),[d,n]},bt=t=>t[Z]||t,Qt=(t,e,n,r)=>{if(!Pt(t))return t;let a=r&&r.get(t);if(!a){const o=bt(t);Ut(o)?a=[o,Xt(o)]:a=[o],r==null||r.set(t,a)}const[c,d]=a;let s=n&&n.get(c);return(!s||s[1][mt]!==!!d)&&(s=Jt(c,!!d),s[1][at]=Ht(d||c,s[0]),n&&n.set(c,s)),s[1][C]=e,s[1][Et]=n,s[1][St]=r,s[1][at]},Zt=(t,e)=>{const n=Reflect.ownKeys(t),r=Reflect.ownKeys(e);return n.length!==r.length||n.some((a,c)=>a!==r[c])},te=(t,e,n,r,a=Object.is)=>{if(a(t,e))return!1;if(!ct(t)||!ct(e))return!0;const c=n.get(bt(t));if(!c)return!0;if(r){if(r.get(t)===e)return!1;r.set(t,e)}let d=null;for(const s of c[wt]||[])if(d=Reflect.has(t,s)!==Reflect.has(e,s),d)return d;if(c[K]===!0){if(d=Zt(t,e),d)return d}else for(const s of c[Ot]||[]){const o=!!Reflect.getOwnPropertyDescriptor(t,s),i=!!Reflect.getOwnPropertyDescriptor(e,s);if(d=o!==i,d)return d}for(const s of c[At]||[])if(d=te(t[s],e[s],n,r,a),d)return d;if(d===null)throw new Error("invalid used");return d},ee=t=>Pt(t)&&t[Z]||null,ht=(t,e=!0)=>{X.set(t,e)};function se(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Rt(t,e){const n=se();return n?(n[t]||(n[t]=e()),n[t]):e()}var L=Rt("__zag__refSet",()=>new WeakSet),ne=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,ie=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,re=t=>typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeName=="string",oe=t=>ne(t)||ie(t)||re(t),J=t=>t!==null&&typeof t=="object",Q=t=>J(t)&&!L.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!oe(t)&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise);function ft(t,e,n){typeof n.value=="object"&&!Q(n.value)&&(n.value=R(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function R(t){if(typeof t!="object")return t;var e=0,n,r,a,c=Object.prototype.toString.call(t);if(c==="[object Object]"?a=Object.create(Object.getPrototypeOf(t)||null):c==="[object Array]"?a=Array(t.length):c==="[object Set]"?(a=new Set,t.forEach(function(d){a.add(R(d))})):c==="[object Map]"?(a=new Map,t.forEach(function(d,s){a.set(R(s),R(d))})):c==="[object Date]"?a=new Date(+t):c==="[object RegExp]"?a=new RegExp(t.source,t.flags):c==="[object DataView]"?a=new t.constructor(R(t.buffer)):c==="[object ArrayBuffer]"?a=t.slice(0):c==="[object Blob]"?a=t.slice():c.slice(-6)==="Array]"&&(a=new t.constructor(t)),a){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)ft(a,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(a,n=r[e])&&a[n]===t[n]||ft(a,n,Object.getOwnPropertyDescriptor(t,n))}return a||t}var b=Rt("__zag__proxyStateMap",()=>new WeakMap),ae=(t=Object.is,e=(s,o)=>new Proxy(s,o),n=new WeakMap,r=(s,o)=>{const i=n.get(s);if((i==null?void 0:i[0])===o)return i[1];const h=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s));return ht(h,!0),n.set(s,[o,h]),Reflect.ownKeys(s).forEach(u=>{const l=Reflect.get(s,u);L.has(l)?(ht(l,!1),h[u]=l):b.has(l)?h[u]=M(l):h[u]=l}),Object.freeze(h)},a=new WeakMap,c=[1,1],d=s=>{if(!J(s))throw new Error("object required");const o=a.get(s);if(o)return o;let i=c[0];const h=new Set,u=(v,p=++c[0])=>{i!==p&&(i=p,h.forEach(y=>y(v,p)))};let l=c[1];const g=(v=++c[1])=>(l!==v&&!h.size&&(l=v,E.forEach(([p])=>{const y=p[1](v);y>i&&(i=y)})),i),m=v=>(p,y)=>{const S=[...p];S[1]=[v,...S[1]],u(S,y)},E=new Map,_=(v,p)=>{if(h.size){const y=p[3](m(v));E.set(v,[p,y])}else E.set(v,[p])},I=v=>{var y;const p=E.get(v);p&&(E.delete(v),(y=p[1])==null||y.call(p))},et=v=>(h.add(v),h.size===1&&E.forEach(([y,S],T)=>{const D=y[3](m(T));E.set(T,[y,D])}),()=>{h.delete(v),h.size===0&&E.forEach(([y,S],T)=>{S&&(S(),E.set(T,[y]))})}),V=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s)),N=e(V,{deleteProperty(v,p){const y=Reflect.get(v,p);I(p);const S=Reflect.deleteProperty(v,p);return S&&u(["delete",[p],y]),S},set(v,p,y,S){var st;const T=Reflect.has(v,p),D=Reflect.get(v,p,S);if(T&&(t(D,y)||a.has(y)&&t(D,a.get(y))))return!0;I(p),J(y)&&(y=ee(y)||y);let W=y;if(!((st=Object.getOwnPropertyDescriptor(v,p))!=null&&st.set)){!b.has(y)&&Q(y)&&(W=tt(y));const nt=!L.has(W)&&b.get(W);nt&&_(p,nt)}return Reflect.set(v,p,W,S),u(["set",[p],y,D]),!0}});a.set(s,N);const xt=[V,g,r,et];return b.set(N,xt),Reflect.ownKeys(s).forEach(v=>{const p=Object.getOwnPropertyDescriptor(s,v);p.get||p.set?Object.defineProperty(V,v,p):N[v]=s[v]}),N})=>[d,b,L,t,e,Q,n,r,a,c],[ce]=ae();function tt(t={}){return ce(t)}function ut(t,e,n){const r=b.get(t);let a;const c=[],d=r[3];let s=!1;const i=d(h=>{if(c.push(h),n){e(c.splice(0));return}a||(a=Promise.resolve().then(()=>{a=void 0,s&&e(c.splice(0))}))});return s=!0,()=>{s=!1,i()}}function M(t){const e=b.get(t),[n,r,a]=e;return a(n,r())}function lt(t){return L.add(t),t}function he(t,e){Object.keys(e).forEach(a=>{if(Object.getOwnPropertyDescriptor(t,a))throw new Error("object property already defined");const c=e[a],{get:d,set:s}=typeof c=="function"?{get:c}:c,o={};o.get=()=>d(M(r)),s&&(o.set=i=>s(r,i)),Object.defineProperty(t,a,o)});const r=tt(t);return r}var fe=Object.defineProperty,ue=(t,e,n)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f=(t,e,n)=>ue(t,typeof e!="symbol"?e+"":e,n);function _t(t,...e){for(const n of e){const r=k(n);for(const a in r)It(n[a])?(t[a]||(t[a]={}),_t(t[a],n[a])):t[a]=n[a]}return t}function O(t){return w(t)?{type:t}:t}function P(t){return t?Y(t)?t.slice():[t]:[]}function Tt(t){return z(t)&&t.predicate!=null}var jt=()=>!0;function G(t,e,n,r){return a=>{var c;return w(a)?!!((c=t[a])!=null&&c.call(t,e,n,r)):$(a)?a(e,n,r):a.predicate(t)(e,n,r)}}function le(...t){return{predicate:e=>(n,r,a)=>t.map(G(e,n,r,a)).some(Boolean)}}function de(...t){return{predicate:e=>(n,r,a)=>t.map(G(e,n,r,a)).every(Boolean)}}function pe(t){return{predicate:e=>(n,r,a)=>!G(e,n,r,a)(t)}}function ge(...t){return(e,n,r)=>r.state.matches(...t)}var Ne={or:le,and:de,not:pe,stateIn:ge};function We(t){return{predicate:e=>(n,r,a)=>{var c;return(c=t.find(d=>{const s=d.guard??jt;return G(e,n,r,a)(s)}))==null?void 0:c.actions}}}function Mt(t,e){return t=t??jt,(n,r,a)=>{if(w(t)){const c=e[t];return $(c)?c(n,r,a):c}return Tt(t)?t.predicate(e)(n,r,a):t==null?void 0:t(n,r,a)}}function B(t,e){return(n,r,a)=>Tt(t)?t.predicate(e)(n,r,a):t}function ye(t){var c,d;const e=t.computed??A({}),n=t.context??A({}),r=t.initial?(d=(c=t.states)==null?void 0:c[t.initial])==null?void 0:d.tags:[],a=tt({value:t.initial??"",previousValue:"",event:A({}),previousEvent:A({}),context:he(n,e),done:!1,tags:r??[],hasTag(s){return this.tags.includes(s)},matches(...s){return s.includes(this.value)},can(s){return A(this).nextEvents.includes(s)},get nextEvents(){var i,h;const s=((h=(i=t.states)==null?void 0:i[this.value])==null?void 0:h.on)??{},o=(t==null?void 0:t.on)??{};return Object.keys({...s,...o})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return A(a)}function x(t,e){return(n,r)=>{if($t(t))return t;if($(t))return t(n,r);if(w(t)){const a=Number.parseFloat(t);if(!Number.isNaN(a))return a;if(e){const c=e==null?void 0:e[t];return F(c==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${t}\`. It doesn't exist in \`options.delays\``),$(c)?c(n,r):c}}}}function ve(t){return w(t)?{target:t}:t}function me(t,e){return(n,r,a)=>P(t).map(ve).find(c=>Mt(c.guard,e)(n,r,a)??c.target??c.actions)}var Dt=class{constructor(t,e){var n,r,a,c,d;f(this,"status","Not Started"),f(this,"state"),f(this,"initialState"),f(this,"initialContext"),f(this,"id"),f(this,"type","machine"),f(this,"activityEvents",new Map),f(this,"delayedEvents",new Map),f(this,"stateListeners",new Set),f(this,"doneListeners",new Set),f(this,"contextWatchers",new Set),f(this,"removeStateListener",Ft),f(this,"parent"),f(this,"children",new Map),f(this,"guardMap"),f(this,"actionMap"),f(this,"delayMap"),f(this,"activityMap"),f(this,"sync"),f(this,"options"),f(this,"config"),f(this,"_created",()=>{if(!this.config.created)return;const s=O("machine.created");this.executeActions(this.config.created,s)}),f(this,"start",s=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=ut(this.state,()=>{this.stateListeners.forEach(g=>{g(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(O("machine.start"),P(this.config.activities),"machine.start"),this.executeActions(this.config.entry,O("machine.start"));const o=O("machine.init"),i=z(s)?s.value:s,h=z(s)?s.context:void 0;h&&this.setContext(h);const u={target:i??this.config.initial},l=this.getNextStateInfo(u,o);return this.initialState=l,this.performStateChangeEffects(this.state.value,l,o),this}),f(this,"setupContextWatchers",()=>{const{watch:s}=this.config;if(!s)return;let o=M(this.state.context);const i=ut(this.state.context,()=>{var u;const h=M(this.state.context);for(const[l,g]of Object.entries(s))(((u=this.options.compareFns)==null?void 0:u[l])??Object.is)(o[l],h[l])||this.executeActions(g,this.state.event);o=h});this.contextWatchers.add(i)}),f(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,O("machine.stop")),this.executeActions(this.config.exit,O("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),f(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),f(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(s=>s()),this.contextWatchers.clear()}),f(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(s=>{s.forEach(o=>o())}),this.delayedEvents.clear()}),f(this,"stopActivities",s=>{var o,i;s?((o=this.activityEvents.get(s))==null||o.forEach(h=>h()),(i=this.activityEvents.get(s))==null||i.clear(),this.activityEvents.delete(s)):(this.activityEvents.forEach(h=>{h.forEach(u=>u()),h.clear()}),this.activityEvents.clear())}),f(this,"sendChild",(s,o)=>{const i=O(s),h=rt(o,this.contextSnapshot),u=this.children.get(h);u||F(`[@zag-js/core] Cannot send '${i.type}' event to unknown child`),u.send(i)}),f(this,"stopChild",s=>{this.children.has(s)||F(`[@zag-js/core > stop-child] Cannot stop unknown child ${s}`),this.children.get(s).stop(),this.children.delete(s)}),f(this,"removeChild",s=>{this.children.delete(s)}),f(this,"stopChildren",()=>{this.children.forEach(s=>s.stop()),this.children.clear()}),f(this,"setParent",s=>{this.parent=s}),f(this,"spawn",(s,o)=>{const i=rt(s);return o&&(i.id=o),i.type="machine.actor",i.setParent(this),this.children.set(i.id,A(i)),i.onDone(()=>{this.removeChild(i.id)}).start(),A(lt(i))}),f(this,"stopActivity",s=>{var i;if(!this.state.value)return;const o=this.activityEvents.get(this.state.value);(i=o==null?void 0:o.get(s))==null||i(),o==null||o.delete(s)}),f(this,"addActivityCleanup",(s,o,i)=>{var h;s&&(this.activityEvents.has(s)?(h=this.activityEvents.get(s))==null||h.set(o,i):this.activityEvents.set(s,new Map([[o,i]])))}),f(this,"setState",s=>{this.state.previousValue=this.state.value,this.state.value=s;const o=this.getStateNode(s);s==null?Wt(this.state.tags):this.state.tags=P(o==null?void 0:o.tags)}),f(this,"setContext",s=>{s&&_t(this.state.context,k(s))}),f(this,"setOptions",s=>{const o=k(s);this.actionMap={...this.actionMap,...o.actions},this.delayMap={...this.delayMap,...o.delays},this.activityMap={...this.activityMap,...o.activities},this.guardMap={...this.guardMap,...o.guards}}),f(this,"getStateNode",s=>{var o;if(s)return(o=this.config.states)==null?void 0:o[s]}),f(this,"getNextStateInfo",(s,o)=>{const i=this.determineTransition(s,o),h=!(i!=null&&i.target),u=(i==null?void 0:i.target)??this.state.value,l=this.state.value!==u,g=this.getStateNode(u),E={reenter:!h&&!l&&!(i!=null&&i.internal),transition:i,stateNode:g,target:u,changed:l};return this.log("NextState:",`[${o.type}]`,this.state.value,"---->",E.target),E}),f(this,"getAfterActions",(s,o)=>{let i;const h=this.state.value;return{entry:()=>{i=globalThis.setTimeout(()=>{const u=this.getNextStateInfo(s,this.state.event);this.performStateChangeEffects(h,u,this.state.event)},o)},exit:()=>{globalThis.clearTimeout(i)}}}),f(this,"getDelayedEventActions",s=>{const o=this.getStateNode(s),i=this.state.event;if(!o||!o.after)return;const h=[],u=[];if(Y(o.after)){const l=this.determineTransition(o.after,i);if(!l)return;if(!yt(l,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(l)}`);const m=x(l.delay,this.delayMap)(this.contextSnapshot,i),E=this.getAfterActions(l,m);return h.push(E.entry),u.push(E.exit),{entries:h,exits:u}}if(z(o.after))for(const l in o.after){const g=o.after[l],E=x(l,this.delayMap)(this.contextSnapshot,i),_=this.getAfterActions(g,E);h.push(_.entry),u.push(_.exit)}return{entries:h,exits:u}}),f(this,"executeActions",(s,o)=>{var h;const i=B(s,this.guardMap)(this.contextSnapshot,o,this.guardMeta);for(const u of P(i)){const l=w(u)?(h=this.actionMap)==null?void 0:h[u]:u;q(w(u)&&!l,`[@zag-js/core > execute-actions] No implementation found for action: \`${u}\``),l==null||l(this.state.context,o,this.meta)}}),f(this,"executeActivities",(s,o,i)=>{var h;for(const u of o){const l=w(u)?(h=this.activityMap)==null?void 0:h[u]:u;if(!l){q(`[@zag-js/core > execute-activity] No implementation found for activity: \`${u}\``);continue}const g=l(this.state.context,s,this.meta);if(g){const m=w(u)?u:u.name||ot();this.addActivityCleanup(i??this.state.value,m,g)}}}),f(this,"createEveryActivities",(s,o)=>{if(s)if(Y(s)){const i=P(s).find(g=>{const m=g.delay,_=x(m,this.delayMap)(this.contextSnapshot,this.state.event);return Mt(g.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??_!=null});if(!i)return;const u=x(i.delay,this.delayMap)(this.contextSnapshot,this.state.event);o(()=>{const g=globalThis.setInterval(()=>{this.executeActions(i.actions,this.state.event)},u);return()=>{globalThis.clearInterval(g)}})}else for(const i in s){const h=s==null?void 0:s[i],l=x(i,this.delayMap)(this.contextSnapshot,this.state.event);o(()=>{const m=globalThis.setInterval(()=>{this.executeActions(h,this.state.event)},l);return()=>{globalThis.clearInterval(m)}})}}),f(this,"setEvent",s=>{this.state.previousEvent=this.state.event,this.state.event=lt(O(s))}),f(this,"performExitEffects",(s,o)=>{const i=this.state.value;if(i==="")return;const h=s?this.getStateNode(s):void 0;this.stopActivities(i);const u=B(h==null?void 0:h.exit,this.guardMap)(this.contextSnapshot,o,this.guardMeta),l=P(u),g=this.delayedEvents.get(i);g&&l.push(...g),this.executeActions(l,o),this.delayedEvents.delete(i)}),f(this,"performEntryEffects",(s,o)=>{const i=this.getStateNode(s),h=P(i==null?void 0:i.activities);this.createEveryActivities(i==null?void 0:i.every,m=>{h.unshift(m)}),h.length>0&&this.executeActivities(o,h);const u=B(i==null?void 0:i.entry,this.guardMap)(this.contextSnapshot,o,this.guardMeta),l=P(u),g=this.getDelayedEventActions(s);i!=null&&i.after&&g&&(this.delayedEvents.set(s,g==null?void 0:g.exits),l.push(...g.entries)),this.executeActions(l,o),(i==null?void 0:i.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(m=>{m(this.stateSnapshot)}),this.stop())}),f(this,"performTransitionEffects",(s,o)=>{const i=this.determineTransition(s,o);this.executeActions(i==null?void 0:i.actions,o)}),f(this,"performStateChangeEffects",(s,o,i)=>{this.setEvent(i);const h=o.changed||o.reenter;h&&this.performExitEffects(s,i),this.performTransitionEffects(o.transition,i),this.setState(o.target),h&&this.performEntryEffects(o.target,i)}),f(this,"determineTransition",(s,o)=>{const i=me(s,this.guardMap);return i==null?void 0:i(this.contextSnapshot,o,this.guardMeta)}),f(this,"sendParent",s=>{var i;this.parent||F("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const o=O(s);(i=this.parent)==null||i.send(o)}),f(this,"log",(...s)=>{}),f(this,"send",s=>{const o=O(s);this.transition(this.state.value,o)}),f(this,"transition",(s,o)=>{var g,m;const i=w(s)?this.getStateNode(s):s==null?void 0:s.stateNode,h=O(o);if(!i&&!this.config.on){const E=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${s}, \`event\`: ${h.type}`;q(E);return}const u=((g=i==null?void 0:i.on)==null?void 0:g[h.type])??((m=this.config.on)==null?void 0:m[h.type]),l=this.getNextStateInfo(u,h);return this.performStateChangeEffects(this.state.value,l,h),l.stateNode}),f(this,"subscribe",s=>(this.stateListeners.add(s),this.status==="Running"&&s(this.stateSnapshot),()=>{this.stateListeners.delete(s)})),f(this,"onDone",s=>(this.doneListeners.add(s),this)),f(this,"onTransition",s=>(this.stateListeners.add(s),this.status==="Running"&&s(this.stateSnapshot),this)),this.config=R(t),this.options=R(e??{}),this.id=this.config.id??`machine-${ot()}`,this.guardMap=((n=this.options)==null?void 0:n.guards)??{},this.actionMap=((r=this.options)==null?void 0:r.actions)??{},this.delayMap=((a=this.options)==null?void 0:a.delays)??{},this.activityMap=((c=this.options)==null?void 0:c.activities)??{},this.sync=((d=this.options)==null?void 0:d.sync)??!1,this.state=ye(this.config),this.initialContext=M(this.state.context)}get stateSnapshot(){return A(M(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const t=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return t.stateSnapshot},get initialContext(){return t.initialContext},get initialState(){var e;return((e=t.initialState)==null?void 0:e.target)??""}}}get meta(){var t;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((t=this.initialState)==null?void 0:t.target)??"",getState:()=>this.stateSnapshot,getAction:e=>this.actionMap[e],getGuard:e=>this.guardMap[e]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const t=this.getState();return{value:t.value,tags:t.tags}}},ze=(t,e)=>new Dt(t,e),Fe=t=>t instanceof Dt||(t==null?void 0:t.type)==="machine",Ee=(...t)=>t.map(e=>{var n;return(n=e==null?void 0:e.trim)==null?void 0:n.call(e)}).filter(Boolean).join(" "),Se=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,dt=t=>{const e={};let n;for(;n=Se.exec(t);)e[n[1]]=n[2];return e},we=(t,e)=>{if(w(t)){if(w(e))return`${t};${e}`;t=dt(t)}else w(e)&&(e=dt(e));return Object.assign({},t??{},e??{})};function Oe(...t){let e={};for(let n of t){for(let r in e){if(r.startsWith("on")&&typeof e[r]=="function"&&typeof n[r]=="function"){e[r]=Kt(n[r],e[r]);continue}if(r==="className"||r==="class"){e[r]=Ee(e[r],n[r]);continue}if(r==="style"){e[r]=we(e[r],n[r]);continue}e[r]=n[r]!==void 0?n[r]:e[r]}for(let r in n)e[r]===void 0&&(e[r]=n[r])}return e}function Ae(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Pe(...t){return e=>{for(const n of t)Ae(n,e)}}function be(t){var r,a;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const H=t=>{const e=j.memo(j.forwardRef((n,r)=>{const{asChild:a,children:c,...d}=n;if(!a)return j.createElement(t,{...d,ref:r},c);const s=j.Children.only(c);if(!j.isValidElement(s))return null;const o=be(s);return j.cloneElement(s,{...Oe(d,s.props),ref:r?Pe(r,o):o})}));return e.displayName=t.displayName||t.name,e},Re=()=>{const t=new Map;return new Proxy(H,{apply(e,n,r){return H(r[0])},get(e,n){const r=n;return t.has(r)||t.set(r,H(r)),t.get(r)}})},Ke=Re();export{w as A,z as B,yt as C,xe as D,We as E,F,$t as G,tt as H,je as I,Fe as J,ot as K,Ke as a,M as b,Pe as c,Qt as d,Kt as e,k as f,Rt as g,ze as h,te as i,pt as j,Me as k,De as l,Oe as m,Ne as n,Le as o,Nt as p,Lt as q,lt as r,ut as s,Ft as t,Ce as u,rt as v,q as w,$ as x,Yt as y,A as z};

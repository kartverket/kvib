import{u as v}from"./index-DJS8qWMq.js";import{r as i}from"./index-BwDkhjyp.js";function h(s){const{loading:o,src:e,srcSet:t,onLoad:l,onError:u,crossOrigin:c,sizes:d,ignoreFallback:f}=s,[g,m]=i.useState("pending");i.useEffect(()=>{m(e?"loading":"pending")},[e]);const n=i.useRef(),E=i.useCallback(()=>{if(!e)return;a();const r=new Image;r.src=e,c&&(r.crossOrigin=c),t&&(r.srcset=t),d&&(r.sizes=d),o&&(r.loading=o),r.onload=p=>{a(),m("loaded"),l==null||l(p)},r.onerror=p=>{a(),m("failed"),u==null||u(p)},n.current=r},[e,c,t,d,l,u,o]),a=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return v(()=>{if(!f)return g==="loading"&&E(),()=>{a()}},[g,E,f]),f?"loaded":g}var I=(s,o)=>s!=="loaded"&&o==="beforeLoadOrError"||s==="failed"&&o==="onError";export{I as s,h as u};

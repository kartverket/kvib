import{j as s}from"./extends-CwFRzn3r.js";import{r as d}from"./index-BwDkhjyp.js";import{r as h}from"./index-CS4BWtGh.js";import{c as C}from"./context-CBKykClo.js";import{u as f}from"./use-safe-layout-effect-BnICyLBj.js";const[N,E]=C({strict:!1,name:"PortalManagerContext"});function y(e){const{children:c,zIndex:n}=e;return s.jsx(N,{value:{zIndex:n},children:c})}y.displayName="PortalManager";const[v,z]=C({strict:!1,name:"PortalContext"}),m="chakra-portal",I=".chakra-portal",M=e=>s.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),R=e=>{const{appendToParentPortal:c,children:n}=e,[a,l]=d.useState(null),t=d.useRef(null),[,r]=d.useState({});d.useEffect(()=>r({}),[]);const p=z(),o=E();f(()=>{if(!a)return;const u=a.ownerDocument,i=c?p??u.body:u.body;if(!i)return;t.current=u.createElement("div"),t.current.className=m,i.appendChild(t.current),r({});const x=t.current;return()=>{i.contains(x)&&i.removeChild(x)}},[a]);const j=o!=null&&o.zIndex?s.jsx(M,{zIndex:o==null?void 0:o.zIndex,children:n}):n;return t.current?h.createPortal(s.jsx(v,{value:t.current,children:j}),t.current):s.jsx("span",{ref:u=>{u&&l(u)}})},S=e=>{const{children:c,containerRef:n,appendToParentPortal:a}=e,l=n.current,t=l??(typeof window<"u"?document.body:void 0),r=d.useMemo(()=>{const o=l==null?void 0:l.ownerDocument.createElement("div");return o&&(o.className=m),o},[l]),[,p]=d.useState({});return f(()=>p({}),[]),f(()=>{if(!(!r||!t))return t.appendChild(r),()=>{t.removeChild(r)}},[r,t]),t&&r?h.createPortal(s.jsx(v,{value:a?r:null,children:c}),r):null};function P(e){const c={appendToParentPortal:!0,...e},{containerRef:n,...a}=c;return n?s.jsx(S,{containerRef:n,...a}):s.jsx(R,{...a})}P.className=m;P.selector=I;P.displayName="Portal";export{P,y as a};

import{r as m}from"./index-BwDkhjyp.js";import{u as v}from"./use-callback-ref-DA6UG1mJ.js";function p(e){const{ref:o,handler:t,enabled:i=!0}=e,u=v(t),n=m.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;m.useEffect(()=>{if(!i)return;const a=s=>{c(s,o)&&(n.isPointerDown=!0)},f=s=>{if(n.ignoreEmulatedMouseEvents){n.ignoreEmulatedMouseEvents=!1;return}n.isPointerDown&&t&&c(s,o)&&(n.isPointerDown=!1,u(s))},d=s=>{n.ignoreEmulatedMouseEvents=!0,t&&n.isPointerDown&&c(s,o)&&(n.isPointerDown=!1,u(s))},r=E(o.current);return r.addEventListener("mousedown",a,!0),r.addEventListener("mouseup",f,!0),r.addEventListener("touchstart",a,!0),r.addEventListener("touchend",d,!0),()=>{r.removeEventListener("mousedown",a,!0),r.removeEventListener("mouseup",f,!0),r.removeEventListener("touchstart",a,!0),r.removeEventListener("touchend",d,!0)}},[t,o,u,n,i])}function c(e,o){var i,u;const t=((i=e.composedPath)==null?void 0:i.call(e)[0])??e.target;return t&&!E(t).contains(t)?!1:!((u=o.current)!=null&&u.contains(t))}function E(e){return(e==null?void 0:e.ownerDocument)??document}export{p as u};

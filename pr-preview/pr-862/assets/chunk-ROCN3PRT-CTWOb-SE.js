import{f as O,a as W,c as U,b as A,e as u,o as ce,x as de}from"./chunk-ZJJGQIVY-Dk0gAx5w.js";import{j as w}from"./extends-CwFRzn3r.js";import{u as fe}from"./index-CFS2lEUc.js";import{u as be}from"./index-DJS8qWMq.js";import{u as me}from"./index-DEiKcbOK.js";import{u as ve}from"./index-DjrpCY14.js";import{m as h}from"./index-Bdxaq0s4.js";import{u as Ee}from"./index-DdaX-njP.js";import{r as a}from"./index-BwDkhjyp.js";import{c as Q}from"./index-CHDWSgKD.js";import{a as Ce}from"./chunk-DMO4EI7P-CbM7tafX.js";var[pe,X]=Q({name:"EditableStylesContext",errorMessage:`useEditableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Editable />" `}),[ge,Y]=Q({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),Z={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent"},ye=O(function(o,c){const{getInputProps:d}=Y(),i=X(),C=d(o,c),t=W("chakra-editable__input",o.className);return w.jsx(U.input,{...C,__css:{outline:0,...Z,...i.input},className:t})});ye.displayName="EditableInput";var he=O(function(o,c){const{getPreviewProps:d}=Y(),i=X(),C=d(o,c),t=W("chakra-editable__preview",o.className);return w.jsx(U.span,{...C,__css:{cursor:"text",display:"inline-block",...Z,...i.preview},className:t})});he.displayName="EditablePreview";function J(b,o){return b?b===o||b.contains(o):!1}function ke(b={}){const{onChange:o,onCancel:c,onSubmit:d,onBlur:i,value:C,isDisabled:t,defaultValue:N,startWithEditView:F,isPreviewFocusable:x=!0,submitOnBlur:S=!0,selectAllOnFocus:k=!0,placeholder:m,onEdit:$,finalFocusRef:z,...ee}=b,K=Ee($),te=!!(F&&!t),[l,V]=a.useState(te),[s,_]=ve({defaultValue:N||"",value:C,onChange:o}),[g,H]=a.useState(s),v=a.useRef(null),ne=a.useRef(null),L=a.useRef(null),j=a.useRef(null),M=a.useRef(null);fe({ref:v,enabled:l,elements:[j,M]});const B=!l&&!t;be(()=>{var e,n;l&&((e=v.current)==null||e.focus(),k&&((n=v.current)==null||n.select()))},[]),me(()=>{var e,n,E,r;if(!l){z?(e=z.current)==null||e.focus():(n=L.current)==null||n.focus();return}(E=v.current)==null||E.focus(),k&&((r=v.current)==null||r.select()),K==null||K()},[l,K,k]);const P=a.useCallback(()=>{B&&V(!0)},[B]),y=a.useCallback(()=>{H(s)},[s]),f=a.useCallback(()=>{V(!1),_(g),c==null||c(g),i==null||i(g)},[c,i,_,g]),p=a.useCallback(()=>{V(!1),H(s),d==null||d(s),i==null||i(g)},[s,d,i,g]);a.useEffect(()=>{if(l)return;const e=v.current;(e==null?void 0:e.ownerDocument.activeElement)===e&&(e==null||e.blur())},[l]);const R=a.useCallback(e=>{_(e.currentTarget.value)},[_]),q=a.useCallback(e=>{const n=e.key,r={Escape:f,Enter:I=>{!I.shiftKey&&!I.metaKey&&p()}}[n];r&&(e.preventDefault(),r(e))},[f,p]),G=a.useCallback(e=>{const n=e.key,r={Escape:f}[n];r&&(e.preventDefault(),r(e))},[f]),T=s.length===0,D=a.useCallback(e=>{var n;if(!l)return;const E=e.currentTarget.ownerDocument,r=(n=e.relatedTarget)!=null?n:E.activeElement,I=J(j.current,r),re=J(M.current,r);!I&&!re&&(S?p():f())},[S,p,f,l]),ae=a.useCallback((e={},n=null)=>{const E=B&&x?0:void 0;return{...e,ref:h(n,ne),children:T?m:s,hidden:l,"aria-disabled":A(t),tabIndex:E,onFocus:u(e.onFocus,P,y)}},[t,l,B,x,T,P,y,m,s]),le=a.useCallback((e={},n=null)=>({...e,hidden:!l,placeholder:m,ref:h(n,v),disabled:t,"aria-disabled":A(t),value:s,onBlur:u(e.onBlur,D),onChange:u(e.onChange,R),onKeyDown:u(e.onKeyDown,q),onFocus:u(e.onFocus,y)}),[t,l,D,R,q,y,m,s]),oe=a.useCallback((e={},n=null)=>({...e,hidden:!l,placeholder:m,ref:h(n,v),disabled:t,"aria-disabled":A(t),value:s,onBlur:u(e.onBlur,D),onChange:u(e.onChange,R),onKeyDown:u(e.onKeyDown,G),onFocus:u(e.onFocus,y)}),[t,l,D,R,G,y,m,s]),se=a.useCallback((e={},n=null)=>({"aria-label":"Edit",...e,type:"button",onClick:u(e.onClick,P),ref:h(n,L),disabled:t}),[P,t]),ie=a.useCallback((e={},n=null)=>({...e,"aria-label":"Submit",ref:h(M,n),type:"button",onClick:u(e.onClick,p),disabled:t}),[p,t]),ue=a.useCallback((e={},n=null)=>({"aria-label":"Cancel",id:"cancel",...e,ref:h(j,n),type:"button",onClick:u(e.onClick,f),disabled:t}),[f,t]);return{isEditing:l,isDisabled:t,isValueEmpty:T,value:s,onEdit:P,onCancel:f,onSubmit:p,getPreviewProps:ae,getInputProps:le,getTextareaProps:oe,getEditButtonProps:se,getSubmitButtonProps:ie,getCancelButtonProps:ue,htmlProps:ee}}var Pe=O(function(o,c){const d=Ce("Editable",o),i=ce(o),{htmlProps:C,...t}=ke(i),{isEditing:N,onSubmit:F,onCancel:x,onEdit:S}=t,k=W("chakra-editable",o.className),m=de(o.children,{isEditing:N,onSubmit:F,onCancel:x,onEdit:S});return w.jsx(ge,{value:t,children:w.jsx(pe,{value:d,children:w.jsx(U.div,{ref:c,...C,className:k,children:m})})})});Pe.displayName="Editable";export{Pe as E,X as a,he as b,Z as c,ye as d,Y as u};

import{j as i}from"./extends-CwFRzn3r.js";import{r}from"./index-BwDkhjyp.js";import{u as ae,c as R}from"./use-popper-DwNTykfS.js";import{u as ce}from"./use-disclosure-CdGn7wGE.js";import{u as H}from"./use-event-listener-DbiM-QVt.js";import{m as le}from"./use-merge-refs-Bdxaq0s4.js";import{c as x}from"./call-all-DDzecCnU.js";import{i as ue}from"./is-element-C52yPwBl.js";import{u as pe}from"./use-theme-CBfqdygA.js";import{P as me}from"./portal-DTuMj-Dh.js";import{c as h}from"./factory-C6UFhaBW.js";import{f as de}from"./forward-ref-BWI-Phbn.js";import{u as fe,o as ge}from"./use-style-config-YUvqttAg.js";import{m as we}from"./proxy-CQsau1XN.js";import{o as Pe}from"./omit-QLD0Eizt.js";import{p as he}from"./pick-DBnSFT3T.js";import{A as be}from"./index-DVNvNJVv.js";function ve(e){const s=e.ownerDocument.defaultView||window,{overflow:o,overflowX:a,overflowY:l}=s.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(o+l+a)}function ye(e){return e.localName==="html"?e:e.assignedSlot||e.parentElement||e.ownerDocument.documentElement}function U(e){return["html","body","#document"].includes(e.localName)?e.ownerDocument.body:ue(e)&&ve(e)?e:U(ye(e))}function Ce(e,s,o){var a,l;return((l=(a=e.__cssMap)==null?void 0:a[`${s}.${o}`])==null?void 0:l.varRef)??o}const ke={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},X=e=>{var s;return((s=e.current)==null?void 0:s.ownerDocument)||document},N=e=>{var s,o;return((o=(s=e.current)==null?void 0:s.ownerDocument)==null?void 0:o.defaultView)||window};function xe(e={}){const{openDelay:s=0,closeDelay:o=0,closeOnClick:a=!0,closeOnMouseDown:l,closeOnScroll:f,closeOnPointerDown:b=l,closeOnEsc:A=!0,onOpen:E,onClose:L,placement:V,id:W,isOpen:z,defaultIsOpen:B,arrowSize:v=10,arrowShadowColor:T,arrowPadding:F,modifiers:M,isDisabled:u,gutter:g,offset:$,direction:y,...C}=e,{isOpen:n,onOpen:O,onClose:w}=ce({isOpen:z,defaultIsOpen:B,onOpen:E,onClose:L}),{referenceRef:p,getPopperProps:Y,getArrowInnerProps:Z,getArrowProps:ee}=ae({enabled:n,placement:V,arrowPadding:F,modifiers:M,gutter:g,offset:$,direction:y}),oe=r.useId(),D=`tooltip-${W??oe}`,m=r.useRef(null),k=r.useRef(),P=r.useCallback(()=>{k.current&&(clearTimeout(k.current),k.current=void 0)},[]),_=r.useRef(),j=r.useCallback(()=>{_.current&&(clearTimeout(_.current),_.current=void 0)},[]),S=r.useCallback(()=>{j(),w()},[w,j]),q=Ee(m,S),I=r.useCallback(()=>{if(!u&&!k.current){n&&q();const t=N(m);k.current=t.setTimeout(O,s)}},[q,u,n,O,s]),c=r.useCallback(()=>{P();const t=N(m);_.current=t.setTimeout(S,o)},[o,S,P]),G=r.useCallback(()=>{n&&a&&c()},[a,c,n]),J=r.useCallback(()=>{n&&b&&c()},[b,c,n]),te=r.useCallback(t=>{n&&t.key==="Escape"&&c()},[n,c]);H(()=>X(m),"keydown",A?te:void 0),H(()=>{if(!f)return null;const t=m.current;if(!t)return null;const d=U(t);return d.localName==="body"?N(m):d},"scroll",()=>{n&&f&&S()},{passive:!0,capture:!0}),r.useEffect(()=>{u&&(P(),n&&w())},[u,n,w,P]),r.useEffect(()=>()=>{P(),j()},[P,j]),H(()=>m.current,"pointerleave",c);const re=r.useCallback((t={},d=null)=>({...t,ref:le(m,d,p),onPointerEnter:x(t.onPointerEnter,ie=>{ie.pointerType!=="touch"&&I()}),onClick:x(t.onClick,G),onPointerDown:x(t.onPointerDown,J),onFocus:x(t.onFocus,I),onBlur:x(t.onBlur,c),"aria-describedby":n?D:void 0}),[I,c,J,n,D,G,p]),ne=r.useCallback((t={},d=null)=>Y({...t,style:{...t.style,[R.arrowSize.var]:v?`${v}px`:void 0,[R.arrowShadowColor.var]:T}},d),[Y,v,T]),se=r.useCallback((t={},d=null)=>{const Q={...t.style,position:"relative",transformOrigin:R.transformOrigin.varRef};return{ref:d,...C,...t,id:D,role:"tooltip",style:Q}},[C,D]);return{isOpen:n,show:I,hide:c,getTriggerProps:re,getTooltipProps:se,getTooltipPositionerProps:ne,getArrowProps:ee,getArrowInnerProps:Z}}const K="chakra-ui:close-tooltip";function Ee(e,s){return r.useEffect(()=>{const o=X(e);return o.addEventListener(K,s),()=>o.removeEventListener(K,s)},[s,e]),()=>{const o=X(e),a=N(e);o.dispatchEvent(new a.CustomEvent(K))}}const Te=h(we.div),Oe=de((e,s)=>{const o=fe("Tooltip",e),a=ge(e),l=pe(),{children:f,label:b,shouldWrapChildren:A,"aria-label":E,hasArrow:L,bg:V,portalProps:W,background:z,backgroundColor:B,bgColor:v,motionProps:T,animatePresenceProps:F,...M}=a,u=z??B??V??v;if(u){o.bg=u;const p=Ce(l,"colors",u);o[R.arrowBg.var]=p}const g=xe({...M,direction:l.direction}),$=typeof f=="string"||A;let y;if($)y=i.jsx(h.span,{display:"inline-block",tabIndex:0,...g.getTriggerProps(),children:f});else{const p=r.Children.only(f);y=r.cloneElement(p,g.getTriggerProps(p.props,p.ref))}const C=!!E,n=g.getTooltipProps({},s),O=C?Pe(n,["role","id"]):n,w=he(n,["role","id"]);return b?i.jsxs(i.Fragment,{children:[y,i.jsx(be,{...F,children:g.isOpen&&i.jsx(me,{...W,children:i.jsx(h.div,{...g.getTooltipPositionerProps(),__css:{zIndex:o.zIndex,pointerEvents:"none"},children:i.jsxs(Te,{variants:ke,initial:"exit",animate:"enter",exit:"exit",...T,...O,__css:o,children:[b,C&&i.jsx(h.span,{srOnly:!0,...w,children:E}),L&&i.jsx(h.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:i.jsx(h.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:o.bg}})})]})})})})]}):i.jsx(i.Fragment,{children:f})});Oe.displayName="Tooltip";export{Oe as T};

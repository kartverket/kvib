import{m,a as c,c as M}from"./factory-D4yCxYv5.js";import{c as k}from"./create-slot-recipe-context-ChV7OG0U.js";import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-BqsZ9I6k.js";import{c as S,a as A}from"./index-0TWAmYWa.js";import{c as B,f as u}from"./index-HrBoNtfU.js";import{u as O}from"./use-environment-context-C8ubon-d.js";const W=typeof window<"u"?t.useLayoutEffect:t.useEffect,[q,g]=B({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),z=o=>o.children(g()),E=t.forwardRef((o,s)=>{const e=g(),r=m(e.getErrorTextProps(),o);return e.invalid?l.jsx(c.span,{...r,ref:s}):null});E.displayName="FieldsetErrorText";const y=t.forwardRef((o,s)=>{const e=g(),r=m(e.getHelperTextProps(),o);return l.jsx(c.span,{...r,ref:s})});y.displayName="FieldsetHelperText";const w=t.forwardRef((o,s)=>{const e=g(),r=m(e.getLegendProps(),o);return l.jsx(c.legend,{...r,ref:s})});w.displayName="FieldsetLegend";const D=S("fieldset").parts("root","errorText","helperText","legend"),x=D.build(),G=(o={})=>{const{disabled:s=!1,invalid:e=!1}=o,r=O(),n=t.useRef(!1),f=t.useRef(!1),j=t.useId(),T=o.id??j,P=t.useRef(null),p=`fieldset::${T}::legend`,d=`fieldset::${T}::error-text`,i=`fieldset::${T}::helper-text`;W(()=>{const a=P.current;if(!a)return;const v=()=>{const b=r.getRootNode();n.current=!!b.getElementById(d),f.current=!!b.getElementById(i)};v();const H=r.getWindow(),h=new H.MutationObserver(v);return h.observe(a,{childList:!0,subtree:!0}),()=>h.disconnect()},[r,d,i]);const R=t.useMemo(()=>{const a=[];return n.current&&e&&a.push(d),f.current&&a.push(i),a.join(" ")||void 0},[e,d,i]),L=t.useMemo(()=>()=>({...x.root.attrs,ref:P,disabled:s,"data-disabled":u(s),"data-invalid":u(e),"aria-labelledby":p,"aria-describedby":R}),[s,e,p,R]),N=t.useMemo(()=>()=>({id:p,...x.legend.attrs,"data-disabled":u(s),"data-invalid":u(e)}),[p,s,e]),$=t.useMemo(()=>()=>({id:i,...x.helperText.attrs}),[i]),I=t.useMemo(()=>()=>({id:d,...x.errorText.attrs,"aria-live":"polite"}),[d]);return{refs:{rootRef:P},disabled:s,invalid:e,getRootProps:L,getLegendProps:N,getHelperTextProps:$,getErrorTextProps:I}},C=t.forwardRef((o,s)=>{const[e,r]=A()(o,["id","disabled","invalid"]),n=G(e),f=m(n.getRootProps(),r);return l.jsx(q,{value:n,children:l.jsx(c.fieldset,{...f,ref:M(s,n.refs.rootRef)})})});C.displayName="FieldsetRoot";const{withProvider:J,withContext:F}=k({key:"fieldset"}),_=J(C,"root"),ee=F(E,"errorText"),te=F(y,"helperText"),se=F(w,"legend"),oe=F(c.div,"content"),re=z;export{_ as F,se as a,oe as b,W as c,re as d,ee as e,D as f,te as g,g as u};

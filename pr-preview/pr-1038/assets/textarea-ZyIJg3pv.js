import{c as l}from"./create-recipe-context-BC6ck0lV.js";import{j as v}from"./jsx-runtime-D_zvdyIk.js";import{a as x,b as h,g as b}from"./index-juDyHp0C.js";import{r as c}from"./index-Bj2TM2QZ.js";import{m as y,a as w,c as F}from"./factory-D1kTn8Vm.js";import{u as E}from"./use-field-context-Cx-xQZBF.js";var O=e=>{var m,f;if(!e)return;const t=x(e),s=h(e),i=b(e),r=()=>{requestAnimationFrame(()=>{e.style.height="auto";let o;t.boxSizing==="content-box"?o=e.scrollHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):o=e.scrollHeight+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),t.maxHeight!=="none"&&o>parseFloat(t.maxHeight)?(t.overflowY==="hidden"&&(e.style.overflowY="scroll"),o=parseFloat(t.maxHeight)):t.overflowY!=="hidden"&&(e.style.overflowY="hidden"),e.style.height=`${o}px`})};e.addEventListener("input",r),(m=e.form)==null||m.addEventListener("reset",r);const a=Object.getPrototypeOf(e),n=Object.getOwnPropertyDescriptor(a,"value");Object.defineProperty(e,"value",{...n,set(){var o;(o=n==null?void 0:n.set)==null||o.apply(this,arguments),r()}});const p=new s.ResizeObserver(()=>{requestAnimationFrame(()=>r())});p.observe(e);const d=new s.MutationObserver(()=>r());return d.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(f=i.fonts)==null||f.addEventListener("loadingdone",r),()=>{var o,u;e.removeEventListener("input",r),(o=e.form)==null||o.removeEventListener("reset",r),(u=i.fonts)==null||u.removeEventListener("loadingdone",r),p.disconnect(),d.disconnect()}};const g=c.forwardRef((e,t)=>{const{autoresize:s,...i}=e,r=c.useRef(null),a=E(),n=y(a==null?void 0:a.getTextareaProps(),{style:{resize:s?"none":void 0}},i);return c.useEffect(()=>{if(s)return O(r.current)},[s]),v.jsx(w.textarea,{...n,ref:F(t,r)})});g.displayName="FieldTextarea";const{withContext:P}=l({key:"textarea"}),C=P(g);export{C as T};

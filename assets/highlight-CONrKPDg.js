import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{r as d}from"./index-BqsZ9I6k.js";import{c as w}from"./create-recipe-context-CidDYf5s.js";const{withContext:b}=w({key:"mark"}),j=b("mark");var x=(e,t)=>{const r=[],n=(s,a,l)=>{a-s>0&&r.push({start:s,end:a,match:l})};if(e.length===0)n(0,t,!1);else{let s=0;for(const a of e)n(s,a.start,!1),n(a.start,a.end,!0),s=a.end;n(s,t,!1)}return r},y=e=>e.replace(/[|\\{}()[\]^$+*?.-]/g,t=>`\\${t}`);function q(e){const{text:t,query:r,ignoreCase:n,exactMatch:s}=e;if(s){const h=y(r),p=new RegExp(`\\b(${h})\\b`,n?"i":""),g=t.match(p);if(!g||g.index===void 0)return[{text:t,match:!1}];const f=g.index,A=f+g[0].length;return x([{start:f,end:A}],t.length).map(m=>({text:t.slice(m.start,m.end),match:!!m.match}))}const a=n?t.toLowerCase():t,l=n&&typeof r=="string"?r.toLowerCase():r,i=typeof a=="string"?a.indexOf(l):-1;if(i===-1)return[{text:t,match:!1}];const o=i+l.length;return x([{start:i,end:o}],t.length).map(h=>({text:t.slice(h.start,h.end),match:!!h.match}))}var C=(e,t,r)=>{const n=e.filter(Boolean).map(a=>y(a)),s=r?`\\b(${n.join("|")})\\b`:`(${n.join("|")})`;return new RegExp(s,t)},R=(e,t=!0)=>`${e?"i":""}${t?"g":""}`;function $(e){const{text:t,query:r,ignoreCase:n,matchAll:s,exactMatch:a}=e;if(r.length===0)return[{text:t,match:!1}];const l=R(n,s),i=C(Array.isArray(r)?r:[r],l,a),o=[...t.matchAll(i)].map(c=>({start:c.index||0,end:(c.index||0)+c[0].length}));return x(o,e.text.length).map(c=>({text:e.text.slice(c.start,c.end),match:!!c.match}))}var v=e=>{if(e.matchAll==null&&(e.matchAll=Array.isArray(e.query)),!e.matchAll&&Array.isArray(e.query))throw new Error("matchAll must be true when using multiple queries");return e.matchAll?$(e):q(e)};const E=e=>d.useMemo(()=>v(e),[e]);function M(e){const{each:t,fallback:r,children:n}=e;return(t==null?void 0:t.length)===0?r||null:t==null?void 0:t.map(n)}function T(e){const{children:t,query:r,ignoreCase:n,matchAll:s,styles:a}=e;if(typeof t!="string")throw new Error("The children prop of Highlight must be a string");const l=E({query:r,text:t,matchAll:s,ignoreCase:n});return u.jsx(M,{each:l,children:(i,o)=>i.match?u.jsx(j,{css:a,children:i.text},o):u.jsx(d.Fragment,{children:i.text},o)})}export{M as F,T as H,j as M};

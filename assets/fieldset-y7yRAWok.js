import{m as u,a as c,c as N}from"./factory-R3eP5z4B.js";import{c as $}from"./create-slot-recipe-context-L8Dqs-Z3.js";import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-Bj2TM2QZ.js";import{c as H,a as I}from"./index-BqWtAW9h.js";import{c as M,b as k}from"./create-context-CDNpEWXj.js";const S=typeof window<"u"?t.useLayoutEffect:t.useEffect,[A,x]=M({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),B=r=>r.children(x()),h=t.forwardRef((r,s)=>{const e=x(),o=u(e.getErrorTextProps(),r);return e.invalid?l.jsx(c.span,{...o,ref:s}):null});h.displayName="FieldsetErrorText";const b=t.forwardRef((r,s)=>{const e=x(),o=u(e.getHelperTextProps(),r);return l.jsx(c.span,{...o,ref:s})});b.displayName="FieldsetHelperText";const E=t.forwardRef((r,s)=>{const e=x(),o=u(e.getLegendProps(),r);return l.jsx(c.legend,{...o,ref:s})});E.displayName="FieldsetLegend";const O=H("fieldset").parts("root","errorText","helperText","legend"),p=O.build(),W=(r={})=>{const{disabled:s=!1,invalid:e=!1}=r,o=t.useRef(!1),n=t.useRef(!1),f=r.id??t.useId(),g=t.useRef(null),i=`fieldset::${f}::error-text`,a=`fieldset::${f}::helper-text`;S(()=>{const d=g.current;if(!d)return;const T=k(d),v=T.document,P=()=>{o.current=!!v.getElementById(i),n.current=!!v.getElementById(a)};P();const R=new T.MutationObserver(P);return R.observe(d,{childList:!0,subtree:!0}),()=>R.disconnect()},[i,a]);const F=t.useMemo(()=>{const d=[];return o.current&&e&&d.push(i),n.current&&d.push(a),d.join(" ")||void 0},[e,i,a]),w=t.useMemo(()=>()=>({...p.root.attrs,ref:g,disabled:s,"data-disabled":s?"true":void 0,"data-invalid":e?"true":void 0,"aria-describedby":F}),[s,e,F]),C=t.useMemo(()=>()=>({...p.legend.attrs,"data-disabled":s?"true":void 0,"data-invalid":e?"true":void 0}),[s,e]),j=t.useMemo(()=>()=>({id:a,...p.helperText.attrs}),[a]),L=t.useMemo(()=>()=>({id:i,...p.errorText.attrs,"aria-live":"polite"}),[i]);return{refs:{rootRef:g},disabled:s,invalid:e,getRootProps:w,getLegendProps:C,getHelperTextProps:j,getErrorTextProps:L}},y=t.forwardRef((r,s)=>{const[e,o]=I()(r,["id","disabled","invalid"]),n=W(e),f=u(n.getRootProps(),o);return l.jsx(A,{value:n,children:l.jsx(c.fieldset,{...f,ref:N(s,n.refs.rootRef)})})});y.displayName="FieldsetRoot";const{withProvider:q,withContext:m}=$({key:"fieldset"}),U=q(y,"root"),V=m(h,"errorText"),X=m(b,"helperText"),Y=m(E,"legend"),Z=m(c.div,"content"),_=B;export{U as F,Y as a,Z as b,S as c,_ as d,V as e,O as f,X as g,x as u};

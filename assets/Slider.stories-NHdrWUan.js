import{j as o}from"./extends-CwFRzn3r.js";import{r as n,R as Ve}from"./index-BwDkhjyp.js";import{c as et,g as tt,u as rt,a as at}from"./slider-utils-DlyfFmdB.js";import{u as Z}from"./use-callback-ref-DA6UG1mJ.js";import{u as st}from"./use-controllable-state-Dnial3e2.js";import{c as ee,p as ot,r as je,v as we}from"./number-D-Zd7p0h.js";import{u as nt}from"./use-update-effect-CNg9DBIF.js";import{m as te}from"./use-merge-refs-Bdxaq0s4.js";import{a as re,d as v}from"./attr-sHTFgF0E.js";import{c as ae}from"./call-all-DDzecCnU.js";import{u as lt}from"./use-theme-CeOC8r1f.js";import{f as w}from"./forward-ref-BWI-Phbn.js";import{a as it,o as ct}from"./use-style-config-B2siLCbt.js";import{c as C}from"./factory-DBKMNJMh.js";import{c as Ae}from"./context-CBKykClo.js";import{c as R}from"./cx-BDMMs1jM.js";import{T as ut}from"./tooltip-DxxwjYBZ.js";function dt(r){const{min:a=0,max:s=100,onChange:l,value:u,defaultValue:x,isReversed:E,direction:K="ltr",orientation:p="horizontal",id:O,isDisabled:d,isReadOnly:U,onChangeStart:Ee,onChangeEnd:Ke,step:se=1,getAriaValueText:Oe,"aria-valuetext":Ue,"aria-label":$,"aria-labelledby":oe,name:ne,focusThumbOnChange:$e=!0,...le}=r,L=Z(Ee),h=Z(Ke),B=Z(Oe),m=at({isReversed:E,direction:K,orientation:p}),[Le,H]=st({value:u,defaultValue:x??pt(a,s),onChange:l}),[W,ie]=n.useState(!1),[X,ce]=n.useState(!1),Y=!(d||U),q=(s-a)/10,k=se||(s-a)/100,i=ee(Le,a,s),Be=s-i+a,ue=we(m?Be:i,a,s),D=p==="vertical",c=et({min:a,max:s,step:se,isDisabled:d,value:i,isInteractive:Y,isReversed:m,isVertical:D,eventSource:null,focusThumbOnChange:$e,orientation:p}),G=n.useRef(null),de=n.useRef(null),me=n.useRef(null),He=n.useId(),pe=O??He,[fe,be]=[`slider-thumb-${pe}`,`slider-track-${pe}`],We=n.useCallback(e=>{var Pe;if(!G.current)return;const t=c.current;t.eventSource="pointer";const y=G.current.getBoundingClientRect(),{clientX:S,clientY:g}=((Pe=e.touches)==null?void 0:Pe[0])??e,J=D?y.bottom-g:S-y.left,Ze=D?y.height:y.width;let Q=J/Ze;m&&(Q=1-Q);let T=ot(Q,t.min,t.max);return t.step&&(T=parseFloat(je(T,t.min,t.step))),T=ee(T,t.min,t.max),T},[D,m,c]),f=n.useCallback(e=>{const t=c.current;t.isInteractive&&(e=parseFloat(je(e,t.min,k)),e=ee(e,t.min,t.max),H(e))},[k,H,c]),b=n.useMemo(()=>({stepUp(e=k){const t=m?i-e:i+e;f(t)},stepDown(e=k){const t=m?i+e:i-e;f(t)},reset(){f(x||0)},stepTo(e){f(e)}}),[f,m,i,k,x]),he=n.useCallback(e=>{const t=c.current,S={ArrowRight:()=>b.stepUp(),ArrowUp:()=>b.stepUp(),ArrowLeft:()=>b.stepDown(),ArrowDown:()=>b.stepDown(),PageUp:()=>b.stepUp(q),PageDown:()=>b.stepDown(q),Home:()=>f(t.min),End:()=>f(t.max)}[e.key];S&&(e.preventDefault(),e.stopPropagation(),S(e),t.eventSource="keyboard")},[b,f,q,c]),ye=(B==null?void 0:B(i))??Ue,{getThumbStyle:Se,rootStyle:ge,trackStyle:ve,innerTrackStyle:xe}=n.useMemo(()=>{const e=c.current;return tt({isReversed:m,orientation:e.orientation,thumbPercents:[ue]})},[m,ue,c]),ke=n.useCallback(()=>{c.current.focusThumbOnChange&&setTimeout(()=>{var t;return(t=de.current)==null?void 0:t.focus()})},[c]);nt(()=>{const e=c.current;ke(),e.eventSource==="keyboard"&&(h==null||h(e.value))},[i,h]);function Te(e){const t=We(e);t!=null&&t!==c.current.value&&H(t)}rt(me,{onPanSessionStart(e){const t=c.current;t.isInteractive&&(ie(!0),ke(),Te(e),L==null||L(t.value))},onPanSessionEnd(){const e=c.current;e.isInteractive&&(ie(!1),h==null||h(e.value))},onPan(e){c.current.isInteractive&&Te(e)}});const Xe=n.useCallback((e={},t=null)=>({...e,...le,ref:te(t,me),tabIndex:-1,"aria-disabled":re(d),"data-focused":v(X),style:{...e.style,...ge}}),[le,d,X,ge]),Ye=n.useCallback((e={},t=null)=>({...e,ref:te(t,G),id:be,"data-disabled":v(d),style:{...e.style,...ve}}),[d,be,ve]),qe=n.useCallback((e={},t=null)=>({...e,ref:t,style:{...e.style,...xe}}),[xe]),Ge=n.useCallback((e={},t=null)=>({...e,ref:te(t,de),role:"slider",tabIndex:Y?0:void 0,id:fe,"data-active":v(W),"aria-valuetext":ye,"aria-valuemin":a,"aria-valuemax":s,"aria-valuenow":i,"aria-orientation":p,"aria-disabled":re(d),"aria-readonly":re(U),"aria-label":$,"aria-labelledby":$?void 0:oe,style:{...e.style,...Se(0)},onKeyDown:ae(e.onKeyDown,he),onFocus:ae(e.onFocus,()=>ce(!0)),onBlur:ae(e.onBlur,()=>ce(!1))}),[Y,fe,W,ye,a,s,i,p,d,U,$,oe,Se,he]),Je=n.useCallback((e,t=null)=>{const y=!(e.value<a||e.value>s),S=i>=e.value,g=we(e.value,a,s),J={position:"absolute",pointerEvents:"none",...mt({orientation:p,vertical:{bottom:m?`${100-g}%`:`${g}%`},horizontal:{left:m?`${100-g}%`:`${g}%`}})};return{...e,ref:t,role:"presentation","aria-hidden":!0,"data-disabled":v(d),"data-invalid":v(!y),"data-highlighted":v(S),style:{...e.style,...J}}},[d,m,s,a,p,i]),Qe=n.useCallback((e={},t=null)=>({...e,ref:t,type:"hidden",value:i,name:ne}),[ne,i]);return{state:{value:i,isFocused:X,isDragging:W},actions:b,getRootProps:Xe,getTrackProps:Ye,getInnerTrackProps:qe,getThumbProps:Ge,getMarkerProps:Je,getInputProps:Qe}}function mt(r){const{orientation:a,vertical:s,horizontal:l}=r;return a==="vertical"?s:l}function pt(r,a){return a<r?r:r+(a-r)/2}const[ft,N]=Ae({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[bt,F]=Ae({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),_=w((r,a)=>{const s={...r,orientation:(r==null?void 0:r.orientation)??"horizontal"},l=it("Slider",s),u=ct(s),{direction:x}=lt();u.direction=x;const{getInputProps:E,getRootProps:K,...p}=dt(u),O=K(),d=E({},a);return o.jsx(ft,{value:p,children:o.jsx(bt,{value:l,children:o.jsxs(C.div,{...O,className:R("chakra-slider",s.className),__css:l.container,children:[s.children,o.jsx("input",{...d})]})})})});_.displayName="Slider";const M=w((r,a)=>{const{getThumbProps:s}=N(),l=F(),u=s(r,a);return o.jsx(C.div,{...u,className:R("chakra-slider__thumb",r.className),__css:l.thumb})});M.displayName="SliderThumb";const z=w((r,a)=>{const{getTrackProps:s}=N(),l=F(),u=s(r,a);return o.jsx(C.div,{...u,className:R("chakra-slider__track",r.className),__css:l.track})});z.displayName="SliderTrack";const A=w((r,a)=>{const{getInnerTrackProps:s}=N(),l=F(),u=s(r,a);return o.jsx(C.div,{...u,className:R("chakra-slider__filled-track",r.className),__css:l.filledTrack})});A.displayName="SliderFilledTrack";const I=w((r,a)=>{const{getMarkerProps:s}=N(),l=F(),u=s(r,a);return o.jsx(C.div,{...u,className:R("chakra-slider__marker",r.className),__css:l.mark})});I.displayName="SliderMark";const ht={title:"Komponenter/Slider",component:_,parameters:{docs:{story:{inline:!0},canvas:{sourceState:"shown"}}},argTypes:{"aria-label":{description:"The static string to use used for `aria-label` if no visible label is used.",table:{type:{summary:"string"}},control:{type:"text"}},"aria-labelledby":{description:"The static string `aria-labelledby` that points to the ID of the element that serves as label for the slider.",table:{type:{summary:"string"}},control:{type:"text"}},"aria-valuetext":{description:"The static string to use used for `aria-valuetext`",table:{type:{summary:"string"}},control:{type:"text"}},getAriaValueText:{description:"Function that returns the `aria-valuetext` for screen readers. It is mostly used to generate a more human-readable representation of the value for assistive technologies",table:{type:{summary:"(value: number) => string"}},control:{type:"text"}},id:{description:"The base id to use for the slider and its components",table:{type:{summary:"string"}},control:{type:"text"}},colorScheme:{description:"Color of slider",table:{type:{summary:"green | blue| gray | red"},defaultValue:{summary:"blue"}},options:["green","blue","gray","red"],control:{type:"radio"}},size:{description:"Size of slider",table:{type:{summary:"sm | md | lg"},defaultValue:{summary:"md"}},options:["sm","md","lg"],control:{type:"radio"}},min:{description:"The minimum allowed value of the slider. Cannot be greater than max.",table:{type:{summary:"number"},defaultValue:{summary:"0"}},control:{type:"number"}},max:{description:"The maximum allowed value of the slider. Cannot be less than min.",table:{type:{summary:"number"},defaultValue:{summary:"100"}},control:{type:"number"}},isDisabled:{description:"If true, the slider will be disabled",table:{type:{summary:"boolean"},defaultValue:{summary:"false"}},control:"boolean"},defaultValue:{description:"The initial value of the slider in uncontrolled mode",table:{type:{summary:"number"}},control:{type:"number"}}}},P={args:{"aria-label":"sliderDefault",id:"slider"},render:r=>o.jsxs(_,{...r,children:[o.jsx(z,{children:o.jsx(A,{})}),o.jsx(M,{})]})},V={args:{"aria-label":"sliderDiscrete",defaultValue:30,id:"slider",step:10},render:r=>o.jsxs(_,{...r,children:[o.jsx(z,{children:o.jsx(A,{})}),o.jsx(M,{})]})},yt=()=>{const[r,a]=Ve.useState(5),[s,l]=Ve.useState(!1);return o.jsxs(_,{id:"slider","aria-label":"sliderWithTooltip",defaultValue:5,onChange:u=>a(u),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[o.jsx(I,{value:25,mt:"1",ml:"-2.5",fontSize:"sm",children:"25%"}),o.jsx(I,{value:50,mt:"1",ml:"-2.5",fontSize:"sm",children:"50%"}),o.jsx(I,{value:75,mt:"1",ml:"-2.5",fontSize:"sm",children:"75%"}),o.jsx(z,{children:o.jsx(A,{})}),o.jsx(ut,{hasArrow:!0,placement:"top",isOpen:s,label:`${r}%`,children:o.jsx(M,{})})]})},j={render:()=>o.jsx(yt,{})};var Ce,Re,_e;P.parameters={...P.parameters,docs:{...(Ce=P.parameters)==null?void 0:Ce.docs,source:{originalSource:`{
  args: {
    "aria-label": "sliderDefault",
    id: "slider"
  },
  render: args => <KvibSlider {...args}>
      <SliderTrack>
        <SliderFilledTrack />
      </SliderTrack>
      <SliderThumb />
    </KvibSlider>
}`,...(_e=(Re=P.parameters)==null?void 0:Re.docs)==null?void 0:_e.source}}};var De,Ie,Ne;V.parameters={...V.parameters,docs:{...(De=V.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    "aria-label": "sliderDiscrete",
    defaultValue: 30,
    id: "slider",
    step: 10
  },
  render: args => <KvibSlider {...args}>
      <SliderTrack>
        <SliderFilledTrack />
      </SliderTrack>
      <SliderThumb />
    </KvibSlider>
}`,...(Ne=(Ie=V.parameters)==null?void 0:Ie.docs)==null?void 0:Ne.source}}};var Fe,Me,ze;j.parameters={...j.parameters,docs:{...(Fe=j.parameters)==null?void 0:Fe.docs,source:{originalSource:`{
  render: () => <SliderWithTooltip />
}`,...(ze=(Me=j.parameters)==null?void 0:Me.docs)==null?void 0:ze.source}}};const St=["Preview","SliderDiscrete","SliderTooltip"],Et=Object.freeze(Object.defineProperty({__proto__:null,Preview:P,SliderDiscrete:V,SliderTooltip:j,__namedExportsOrder:St,default:ht},Symbol.toStringTag,{value:"Module"}));export{P,Et as S,V as a,j as b};

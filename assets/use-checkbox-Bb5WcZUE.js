import{t as re}from"./index-BbAC0Ngi.js";import{r as o}from"./index-BwDkhjyp.js";import{a as ie}from"./use-form-control-C6Tdrol4.js";import{v as ce}from"./visually-hidden.style-BUiBK_kv.js";import{o as le}from"./omit-QLD0Eizt.js";import{u as E}from"./use-callback-ref-DA6UG1mJ.js";import{u as I}from"./use-safe-layout-effect-BnICyLBj.js";import{u as de}from"./use-update-effect-CNg9DBIF.js";import{d as a}from"./attr-sHTFgF0E.js";import{c as i}from"./call-all-DDzecCnU.js";import{m as G}from"./use-merge-refs-Bdxaq0s4.js";function Le(m={}){const J=ie(m),{isDisabled:t,isReadOnly:d,isRequired:g,isInvalid:r,id:P,onBlur:Q,onFocus:W,"aria-describedby":R}=J,{defaultChecked:B,isChecked:M,isFocusable:X,onChange:Y,isIndeterminate:u,name:w,value:x,tabIndex:A=void 0,"aria-label":K,"aria-labelledby":U,"aria-invalid":F,...Z}=m,L=le(Z,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),y=E(Y),q=E(Q),H=E(W),[h,_]=o.useState(!1),[f,C]=o.useState(!1),[k,O]=o.useState(!1),[v,b]=o.useState(!1);o.useEffect(()=>re(_),[]);const c=o.useRef(null),[V,$]=o.useState(!0),[ee,p]=o.useState(!!B),S=M!==void 0,s=S?M:ee,T=o.useCallback(e=>{if(d||t){e.preventDefault();return}S||p(s?e.currentTarget.checked:u?!0:e.currentTarget.checked),y==null||y(e)},[d,t,s,S,u,y]);I(()=>{c.current&&(c.current.indeterminate=!!u)},[u]),de(()=>{t&&C(!1)},[t,C]),I(()=>{const e=c.current;if(!(e!=null&&e.form))return;const n=()=>{p(!!B)};return e.form.addEventListener("reset",n),()=>{var l;return(l=e.form)==null?void 0:l.removeEventListener("reset",n)}},[]);const N=t&&!X,j=o.useCallback(e=>{e.key===" "&&b(!0)},[b]),z=o.useCallback(e=>{e.key===" "&&b(!1)},[b]);I(()=>{if(!c.current)return;c.current.checked!==s&&p(c.current.checked)},[c.current]);const ae=o.useCallback((e={},n=null)=>{const l=D=>{f&&D.preventDefault(),b(!0)};return{...e,ref:n,"data-active":a(v),"data-hover":a(k),"data-checked":a(s),"data-focus":a(f),"data-focus-visible":a(f&&h),"data-indeterminate":a(u),"data-disabled":a(t),"data-invalid":a(r),"data-readonly":a(d),"aria-hidden":!0,onMouseDown:i(e.onMouseDown,l),onMouseUp:i(e.onMouseUp,()=>b(!1)),onMouseEnter:i(e.onMouseEnter,()=>O(!0)),onMouseLeave:i(e.onMouseLeave,()=>O(!1))}},[v,s,t,f,h,k,u,r,d]),te=o.useCallback((e={},n=null)=>({...e,ref:n,"data-active":a(v),"data-hover":a(k),"data-checked":a(s),"data-focus":a(f),"data-focus-visible":a(f&&h),"data-indeterminate":a(u),"data-disabled":a(t),"data-invalid":a(r),"data-readonly":a(d)}),[v,s,t,f,h,k,u,r,d]),oe=o.useCallback((e={},n=null)=>({...L,...e,ref:G(n,l=>{l&&$(l.tagName==="LABEL")}),onClick:i(e.onClick,()=>{var l;V||((l=c.current)==null||l.click(),requestAnimationFrame(()=>{var D;(D=c.current)==null||D.focus({preventScroll:!0})}))}),"data-disabled":a(t),"data-checked":a(s),"data-invalid":a(r)}),[L,t,s,r,V]),se=o.useCallback((e={},n=null)=>({...e,ref:G(c,n),type:"checkbox",name:w,value:x,id:P,tabIndex:A,onChange:i(e.onChange,T),onBlur:i(e.onBlur,q,()=>C(!1)),onFocus:i(e.onFocus,H,()=>C(!0)),onKeyDown:i(e.onKeyDown,j),onKeyUp:i(e.onKeyUp,z),required:g,checked:s,disabled:N,readOnly:d,"aria-label":K,"aria-labelledby":U,"aria-invalid":F?!!F:r,"aria-describedby":R,"aria-disabled":t,style:ce}),[w,x,P,T,q,H,j,z,g,s,N,d,K,U,F,r,R,t,A]),ne=o.useCallback((e={},n=null)=>({...e,ref:n,onMouseDown:i(e.onMouseDown,ue),"data-disabled":a(t),"data-checked":a(s),"data-invalid":a(r)}),[s,t,r]);return{state:{isInvalid:r,isFocused:f,isChecked:s,isActive:v,isHovered:k,isIndeterminate:u,isDisabled:t,isReadOnly:d,isRequired:g},getRootProps:oe,getCheckboxProps:ae,getIndicatorProps:te,getInputProps:se,getLabelProps:ne,htmlProps:L}}function ue(m){m.preventDefault(),m.stopPropagation()}export{Le as u};

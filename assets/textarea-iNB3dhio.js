import{c as x}from"./create-recipe-context-1tZJ095y.js";import{j as b}from"./jsx-runtime-CLpGMVip.js";import{a as v,b as g,g as h}from"./create-context-Bo3s1W4a.js";import{r as c}from"./index-Cjd7pOeM.js";import{m as y,a as P,c as l}from"./factory-CBKQa84h.js";import{u as O}from"./use-field-context-C9LJE8AZ.js";var w=e=>{var u;if(!e)return;const a=v(e),o=g(e),i=h(e),t=()=>{e.style.height="auto";const r=parseInt(a.borderTopWidth,10),f=parseInt(a.borderBottomWidth,10);e.style.height=`${e.scrollHeight+r+f}px`};e.addEventListener("input",t);const n=Object.getPrototypeOf(e),s=Object.getOwnPropertyDescriptor(n,"value");Object.defineProperty(e,"value",{...s,set(){var r;(r=s==null?void 0:s.set)==null||r.apply(this,arguments),t()}});const p=new o.ResizeObserver(()=>t());p.observe(e);const d=new o.MutationObserver(()=>t());return d.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(u=i.fonts)==null||u.addEventListener("loadingdone",t),()=>{var r;e.removeEventListener("input",t),(r=i.fonts)==null||r.removeEventListener("loadingdone",t),p.disconnect(),d.disconnect()}};const m=c.forwardRef((e,a)=>{const{autoresize:o,...i}=e,t=c.useRef(null),n=O(),s=y(n==null?void 0:n.getTextareaProps(),{style:{resize:o?"none":void 0}},i);return c.useEffect(()=>{if(o)return w(t.current)},[o]),b.jsx(P.textarea,{...s,ref:l(a,t)})});m.displayName="FieldTextarea";const{withContext:T,PropsProvider:F}=x({key:"textarea"}),L=T(m);export{L as T};

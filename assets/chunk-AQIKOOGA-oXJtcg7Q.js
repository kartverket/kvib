import{r as E}from"./index-BwDkhjyp.js";const L=1/60*1e3,W=typeof performance<"u"?()=>performance.now():()=>Date.now(),A=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(W()),L);function k(t){let e=[],n=[],r=0,o=!1,h=!1;const u=new WeakSet,l={schedule:(i,a=!1,c=!1)=>{const s=c&&o,f=s?e:n;return a&&u.add(i),f.indexOf(i)===-1&&(f.push(i),s&&o&&(r=e.length)),i},cancel:i=>{const a=n.indexOf(i);a!==-1&&n.splice(a,1),u.delete(i)},process:i=>{if(o){h=!0;return}if(o=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let a=0;a<r;a++){const c=e[a];c(i),u.has(c)&&(l.schedule(c),t())}o=!1,h&&(h=!1,l.process(i))}};return l}const B=40;let R=!0,w=!1,_=!1;const g={delta:0,timestamp:0},P=["read","update","preRender","render","postRender"],T=P.reduce((t,e)=>(t[e]=k(()=>w=!0),t),{}),C=P.reduce((t,e)=>{const n=T[e];return t[e]=(r,o=!1,h=!1)=>(w||q(),n.schedule(r,o,h)),t},{}),X=P.reduce((t,e)=>(t[e]=T[e].cancel,t),{});P.reduce((t,e)=>(t[e]=()=>T[e].process(g),t),{});const Y=t=>T[t].process(g),U=t=>{w=!1,g.delta=R?L:Math.max(Math.min(t-g.timestamp,B),1),g.timestamp=t,_=!0,P.forEach(Y),_=!1,w&&(R=!1,A(U))},q=()=>{w=!0,R=!0,_||A(U)},I=()=>g;var ct=t=>t?"":void 0,ht=t=>t?!0:void 0,ft=(...t)=>t.filter(Boolean).join(" ");function dt(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function pt(t){return{root:`slider-root-${t}`,getThumb:e=>`slider-thumb-${t}-${e}`,getInput:e=>`slider-input-${t}-${e}`,track:`slider-track-${t}`,innerTrack:`slider-filled-track-${t}`,getMarker:e=>`slider-marker-${t}-${e}`,output:`slider-output-${t}`}}function x(t){const{orientation:e,vertical:n,horizontal:r}=t;return e==="vertical"?n:r}var y={width:0,height:0},S=t=>t||y;function mt(t){const{orientation:e,thumbPercents:n,thumbRects:r,isReversed:o}=t,h=p=>{var m;const F=(m=r[p])!=null?m:y;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...x({orientation:e,vertical:{bottom:`calc(${n[p]}% - ${F.height/2}px)`},horizontal:{left:`calc(${n[p]}% - ${F.width/2}px)`}})}},u=e==="vertical"?r.reduce((p,m)=>S(p).height>S(m).height?p:m,y):r.reduce((p,m)=>S(p).width>S(m).width?p:m,y),l={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...x({orientation:e,vertical:u?{paddingLeft:u.width/2,paddingRight:u.width/2}:{},horizontal:u?{paddingTop:u.height/2,paddingBottom:u.height/2}:{}})},i={position:"absolute",...x({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},a=n.length===1,c=[0,o?100-n[0]:n[0]],s=a?c:n;let f=s[0];!a&&o&&(f=100-f);const v=Math.abs(s[s.length-1]-s[0]),O={...i,...x({orientation:e,vertical:o?{height:`${v}%`,top:`${f}%`}:{height:`${v}%`,bottom:`${f}%`},horizontal:o?{width:`${v}%`,right:`${f}%`}:{width:`${v}%`,left:`${f}%`}})};return{trackStyle:i,innerTrackStyle:O,rootStyle:l,getThumbStyle:h}}function vt(t){const{isReversed:e,direction:n,orientation:r}=t;return n==="ltr"||r==="vertical"?e:!e}function V(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function K(t){const e=G(t);return typeof e.PointerEvent<"u"&&t instanceof e.PointerEvent?t.pointerType==="mouse":t instanceof e.MouseEvent}function H(t){return!!t.touches}function j(t){return H(t)&&t.touches.length>1}function G(t){var e;return(e=t.view)!=null?e:window}function J(t,e="page"){const n=t.touches[0]||t.changedTouches[0];return{x:n[`${e}X`],y:n[`${e}Y`]}}function Q(t,e="page"){return{x:t[`${e}X`],y:t[`${e}Y`]}}function N(t,e="page"){return H(t)?J(t,e):Q(t,e)}function Z(t){return e=>{const n=K(e);(!n||n&&e.button===0)&&t(e)}}function tt(t,e=!1){function n(o){t(o,{point:N(o)})}return e?Z(n):n}function $(t,e,n,r){return V(t,e,tt(n,e==="pointerdown"),r)}var et=Object.defineProperty,nt=(t,e,n)=>e in t?et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e,n)=>(nt(t,typeof e!="symbol"?e+"":e,n),n),rt=class{constructor(t,e,n){d(this,"history",[]),d(this,"startEvent",null),d(this,"lastEvent",null),d(this,"lastEventInfo",null),d(this,"handlers",{}),d(this,"removeListeners",()=>{}),d(this,"threshold",3),d(this,"win"),d(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const l=b(this.lastEventInfo,this.history),i=this.startEvent!==null,a=ut(l.offset,{x:0,y:0})>=this.threshold;if(!i&&!a)return;const{timestamp:c}=I();this.history.push({...l.point,timestamp:c});const{onStart:s,onMove:f}=this.handlers;i||(s==null||s(this.lastEvent,l),this.startEvent=this.lastEvent),f==null||f(this.lastEvent,l)}),d(this,"onPointerMove",(l,i)=>{this.lastEvent=l,this.lastEventInfo=i,C.update(this.updatePoint,!0)}),d(this,"onPointerUp",(l,i)=>{const a=b(i,this.history),{onEnd:c,onSessionEnd:s}=this.handlers;s==null||s(l,a),this.end(),!(!c||!this.startEvent)&&(c==null||c(l,a))});var r;if(this.win=(r=t.view)!=null?r:window,j(t))return;this.handlers=e,n&&(this.threshold=n),t.stopPropagation(),t.preventDefault();const o={point:N(t)},{timestamp:h}=I();this.history=[{...o.point,timestamp:h}];const{onSessionStart:u}=e;u==null||u(t,b(o,this.history)),this.removeListeners=it($(this.win,"pointermove",this.onPointerMove),$(this.win,"pointerup",this.onPointerUp),$(this.win,"pointercancel",this.onPointerUp))}updateHandlers(t){this.handlers=t}end(){var t;(t=this.removeListeners)==null||t.call(this),X.update(this.updatePoint)}};function z(t,e){return{x:t.x-e.x,y:t.y-e.y}}function b(t,e){return{point:t.point,delta:z(t.point,e[e.length-1]),offset:z(t.point,e[0]),velocity:st(e,.1)}}var ot=t=>t*1e3;function st(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=t[t.length-1];for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>ot(e)));)n--;if(!r)return{x:0,y:0};const h=(o.timestamp-r.timestamp)/1e3;if(h===0)return{x:0,y:0};const u={x:(o.x-r.x)/h,y:(o.y-r.y)/h};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function it(...t){return e=>t.reduce((n,r)=>r(n),e)}function M(t,e){return Math.abs(t-e)}function D(t){return"x"in t&&"y"in t}function ut(t,e){if(typeof t=="number"&&typeof e=="number")return M(t,e);if(D(t)&&D(e)){const n=M(t.x,e.x),r=M(t.y,e.y);return Math.sqrt(n**2+r**2)}return 0}function at(t){const e=E.useRef(null);return e.current=t,e}function gt(t,e){const{onPan:n,onPanStart:r,onPanEnd:o,onPanSessionStart:h,onPanSessionEnd:u,threshold:l}=e,i=!!(n||r||o||h||u),a=E.useRef(null),c=at({onSessionStart:h,onSessionEnd:u,onStart:r,onMove:n,onEnd(s,f){a.current=null,o==null||o(s,f)}});E.useEffect(()=>{var s;(s=a.current)==null||s.updateHandlers(c.current)}),E.useEffect(()=>{const s=t.current;if(!s||!i)return;function f(v){a.current=new rt(v,c.current,l)}return $(s,"pointerdown",f)},[t,i,c,l]),E.useEffect(()=>()=>{var s;(s=a.current)==null||s.end(),a.current=null},[])}export{ht as a,vt as b,dt as c,ct as d,pt as e,ft as f,mt as g,at as h,x as o,gt as u};

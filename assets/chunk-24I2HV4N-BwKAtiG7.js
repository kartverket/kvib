import{r as n}from"./index-BwDkhjyp.js";import{a as ge,u as ye,b as he}from"./index-DUHZmgZA.js";import{u as Ce}from"./index-CFS2lEUc.js";import{u as be}from"./index-DOEX-ehf.js";import{u as xe,c as H}from"./chunk-LUYFNC5G-DV8XJogC.js";import{m as C}from"./index-Bdxaq0s4.js";import{e as u,o as Te,x as Re,c as Q,f as W,s as we,a as ke}from"./chunk-ZJJGQIVY-CoI1iMVy.js";import{l as Se}from"./index-DLVTVQVU.js";import{a as Ee}from"./chunk-DMO4EI7P-D6u3hnqn.js";import{u as Oe}from"./chunk-UIGT7YZF-XoNRsZNz.js";import{j as b}from"./extends-CwFRzn3r.js";import{c as X}from"./index-CHDWSgKD.js";import{m as Ae}from"./proxy-CzVOQe18.js";var[Be,B]=X({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Me,Fe]=X({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `});function De(r){const o=n.Children.only(r.children),{getTriggerProps:s}=B();return n.cloneElement(o,s(o.props,o.ref))}De.displayName="PopoverTrigger";var g={click:"click",hover:"hover"};function Ie(r={}){const{closeOnBlur:o=!0,closeOnEsc:s=!0,initialFocusRef:m,id:f,returnFocusOnClose:a=!0,autoFocus:M=!0,arrowSize:y,arrowShadowColor:x,trigger:l=g.click,openDelay:T=200,closeDelay:R=200,isLazy:Z,lazyBehavior:ee="unmount",computePositionOnMount:oe,...re}=r,{isOpen:i,onClose:p,onOpen:F,onToggle:j}=be(r),D=n.useRef(null),w=n.useRef(null),P=n.useRef(null),h=n.useRef(!1),z=n.useRef(!1);i&&(z.current=!0);const[L,ne]=n.useState(!1),[V,te]=n.useState(!1),se=n.useId(),ie=f??se,[K,k,S,E]=["popover-trigger","popover-content","popover-header","popover-body"].map(e=>`${e}-${ie}`),{referenceRef:O,getArrowProps:ae,getPopperProps:U,getArrowInnerProps:ce,forceUpdate:le}=xe({...re,enabled:i||!!oe}),$=ge({isOpen:i,ref:P});Ce({enabled:i,ref:w}),ye(P,{focusRef:w,visible:i,shouldFocus:a&&l===g.click}),he(P,{focusRef:m,visible:i,shouldFocus:M&&l===g.click});const G=Se({wasSelected:z.current,enabled:Z,mode:ee,isSelected:$.present}),ue=n.useCallback((e={},c=null)=>{const t={...e,style:{...e.style,transformOrigin:H.transformOrigin.varRef,[H.arrowSize.var]:y?`${y}px`:void 0,[H.arrowShadowColor.var]:x},ref:C(P,c),children:G?e.children:null,id:k,tabIndex:-1,role:"dialog",onKeyDown:u(e.onKeyDown,d=>{s&&d.key==="Escape"&&p()}),onBlur:u(e.onBlur,d=>{const A=J(d),_=N(P.current,A),Pe=N(w.current,A);i&&o&&(!_&&!Pe)&&p()}),"aria-labelledby":L?S:void 0,"aria-describedby":V?E:void 0};return l===g.hover&&(t.role="tooltip",t.onMouseEnter=u(e.onMouseEnter,()=>{h.current=!0}),t.onMouseLeave=u(e.onMouseLeave,d=>{d.nativeEvent.relatedTarget!==null&&(h.current=!1,setTimeout(()=>p(),R))})),t},[G,k,L,S,V,E,l,s,p,i,o,R,x,y]),pe=n.useCallback((e={},c=null)=>U({...e,style:{visibility:i?"visible":"hidden",...e.style}},c),[i,U]),de=n.useCallback((e,c=null)=>({...e,ref:C(c,D,O)}),[D,O]),v=n.useRef(),I=n.useRef(),q=n.useCallback(e=>{D.current==null&&O(e)},[O]),fe=n.useCallback((e={},c=null)=>{const t={...e,ref:C(w,c,q),id:K,"aria-haspopup":"dialog","aria-expanded":i,"aria-controls":k};return l===g.click&&(t.onClick=u(e.onClick,j)),l===g.hover&&(t.onFocus=u(e.onFocus,()=>{v.current===void 0&&F()}),t.onBlur=u(e.onBlur,d=>{const A=J(d),_=!N(P.current,A);i&&o&&_&&p()}),t.onKeyDown=u(e.onKeyDown,d=>{d.key==="Escape"&&p()}),t.onMouseEnter=u(e.onMouseEnter,()=>{h.current=!0,v.current=window.setTimeout(()=>F(),T)}),t.onMouseLeave=u(e.onMouseLeave,()=>{h.current=!1,v.current&&(clearTimeout(v.current),v.current=void 0),I.current=window.setTimeout(()=>{h.current===!1&&p()},R)})),t},[K,i,k,l,q,j,F,o,p,T,R]);n.useEffect(()=>()=>{v.current&&clearTimeout(v.current),I.current&&clearTimeout(I.current)},[]);const me=n.useCallback((e={},c=null)=>({...e,id:S,ref:C(c,t=>{ne(!!t)})}),[S]),ve=n.useCallback((e={},c=null)=>({...e,id:E,ref:C(c,t=>{te(!!t)})}),[E]);return{forceUpdate:le,isOpen:i,onAnimationComplete:$.onComplete,onClose:p,getAnchorProps:de,getArrowProps:ae,getArrowInnerProps:ce,getPopoverPositionerProps:pe,getPopoverProps:ue,getTriggerProps:fe,getHeaderProps:me,getBodyProps:ve}}function N(r,o){return r===o||(r==null?void 0:r.contains(o))}function J(r){var o;const s=r.currentTarget.ownerDocument.activeElement;return(o=r.relatedTarget)!=null?o:s}function _e(r){const o=Ee("Popover",r),{children:s,...m}=Te(r),f=Oe(),a=Ie({...m,direction:f.direction});return b.jsx(Be,{value:a,children:b.jsx(Me,{value:o,children:Re(s,{isOpen:a.isOpen,onClose:a.onClose,forceUpdate:a.forceUpdate})})})}_e.displayName="Popover";function He(r){const o=n.Children.only(r.children),{getAnchorProps:s}=B();return n.cloneElement(o,s(o.props,o.ref))}He.displayName="PopoverAnchor";function Ne(r){if(r)return{enter:{...r.enter,visibility:"visible"},exit:{...r.exit,transitionEnd:{visibility:"hidden"}}}}var je={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},ze=Q(Ae.section),Y=W(function(o,s){const{variants:m=je,...f}=o,{isOpen:a}=B();return b.jsx(ze,{ref:s,variants:Ne(m),initial:!1,animate:a?"enter":"exit",...f})});Y.displayName="PopoverTransition";var Le=W(function(o,s){const{rootProps:m,motionProps:f,...a}=o,{getPopoverProps:M,getPopoverPositionerProps:y,onAnimationComplete:x}=B(),l=Fe(),T={position:"relative",display:"flex",flexDirection:"column",...l.content};return b.jsx(Q.div,{...y(m),__css:l.popper,className:"chakra-popover__popper",children:b.jsx(Y,{...f,...M(a,s),onAnimationComplete:we(x,a.onAnimationComplete),className:ke("chakra-popover__content",o.className),__css:T})})});Le.displayName="PopoverContent";export{_e as P,Fe as a,De as b,Le as c,He as d,B as u};

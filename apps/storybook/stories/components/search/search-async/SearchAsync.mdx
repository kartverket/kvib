import { Meta, Canvas, Story, Controls, Source } from "@storybook/blocks";
import * as SearchAsyncStories from "./SearchAsync.stories";
import { DocsHeading, DocsAnatomy, DocsContainer, DocsStory, Feedback } from "../../../templates";
import { Text, Code, Box } from "@kvib/react/src/";

<Meta of={SearchAsyncStories} />

# SearchAsync

SearchAsync er et søkefelt som laster inn søkeresultater fra en liste med objekter. Resultatene blir vist i en dropdown der brukeren kan velge hvilket resultat som skal bli valgt.

```jsx
import { SearchAsync } from "@kvib/react";
```

<DocsContainer>

**Egnet til:**

- Raskt finne relevant innhold

**Uegnet til:**

- Innhold som lett kan navigeres til uten søk

<Feedback component="SearchAsync" />

</DocsContainer>

<DocsHeading>Alternativer</DocsHeading>
<DocsContainer>

<DocsStory
  title="Utseende"
  description={<Text></Text>}
  story={<Canvas of={SearchAsyncStories.SearchAsyncVariants} />}
/>

<DocsStory
  title="Standardalternativer"
  description={<Text></Text>}
  story={<Canvas of={SearchAsyncStories.SearchAsyncDropdown} />}
/>

<DocsStory
  title="Multi"
  description={<Text></Text>}
  story={<Canvas of={SearchAsyncStories.SearchAsyncMultiDropdown} />}
/>

<DocsStory
  title="Egendefinert feedback ved ingen resultater"
  description={
    <Box>
      <Text>
        Det er mulig å endre på tilbakemeldingen som dukker opp i dropdown ved å bruke propen{" "}
        <Code>noOptionsMessage</Code>. Denne tar inn en funksjon som returnerer en React-komponent. Funksjonen tar inn
        et objekt med <Code>inputValue</Code> som inneholder det brukeren har skrevet i søkefeltet.
      </Text>
      <Text>
        Kodeblokken under viser hvordan man kan bruke
        <Code>noOptionsMessage</Code> og <Code>loadOptions</Code> til å sørge for at brukeren skriver inn minst tre tegn
        før vi starter et søk.
      </Text>
    </Box>
  }
  story={<Canvas of={SearchAsyncStories.SearchAsyncNoOptions} />}
/>

<Source
  code={`const mockLoadOptions = (inputValue: string, callback: (options: typeof fruits) => void) => {
  if (inputValue.length <= 2) {
    callback([]);
    return;
  }
  setTimeout(() => {
    const filteredFruits = fruits.filter((fruit) => fruit.label.toLowerCase().includes(inputValue.toLowerCase()));
    callback(filteredFruits);
  }, 500);
};
const noOptionsMessage = ({ inputValue }: { inputValue: string }) => {
  if (inputValue.length > 0) {
    if (inputValue.length <= 2) {
      return <Text>Søket må inneholde minst 3 tegn</Text>;
    } else {
      return <Text>Fant ingen resultater</Text>;
    }
  }
  return null;
};`}
  dark
/>

</DocsContainer>

<DocsHeading>Retningslinjer</DocsHeading>

<DocsContainer>

Skriv retningslinjer her

</DocsContainer>

<DocsHeading>Props</DocsHeading>
<Canvas of={SearchAsyncStories.SearchAsync} />
<Controls of={SearchAsyncStories.SearchAsync} />

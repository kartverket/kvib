import { Meta, Canvas, Story, Controls, Source } from "@storybook/blocks";
import * as SearchAsyncStories from "./SearchAsync.stories";

<Meta of={SearchAsyncStories} />

# SearchAsync

SearchAsync er et søkefelt som laster inn søkeresultater fra en liste med objekter. Resultatene blir vist i en dropdown der brukeren kan velge hvilket resultat som skal bli valgt.

## Ta i bruk

```jsx
import { SearchAsync } from "@kvib/react";
```

## Props

<Canvas of={SearchAsyncStories.SearchAsync} />
<Controls of={SearchAsyncStories.SearchAsync} />

## Async søkeresultater

<Canvas of={SearchAsyncStories.SearchAsyncResults} />

## Egendefinert tilbakemelding ved ingen resultater

Det er mulig å endre på tilbakemeldingen som dukker opp i dropdown ved å bruke propen `noOptionsMessage`. Denne tar inn en funksjon som returnerer en React-komponent. Funksjonen tar inn et objekt med `inputValue` som inneholder det brukeren har skrevet i søkefeltet.
Kodeblokken under eksempelet viser hvordan man kan bruke `noOptionsMessage` og `loadOptions` til å sørge for at brukeren skriver inn minst tre tegn før vi starter et søk.

<Canvas of={SearchAsyncStories.SearchAsyncNoOptions} />

<Source
  code={`const mockLoadOptions = (inputValue: string, callback: (options: typeof fruits) => void) => {
  if (inputValue.length <= 2) {
    callback([]);
    return;
  }
  setTimeout(() => {
    const filteredFruits = fruits.filter((fruit) => fruit.label.toLowerCase().includes(inputValue.toLowerCase()));
    callback(filteredFruits);
  }, 500);
};
const noOptionsMessage = ({ inputValue }: { inputValue: string }) => {
  if (inputValue.length > 0) {
    if (inputValue.length <= 2) {
      return <Text>Søket må inneholde minst 3 tegn</Text>;
    } else {
      return <Text>Fant ingen resultater</Text>;
    }
  }
  return null;
};`}
  dark
/>

## Søkeresultater med delay

<Canvas of={SearchAsyncStories.SearchAsyncResultsDebounce} />

## Standardalternativer

<Canvas inline of={SearchAsyncStories.SearchAsyncDropdown} />

## Multi

<Canvas of={SearchAsyncStories.SearchAsyncMulti} />

## Multi med dropdown

<Canvas of={SearchAsyncStories.SearchAsyncMultiDropdown} />

## Størrelser

<Canvas of={SearchAsyncStories.SearchAsyncSizes} />

## Varianter

<Canvas of={SearchAsyncStories.SearchAsyncVariants} />
